"use strict";(self.webpackChunkbot_list=self.webpackChunkbot_list||[]).push([[792],{449:(et,de,L)=>{var _=L(438);let K=null;function le(){return K}class Y{}const me=new _.nKC("");let ke=(()=>{class o{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:()=>(0,_.WQX)(J),providedIn:"platform"})}}return o})(),J=(()=>{class o extends ke{constructor(){super(),this._doc=(0,_.WQX)(me),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return le().getBaseHref(this._doc)}onPopState(e){const i=le().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=le().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,a){this._history.pushState(e,i,a)}replaceState(e,i,a){this._history.replaceState(e,i,a)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:()=>new o,providedIn:"platform"})}}return o})();function H(o,n){if(0==o.length)return n;if(0==n.length)return o;let e=0;return o.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?o+n.substring(1):1==e?o+n:o+"/"+n}function ae(o){const n=o.match(/#|\?|$/),e=n&&n.index||o.length;return o.slice(0,e-("/"===o[e-1]?1:0))+o.slice(e)}function rt(o){return o&&"?"!==o[0]?"?"+o:o}let De=(()=>{class o{historyGo(e){throw new Error("")}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:()=>(0,_.WQX)(cr),providedIn:"root"})}}return o})();const ot=new _.nKC("");let cr=(()=>{class o extends De{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,_.WQX)(me).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return H(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+rt(this._platformLocation.search),a=this._platformLocation.hash;return a&&e?`${i}${a}`:i}pushState(e,i,a,c){const d=this.prepareExternalUrl(a+rt(c));this._platformLocation.pushState(e,i,d)}replaceState(e,i,a,c){const d=this.prepareExternalUrl(a+rt(c));this._platformLocation.replaceState(e,i,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(ke),_.KVO(ot,8))}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),Wt=(()=>{class o{constructor(e){this._subject=new _.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._basePath=function pe(o){if(new RegExp("^(https?:)?//").test(o)){const[,e]=o.split(/\/\/[^\/]+/);return e}return o}(ae(Ct(i))),this._locationStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+rt(i))}normalize(e){return o.stripTrailingSlash(function Ui(o,n){if(!o||!n.startsWith(o))return n;const e=n.substring(o.length);return""===e||["/",";","?","#"].includes(e[0])?e:n}(this._basePath,Ct(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",a=null){this._locationStrategy.pushState(a,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+rt(i)),a)}replaceState(e,i="",a=null){this._locationStrategy.replaceState(a,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+rt(i)),a)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(a=>a(e,i))}subscribe(e,i,a){return this._subject.subscribe({next:e,error:i,complete:a})}static{this.normalizeQueryParams=rt}static{this.joinWithSlash=H}static{this.stripTrailingSlash=ae}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(De))}}static{this.\u0275prov=_.jDH({token:o,factory:()=>function Hn(){return new Wt((0,_.KVO)(De))}(),providedIn:"root"})}}return o})();function Ct(o){return o.replace(/\/index.html$/,"")}function Ho(o,n){n=encodeURIComponent(n);for(const e of o.split(";")){const i=e.indexOf("="),[a,c]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(a.trim()===n)return decodeURIComponent(c)}return null}class Su{constructor(n,e,i,a){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $o=(()=>{class o{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,i,a){this._viewContainer=e,this._template=i,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((a,c,d)=>{if(null==a.previousIndex)i.createEmbeddedView(this._template,new Su(a.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)i.remove(null===c?void 0:c);else if(null!==c){const f=i.get(c);i.move(f,d),Iu(f,a)}});for(let a=0,c=i.length;a<c;a++){const f=i.get(a).context;f.index=a,f.count=c,f.ngForOf=this._ngForOf}e.forEachIdentityChange(a=>{Iu(i.get(a.currentIndex),a)})}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||o)(_.rXU(_.c1b),_.rXU(_.C4Q),_.rXU(_._q3))}}static{this.\u0275dir=_.FsC({type:o,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return o})();function Iu(o,n){o.context.$implicit=n.item}let zo=(()=>{class o{constructor(e,i){this._viewContainer=e,this._context=new Tu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){ry("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){ry("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}static{this.\u0275fac=function(i){return new(i||o)(_.rXU(_.c1b),_.rXU(_.C4Q))}}static{this.\u0275dir=_.FsC({type:o,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return o})();class Tu{constructor(){this.$implicit=null,this.ngIf=null}}function ry(o,n){if(n&&!n.createEmbeddedView)throw new Error(`${o} must be a TemplateRef, but received '${(0,_.Tbb)(n)}'.`)}let re=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275mod=_.$C({type:o})}static{this.\u0275inj=_.G2t({})}}return o})();const Ou="server";function ku(o){return o===Ou}class Cl{}function bp(o,n,e,i,a,c,d){try{var f=o[c](d),g=f.value}catch(v){return void e(v)}f.done?n(g):Promise.resolve(g).then(i,a)}function te(o){return function(){var n=this,e=arguments;return new Promise(function(i,a){var c=o.apply(n,e);function d(g){bp(c,i,a,d,f,"next",g)}function f(g){bp(c,i,a,d,f,"throw",g)}d(void 0)})}}var He=L(71);function Ku(o){return o[o.length-1]}function Nl(o){return function wp(o){return o&&(0,He.T)(o.schedule)}(Ku(o))?o.pop():void 0}function On(o){return this instanceof On?(this.v=o,this):new On(o)}function qi(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=o[Symbol.asyncIterator];return n?n.call(o):(o=function _t(o){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&o[n],i=0;if(e)return e.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(c){e[c]=o[c]&&function(d){return new Promise(function(f,g){!function a(c,d,f,g){Promise.resolve(g).then(function(v){c({value:v,done:f})},d)}(f,g,(d=o[c](d)).done,d.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const ta=o=>o&&"number"==typeof o.length&&"function"!=typeof o;function Rt(o){return(0,He.T)(o?.then)}var Xe=L(985),Ll=L(494);function gi(o){return(0,He.T)(o[Ll.s])}function na(o){return Symbol.asyncIterator&&(0,He.T)(o?.[Symbol.asyncIterator])}function Kn(o){return new TypeError(`You provided ${null!==o&&"object"==typeof o?"an invalid object":`'${o}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ed=function ra(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ep(o){return(0,He.T)(o?.[ed])}function jl(o){return function ht(o,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,i=e.apply(o,n||[]),c=[];return a=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",function d(A){return function(S){return Promise.resolve(S).then(A,w)}}),a[Symbol.asyncIterator]=function(){return this},a;function f(A,S){i[A]&&(a[A]=function(T){return new Promise(function(x,M){c.push([A,T,x,M])>1||g(A,T)})},S&&(a[A]=S(a[A])))}function g(A,S){try{!function v(A){A.value instanceof On?Promise.resolve(A.value.v).then(y,w):D(c[0][2],A)}(i[A](S))}catch(T){D(c[0][3],T)}}function y(A){g("next",A)}function w(A){g("throw",A)}function D(A,S){A(S),c.shift(),c.length&&g(c[0][0],c[0][1])}}(this,arguments,function*(){const e=o.getReader();try{for(;;){const{value:i,done:a}=yield On(e.read());if(a)return yield On(void 0);yield yield On(i)}}finally{e.releaseLock()}})}function td(o){return(0,He.T)(o?.getReader)}var Ty=L(334);function pr(o){if(o instanceof Xe.c)return o;if(null!=o){if(gi(o))return function _D(o){return new Xe.c(n=>{const e=o[Ll.s]();if((0,He.T)(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(o);if(ta(o))return function ED(o){return new Xe.c(n=>{for(let e=0;e<o.length&&!n.closed;e++)n.next(o[e]);n.complete()})}(o);if(Rt(o))return function DD(o){return new Xe.c(n=>{o.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,Ty.m)})}(o);if(na(o))return My(o);if(Ep(o))return function CD(o){return new Xe.c(n=>{for(const e of o)if(n.next(e),n.closed)return;n.complete()})}(o);if(td(o))return function AD(o){return My(jl(o))}(o)}throw Kn(o)}function My(o){return new Xe.c(n=>{(function SD(o,n){var e,i,a,c;return function Kt(o,n,e,i){return new(e||(e=Promise))(function(c,d){function f(y){try{v(i.next(y))}catch(w){d(w)}}function g(y){try{v(i.throw(y))}catch(w){d(w)}}function v(y){y.done?c(y.value):function a(c){return c instanceof e?c:new e(function(d){d(c)})}(y.value).then(f,g)}v((i=i.apply(o,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=qi(o);!(i=yield e.next()).done;)if(n.next(i.value),n.closed)return}catch(d){a={error:d}}finally{try{i&&!i.done&&(c=e.return)&&(yield c.call(e))}finally{if(a)throw a.error}}n.complete()})})(o,n).catch(e=>n.error(e))})}function mi(o,n,e,i=0,a=!1){const c=n.schedule(function(){e(),a?o.add(this.schedule(null,i)):this.unsubscribe()},i);if(o.add(c),!a)return c}var Yn=L(974),Qn=L(360);function Ry(o,n=0){return(0,Yn.N)((e,i)=>{e.subscribe((0,Qn._)(i,a=>mi(i,o,()=>i.next(a),n),()=>mi(i,o,()=>i.complete(),n),a=>mi(i,o,()=>i.error(a),n)))})}function xy(o,n=0){return(0,Yn.N)((e,i)=>{i.add(o.schedule(()=>e.subscribe(i),n))})}function Ny(o,n){if(!o)throw new Error("Iterable cannot be null");return new Xe.c(e=>{mi(e,n,()=>{const i=o[Symbol.asyncIterator]();mi(e,n,()=>{i.next().then(a=>{a.done?e.complete():e.next(a.value)})},0,!0)})})}function Jt(o,n){return n?function Py(o,n){if(null!=o){if(gi(o))return function Dp(o,n){return pr(o).pipe(xy(n),Ry(n))}(o,n);if(ta(o))return function ID(o,n){return new Xe.c(e=>{let i=0;return n.schedule(function(){i===o.length?e.complete():(e.next(o[i++]),e.closed||this.schedule())})})}(o,n);if(Rt(o))return function Cp(o,n){return pr(o).pipe(xy(n),Ry(n))}(o,n);if(na(o))return Ny(o,n);if(Ep(o))return function TD(o,n){return new Xe.c(e=>{let i;return mi(e,n,()=>{i=o[ed](),mi(e,n,()=>{let a,c;try{({value:a,done:c}=i.next())}catch(d){return void e.error(d)}c?e.complete():e.next(a)},0,!0)}),()=>(0,He.T)(i?.return)&&i.return()})}(o,n);if(td(o))return function MD(o,n){return Ny(jl(o),n)}(o,n)}throw Kn(o)}(o,n):pr(o)}function be(...o){return Jt(o,Nl(o))}var $e=L(354);function fn(o,n,e=1/0){return(0,He.T)(n)?fn((i,a)=>(0,$e.T)((c,d)=>n(i,c,a,d))(pr(o(i,a))),e):("number"==typeof n&&(e=n),(0,Yn.N)((i,a)=>function Oy(o,n,e,i,a,c,d,f){const g=[];let v=0,y=0,w=!1;const D=()=>{w&&!g.length&&!v&&n.complete()},A=T=>v<i?S(T):g.push(T),S=T=>{c&&n.next(T),v++;let x=!1;pr(e(T,y++)).subscribe((0,Qn._)(n,M=>{a?.(M),c?A(M):n.next(M)},()=>{x=!0},void 0,()=>{if(x)try{for(v--;g.length&&v<i;){const M=g.shift();d?mi(n,d,()=>S(M)):S(M)}D()}catch(M){n.error(M)}}))};return o.subscribe((0,Qn._)(n,A,()=>{w=!0,D()})),()=>{f?.()}}(i,a,o,e)))}function Os(o,n){return(0,He.T)(n)?fn(o,n,1):fn(o,1)}var $r=L(964);function Bl(o){return(0,Yn.N)((n,e)=>{try{n.subscribe(e)}finally{e.add(o)}})}function Zn(o,n){return(0,Yn.N)((e,i)=>{let a=null,c=0,d=!1;const f=()=>d&&!a&&i.complete();e.subscribe((0,Qn._)(i,g=>{a?.unsubscribe();let v=0;const y=c++;pr(o(g,y)).subscribe(a=(0,Qn._)(i,w=>i.next(n?n(g,w,y,v++):w),()=>{a=null,f()}))},()=>{d=!0,f()}))})}var ia=L(669);function ft(o,n,e){const i=(0,He.T)(o)||n||e?{next:o,error:n,complete:e}:o;return i?(0,Yn.N)((a,c)=>{var d;null===(d=i.subscribe)||void 0===d||d.call(i);let f=!0;a.subscribe((0,Qn._)(c,g=>{var v;null===(v=i.next)||void 0===v||v.call(i,g),c.next(g)},()=>{var g;f=!1,null===(g=i.complete)||void 0===g||g.call(i),c.complete()},g=>{var v;f=!1,null===(v=i.error)||void 0===v||v.call(i,g),c.error(g)},()=>{var g,v;f&&(null===(g=i.unsubscribe)||void 0===g||g.call(i)),null===(v=i.finalize)||void 0===v||v.call(i)}))}):ia.D}class sa{}class oa{}class Se{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?"string"==typeof n?this.lazyInit=()=>{this.headers=new Map,n.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const a=e.slice(0,i),c=a.toLowerCase(),d=e.slice(i+1).trim();this.maybeSetNormalizedName(a,c),this.headers.has(c)?this.headers.get(c).push(d):this.headers.set(c,[d])}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof Se?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new Se;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Se?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(n.name,e);const a=("a"===n.op?this.headers.get(e):void 0)||[];a.push(...i),this.headers.set(e,a);break;case"d":const c=n.value;if(c){let d=this.headers.get(e);if(!d)return;d=d.filter(f=>-1===c.indexOf(f)),0===d.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,d)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(n,e){const i=(Array.isArray(e)?e:[e]).map(c=>c.toString()),a=n.toLowerCase();this.headers.set(a,i),this.maybeSetNormalizedName(n,a)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class aa{encodeKey(n){return vi(n)}encodeValue(n){return vi(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const ky=/%(\d[a-f0-9])/gi,la={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function vi(o){return encodeURIComponent(o).replace(ky,(n,e)=>la[e]??n)}function on(o){return`${o}`}class yi{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new aa,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function pn(o,n){const e=new Map;return o.length>0&&o.replace(/^\?/,"").split("&").forEach(a=>{const c=a.indexOf("="),[d,f]=-1==c?[n.decodeKey(a),""]:[n.decodeKey(a.slice(0,c)),n.decodeValue(a.slice(c+1))],g=e.get(d)||[];g.push(f),e.set(d,g)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const i=n.fromObject[e],a=Array.isArray(i)?i.map(on):[on(i)];this.map.set(e,a)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(i=>{const a=n[i];Array.isArray(a)?a.forEach(c=>{e.push({param:i,value:c,op:"a"})}):e.push({param:i,value:a,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new yi({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(on(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let i=this.map.get(n.param)||[];const a=i.indexOf(on(n.value));-1!==a&&i.splice(a,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class Fy{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function nd(o){return typeof ArrayBuffer<"u"&&o instanceof ArrayBuffer}function rd(o){return typeof Blob<"u"&&o instanceof Blob}function id(o){return typeof FormData<"u"&&o instanceof FormData}class Xi{constructor(n,e,i,a){let c;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function Jn(o){switch(o){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==i?i:null,c=a):c=i,c&&(this.reportProgress=!!c.reportProgress,this.withCredentials=!!c.withCredentials,c.responseType&&(this.responseType=c.responseType),c.headers&&(this.headers=c.headers),c.context&&(this.context=c.context),c.params&&(this.params=c.params),this.transferCache=c.transferCache),this.headers??=new Se,this.context??=new Fy,this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=e;else{const f=e.indexOf("?");this.urlWithParams=e+(-1===f?"?":f<e.length-1?"&":"")+d}}else this.params=new yi,this.urlWithParams=e}serializeBody(){return null===this.body?null:"string"==typeof this.body||nd(this.body)||rd(this.body)||id(this.body)||function Ul(o){return typeof URLSearchParams<"u"&&o instanceof URLSearchParams}(this.body)?this.body:this.body instanceof yi?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||id(this.body)?null:rd(this.body)?this.body.type||null:nd(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof yi?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,i=n.url||this.url,a=n.responseType||this.responseType,c=n.transferCache??this.transferCache,d=void 0!==n.body?n.body:this.body,f=n.withCredentials??this.withCredentials,g=n.reportProgress??this.reportProgress;let v=n.headers||this.headers,y=n.params||this.params;const w=n.context??this.context;return void 0!==n.setHeaders&&(v=Object.keys(n.setHeaders).reduce((D,A)=>D.set(A,n.setHeaders[A]),v)),n.setParams&&(y=Object.keys(n.setParams).reduce((D,A)=>D.set(A,n.setParams[A]),y)),new Xi(e,i,d,{params:y,headers:v,context:w,reportProgress:g,responseType:a,withCredentials:f,transferCache:c})}}var gr=function(o){return o[o.Sent=0]="Sent",o[o.UploadProgress=1]="UploadProgress",o[o.ResponseHeader=2]="ResponseHeader",o[o.DownloadProgress=3]="DownloadProgress",o[o.Response=4]="Response",o[o.User=5]="User",o}(gr||{});class ks{constructor(n,e=200,i="OK"){this.headers=n.headers||new Se,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class Fs extends ks{constructor(n={}){super(n),this.type=gr.ResponseHeader}clone(n={}){return new Fs({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class gn extends ks{constructor(n={}){super(n),this.type=gr.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new gn({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class fe extends ks{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function Tp(o,n){return{body:n,headers:o.headers,context:o.context,observe:o.observe,params:o.params,reportProgress:o.reportProgress,responseType:o.responseType,withCredentials:o.withCredentials,transferCache:o.transferCache}}let Mp=(()=>{class o{constructor(e){this.handler=e}request(e,i,a={}){let c;if(e instanceof Xi)c=e;else{let g,v;g=a.headers instanceof Se?a.headers:new Se(a.headers),a.params&&(v=a.params instanceof yi?a.params:new yi({fromObject:a.params})),c=new Xi(e,i,void 0!==a.body?a.body:null,{headers:g,context:a.context,params:v,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials,transferCache:a.transferCache})}const d=be(c).pipe(Os(g=>this.handler.handle(g)));if(e instanceof Xi||"events"===a.observe)return d;const f=d.pipe((0,$r.p)(g=>g instanceof gn));switch(a.observe||"body"){case"body":switch(c.responseType){case"arraybuffer":return f.pipe((0,$e.T)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe((0,$e.T)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe((0,$e.T)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return f.pipe((0,$e.T)(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new yi).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,a={}){return this.request("PATCH",e,Tp(a,i))}post(e,i,a={}){return this.request("POST",e,Tp(a,i))}put(e,i,a={}){return this.request("PUT",e,Tp(a,i))}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(sa))}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac})}}return o})();const Ly=/^\)\]\}',?\n/;function od(o){if(o.url)return o.url;const n="X-Request-URL".toLocaleLowerCase();return o.headers.get(n)}let zr=(()=>{class o{constructor(){this.fetchImpl=(0,_.WQX)(By,{optional:!0})?.fetch??((...e)=>globalThis.fetch(...e)),this.ngZone=(0,_.WQX)(_.SKi)}handle(e){return new Xe.c(i=>{const a=new AbortController;return this.doRequest(e,a.signal,i).then(ad,c=>i.error(new fe({error:c}))),()=>a.abort()})}doRequest(e,i,a){var c=this;return te(function*(){const d=c.createRequestInit(e);let f;try{const S=c.ngZone.runOutsideAngular(()=>c.fetchImpl(e.urlWithParams,{signal:i,...d}));(function Uy(o){o.then(ad,ad)})(S),a.next({type:gr.Sent}),f=yield S}catch(S){return void a.error(new fe({error:S,status:S.status??0,statusText:S.statusText,url:e.urlWithParams,headers:S.headers}))}const g=new Se(f.headers),v=f.statusText,y=od(f)??e.urlWithParams;let w=f.status,D=null;if(e.reportProgress&&a.next(new Fs({headers:g,status:w,statusText:v,url:y})),f.body){const S=f.headers.get("content-length"),T=[],x=f.body.getReader();let k,O,M=0;const j=typeof Zone<"u"&&Zone.current;yield c.ngZone.runOutsideAngular(te(function*(){for(;;){const{done:z,value:W}=yield x.read();if(z)break;if(T.push(W),M+=W.length,e.reportProgress){O="text"===e.responseType?(O??"")+(k??=new TextDecoder).decode(W,{stream:!0}):void 0;const oe=()=>a.next({type:gr.DownloadProgress,total:S?+S:void 0,loaded:M,partialText:O});j?j.run(oe):oe()}}}));const B=c.concatChunks(T,M);try{const z=f.headers.get("Content-Type")??"";D=c.parseBody(e,B,z)}catch(z){return void a.error(new fe({error:z,headers:new Se(f.headers),status:f.status,statusText:f.statusText,url:od(f)??e.urlWithParams}))}}0===w&&(w=D?200:0),w>=200&&w<300?(a.next(new gn({body:D,headers:g,status:w,statusText:v,url:y})),a.complete()):a.error(new fe({error:D,headers:g,status:w,statusText:v,url:y}))})()}parseBody(e,i,a){switch(e.responseType){case"json":const c=(new TextDecoder).decode(i).replace(Ly,"");return""===c?null:JSON.parse(c);case"text":return(new TextDecoder).decode(i);case"blob":return new Blob([i],{type:a});case"arraybuffer":return i.buffer}}createRequestInit(e){const i={},a=e.withCredentials?"include":void 0;if(e.headers.forEach((c,d)=>i[c]=d.join(",")),e.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!e.headers.has("Content-Type")){const c=e.detectContentTypeHeader();null!==c&&(i["Content-Type"]=c)}return{body:e.serializeBody(),method:e.method,headers:i,credentials:a}}concatChunks(e,i){const a=new Uint8Array(i);let c=0;for(const d of e)a.set(d,c),c+=d.length;return a}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac})}}return o})();class By{}function ad(){}function Rp(o,n){return n(o)}const Ls=new _.nKC(""),ld=new _.nKC(""),Qe=new _.nKC("",{providedIn:"root",factory:()=>!0});let Vl=(()=>{class o extends sa{constructor(e,i){super(),this.backend=e,this.injector=i,this.chain=null,this.pendingTasks=(0,_.WQX)(_.TgB),this.contributeToStability=(0,_.WQX)(Qe)}handle(e){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Ls),...this.injector.get(ld,[])]));this.chain=i.reduceRight((a,c)=>function F(o,n,e){return(i,a)=>(0,_.N4e)(e,()=>n(i,c=>o(c,a)))}(a,c,this.injector),Rp)}if(this.contributeToStability){const i=this.pendingTasks.add();return this.chain(e,a=>this.backend.handle(a)).pipe(Bl(()=>this.pendingTasks.remove(i)))}return this.chain(e,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(oa),_.KVO(_.uvJ))}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac})}}return o})();const Gr=/^\)\]\}',?\n/;let cd=(()=>{class o{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new _.wOt(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?Jt(i.\u0275loadImpl()):be(null)).pipe(Zn(()=>new Xe.c(c=>{const d=i.build();if(d.open(e.method,e.urlWithParams),e.withCredentials&&(d.withCredentials=!0),e.headers.forEach((T,x)=>d.setRequestHeader(T,x.join(","))),e.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const T=e.detectContentTypeHeader();null!==T&&d.setRequestHeader("Content-Type",T)}if(e.responseType){const T=e.responseType.toLowerCase();d.responseType="json"!==T?T:"text"}const f=e.serializeBody();let g=null;const v=()=>{if(null!==g)return g;const T=d.statusText||"OK",x=new Se(d.getAllResponseHeaders()),M=function Gy(o){return"responseURL"in o&&o.responseURL?o.responseURL:/^X-Request-URL:/m.test(o.getAllResponseHeaders())?o.getResponseHeader("X-Request-URL"):null}(d)||e.url;return g=new Fs({headers:x,status:d.status,statusText:T,url:M}),g},y=()=>{let{headers:T,status:x,statusText:M,url:k}=v(),O=null;204!==x&&(O=typeof d.response>"u"?d.responseText:d.response),0===x&&(x=O?200:0);let j=x>=200&&x<300;if("json"===e.responseType&&"string"==typeof O){const B=O;O=O.replace(Gr,"");try{O=""!==O?JSON.parse(O):null}catch(z){O=B,j&&(j=!1,O={error:z,text:O})}}j?(c.next(new gn({body:O,headers:T,status:x,statusText:M,url:k||void 0})),c.complete()):c.error(new fe({error:O,headers:T,status:x,statusText:M,url:k||void 0}))},w=T=>{const{url:x}=v(),M=new fe({error:T,status:d.status||0,statusText:d.statusText||"Unknown Error",url:x||void 0});c.error(M)};let D=!1;const A=T=>{D||(c.next(v()),D=!0);let x={type:gr.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(x.total=T.total),"text"===e.responseType&&d.responseText&&(x.partialText=d.responseText),c.next(x)},S=T=>{let x={type:gr.UploadProgress,loaded:T.loaded};T.lengthComputable&&(x.total=T.total),c.next(x)};return d.addEventListener("load",y),d.addEventListener("error",w),d.addEventListener("timeout",w),d.addEventListener("abort",w),e.reportProgress&&(d.addEventListener("progress",A),null!==f&&d.upload&&d.upload.addEventListener("progress",S)),d.send(f),c.next({type:gr.Sent}),()=>{d.removeEventListener("error",w),d.removeEventListener("abort",w),d.removeEventListener("load",y),d.removeEventListener("timeout",w),e.reportProgress&&(d.removeEventListener("progress",A),null!==f&&d.upload&&d.upload.removeEventListener("progress",S)),d.readyState!==d.DONE&&d.abort()}})))}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(Cl))}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac})}}return o})();const ud=new _.nKC(""),Hl=new _.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),$l=new _.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class da{}let qy=(()=>{class o{constructor(e,i,a){this.doc=e,this.platform=i,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ho(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(me),_.KVO(_.Agw),_.KVO(Hl))}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac})}}return o})();function kp(o,n){const e=o.url.toLowerCase();if(!(0,_.WQX)(ud)||"GET"===o.method||"HEAD"===o.method||e.startsWith("http://")||e.startsWith("https://"))return n(o);const i=(0,_.WQX)(da).getToken(),a=(0,_.WQX)($l);return null!=i&&!o.headers.has(a)&&(o=o.clone({headers:o.headers.set(a,i)})),n(o)}const jp=new _.nKC(""),Bs="b",mr="h",Bp="s",ha="st",fa="u",pa="rt",Us=new _.nKC(""),Up=["GET","HEAD"];function Vp(o,n){const{isCacheActive:e,...i}=(0,_.WQX)(Us),{transferCache:a,method:c}=o;if(!e||!1===a||"POST"===c&&!i.includePostRequests&&!a||"POST"!==c&&!Up.includes(c)||!i.includeRequestsWithAuthHeaders&&function Yy(o){return o.headers.has("authorization")||o.headers.has("proxy-authorization")}(o)||!1===i.filter?.(o))return n(o);const d=(0,_.WQX)(_.pJN),f=(0,_.WQX)(jp,{optional:!0}),g=ku((0,_.WQX)(_.Agw));if(f&&!g)throw new _.wOt(2803,!1);const v=g&&f?function Zy(o,n){const e=new URL(o,"resolve://").origin,i=n[e];return i?o.replace(e,i):o}(o.url,f):o.url,y=function Qy(o,n){const{params:e,method:i,responseType:a}=o,c=Hs(e);let d=o.serializeBody();d instanceof URLSearchParams?d=Hs(d):"string"!=typeof d&&(d="");const g=function hd(o){let n=0;for(const e of o)n=Math.imul(31,n)+e.charCodeAt(0)|0;return n+=2147483648,n.toString()}([i,a,n,d,c].join("|"));return(0,_.zw6)(g)}(o,v),w=d.get(y,null);let D=i.includeHeaders;if("object"==typeof a&&a.includeHeaders&&(D=a.includeHeaders),w){const{[Bs]:A,[pa]:S,[mr]:T,[Bp]:x,[ha]:M,[fa]:k}=w;let O=A;switch(S){case"arraybuffer":O=(new TextEncoder).encode(A).buffer;break;case"blob":O=new Blob([A])}let j=new Se(T);return be(new gn({body:O,headers:j,status:x,statusText:M,url:k}))}return n(o).pipe(ft(A=>{A instanceof gn&&g&&d.set(y,{[Bs]:A.body,[mr]:Vs(A.headers,D),[Bp]:A.status,[ha]:A.statusText,[fa]:v,[pa]:o.responseType})}))}function Vs(o,n){if(!n)return{};const e={};for(const i of n){const a=o.getAll(i);null!==a&&(e[i]=a)}return e}function Hs(o){return[...o.keys()].sort().map(n=>`${n}=${o.getAll(n)}`).join("&")}function Hp(o){return[{provide:Us,useFactory:()=>((0,_.ngT)("NgHttpTransferCache"),{isCacheActive:!0,...o})},{provide:ld,useValue:Vp,multi:!0,deps:[_.pJN,Us]},{provide:_.iLQ,multi:!0,useFactory:()=>{const n=(0,_.WQX)(_.o8S),e=(0,_.WQX)(Us);return()=>{(0,_.zuW)(n).then(()=>{e.isCacheActive=!1})}}}]}class LD extends Y{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class $p extends LD{static makeCurrent(){!function Z(o){K??=o}(new $p)}onAndCancel(n,e,i){return n.addEventListener(e,i),()=>{n.removeEventListener(e,i)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function Yi(){return Ki=Ki||document.querySelector("base"),Ki?Ki.getAttribute("href"):null}();return null==e?null:function fd(o){return new URL(o,document.baseURI).pathname}(e)}resetBaseElement(){Ki=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Ho(document.cookie,n)}}let Ki=null,Jy=(()=>{class o{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac})}}return o})();const Qi=new _.nKC("");let zp=(()=>{class o{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(a=>{a.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,a){return this._findPluginFor(i).addEventListener(e,i,a)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(c=>c.supports(e)),!i)throw new _.wOt(5101,!1);return this._eventNameToPlugin.set(e,i),i}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(Qi),_.KVO(_.SKi))}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac})}}return o})();class Gl{constructor(n){this._doc=n}}const $s="ng-app-id";let eb=(()=>{class o{constructor(e,i,a,c={}){this.doc=e,this.appId=i,this.nonce=a,this.platformId=c,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ku(c),this.resetHostNodes()}addStyles(e){for(const i of e)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(e){for(const i of e)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(i=>i.remove()),e.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const i of this.getAllStyles())this.addStyleToHost(e,i)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const i of this.hostNodes)this.addStyleToHost(i,e)}onStyleRemoved(e){const i=this.styleRef;i.get(e)?.elements?.forEach(a=>a.remove()),i.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${$s}="${this.appId}"]`);if(e?.length){const i=new Map;return e.forEach(a=>{null!=a.textContent&&i.set(a.textContent,a)}),i}return null}changeUsageCount(e,i){const a=this.styleRef;if(a.has(e)){const c=a.get(e);return c.usage+=i,c.usage}return a.set(e,{usage:i,elements:[]}),i}getStyleElement(e,i){const a=this.styleNodesInDOM,c=a?.get(i);if(c?.parentNode===e)return a.delete(i),c.removeAttribute($s),c;{const d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=i,this.platformIsServer&&d.setAttribute($s,this.appId),e.appendChild(d),d}}addStyleToHost(e,i){const a=this.getStyleElement(e,i),c=this.styleRef,d=c.get(i)?.elements;d?d.push(a):c.set(i,{elements:[a],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(me),_.KVO(_.sZ2),_.KVO(_.BIS,8),_.KVO(_.Agw))}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac})}}return o})();const Wl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ql=/%COMP%/g,pd=new _.nKC("",{providedIn:"root",factory:()=>!0});function Yl(o,n){return n.map(e=>e.replace(ql,o))}let qp=(()=>{class o{constructor(e,i,a,c,d,f,g,v=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=a,this.removeStylesOnCompDestroy=c,this.doc=d,this.platformId=f,this.ngZone=g,this.nonce=v,this.rendererByCompId=new Map,this.platformIsServer=ku(f),this.defaultRenderer=new Ql(e,d,g,this.platformIsServer)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===_.gXe.ShadowDom&&(i={...i,encapsulation:_.gXe.Emulated});const a=this.getOrCreateRenderer(e,i);return a instanceof wi?a.applyToHost(e):a instanceof zs&&a.applyStyles(),a}getOrCreateRenderer(e,i){const a=this.rendererByCompId;let c=a.get(i.id);if(!c){const d=this.doc,f=this.ngZone,g=this.eventManager,v=this.sharedStylesHost,y=this.removeStylesOnCompDestroy,w=this.platformIsServer;switch(i.encapsulation){case _.gXe.Emulated:c=new wi(g,v,i,this.appId,y,d,f,w);break;case _.gXe.ShadowDom:return new rb(g,v,e,i,d,f,this.nonce,w);default:c=new zs(g,v,i,y,d,f,w)}a.set(i.id,c)}return c}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(zp),_.KVO(eb),_.KVO(_.sZ2),_.KVO(pd),_.KVO(me),_.KVO(_.Agw),_.KVO(_.SKi),_.KVO(_.BIS))}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac})}}return o})();class Ql{constructor(n,e,i,a){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=a,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(n,e){return e?this.doc.createElementNS(Wl[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(gd(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(gd(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){e.remove()}selectRootElement(n,e){let i="string"==typeof n?this.doc.querySelector(n):n;if(!i)throw new _.wOt(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,a){if(a){e=a+":"+e;const c=Wl[a];c?n.setAttributeNS(c,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){const a=Wl[i];a?n.removeAttributeNS(a,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,a){a&(_.czy.DashCase|_.czy.Important)?n.style.setProperty(e,i,a&_.czy.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&_.czy.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){null!=n&&(n[e]=i)}setValue(n,e){n.nodeValue=e}listen(n,e,i){if("string"==typeof n&&!(n=le().getGlobalEventTarget(this.doc,n)))throw new Error(`Unsupported event target ${n} for event ${e}`);return this.eventManager.addEventListener(n,e,this.decoratePreventDefault(i))}decoratePreventDefault(n){return e=>{if("__ngUnwrap__"===e)return n;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))&&e.preventDefault()}}}function gd(o){return"TEMPLATE"===o.tagName&&void 0!==o.content}class rb extends Ql{constructor(n,e,i,a,c,d,f,g){super(n,c,d,g),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const v=Yl(a.id,a.styles);for(const y of v){const w=document.createElement("style");f&&w.setAttribute("nonce",f),w.textContent=y,this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class zs extends Ql{constructor(n,e,i,a,c,d,f,g){super(n,c,d,f),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=a,this.styles=g?Yl(g,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class wi extends zs{constructor(n,e,i,a,c,d,f,g){const v=a+"-"+i.id;super(n,e,i,c,d,f,g,v),this.contentAttr=function Wp(o){return"_ngcontent-%COMP%".replace(ql,o)}(v),this.hostAttr=function Kl(o){return"_nghost-%COMP%".replace(ql,o)}(v)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){const i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}}let ib=(()=>{class o extends Gl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,a){return e.addEventListener(i,a,!1),()=>this.removeEventListener(e,i,a)}removeEventListener(e,i,a){return e.removeEventListener(i,a)}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(me))}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac})}}return o})();const md=["alt","control","meta","shift"],Kp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gs={alt:o=>o.altKey,control:o=>o.ctrlKey,meta:o=>o.metaKey,shift:o=>o.shiftKey};let Ws=(()=>{class o extends Gl{constructor(e){super(e)}supports(e){return null!=o.parseEventName(e)}addEventListener(e,i,a){const c=o.parseEventName(i),d=o.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>le().onAndCancel(e,c.domEventName,d))}static parseEventName(e){const i=e.toLowerCase().split("."),a=i.shift();if(0===i.length||"keydown"!==a&&"keyup"!==a)return null;const c=o._normalizeKey(i.pop());let d="",f=i.indexOf("code");if(f>-1&&(i.splice(f,1),d="code."),md.forEach(v=>{const y=i.indexOf(v);y>-1&&(i.splice(y,1),d+=v+".")}),d+=c,0!=i.length||0===c.length)return null;const g={};return g.domEventName=a,g.fullKey=d,g}static matchEventFullKeyCode(e,i){let a=Kp[e.key]||e.key,c="";return i.indexOf("code.")>-1&&(a=e.code,c="code."),!(null==a||!a)&&(a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),md.forEach(d=>{d!==a&&(0,Gs[d])(e)&&(c+=d+".")}),c+=a,c===i)}static eventCallback(e,i,a){return c=>{o.matchEventFullKeyCode(c,e)&&a.runGuarded(()=>i(c))}}static _normalizeKey(e){return"esc"===e?"escape":e}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(me))}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac})}}return o})();function vd(o){return{appProviders:[...Jp,...o?.providers??[]],platformProviders:ob}}const ob=[{provide:_.Agw,useValue:"browser"},{provide:_.PLl,useValue:function sb(){$p.makeCurrent()},multi:!0},{provide:me,useFactory:function Zl(){return(0,_.TL$)(document),document},deps:[]}],Jp=[{provide:_.H8p,useValue:"root"},{provide:_.zcH,useFactory:function Qp(){return new _.zcH},deps:[]},{provide:Qi,useClass:ib,multi:!0,deps:[me,_.SKi,_.Agw]},{provide:Qi,useClass:Ws,multi:!0,deps:[me]},qp,eb,zp,{provide:_._9s,useExisting:qp},{provide:Cl,useClass:Jy,deps:[]},[]];let eg=(()=>{class o{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(me))}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var Zi=function(o){return o[o.NoHttpTransferCache=0]="NoHttpTransferCache",o[o.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",o[o.I18nSupport=2]="I18nSupport",o[o.EventReplay=3]="EventReplay",o}(Zi||{}),kn=L(412),ma=L(350);const{isArray:pb}=Array,{getPrototypeOf:mt,prototype:gb,keys:bd}=Object;const{isArray:wd}=Array;function lg(...o){const n=Nl(o),e=function Zo(o){return(0,He.T)(Ku(o))?o.pop():void 0}(o),{args:i,keys:a}=function mb(o){if(1===o.length){const n=o[0];if(pb(n))return{args:n,keys:null};if(function vb(o){return o&&"object"==typeof o&&mt(o)===gb}(n)){const e=bd(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:o,keys:null}}(o);if(0===i.length)return Jt([],n);const c=new Xe.c(function yb(o,n,e=ia.D){return i=>{Ed(n,()=>{const{length:a}=o,c=new Array(a);let d=a,f=a;for(let g=0;g<a;g++)Ed(n,()=>{const v=Jt(o[g],n);let y=!1;v.subscribe((0,Qn._)(i,w=>{c[g]=w,y||(y=!0,f--),f||i.next(e(c.slice()))},()=>{--d||i.complete()}))},i)},i)}}(i,n,a?d=>function _d(o,n){return o.reduce((e,i,a)=>(e[i]=n[a],e),{})}(a,d):ia.D));return e?c.pipe(function ag(o){return(0,$e.T)(n=>function og(o,n){return wd(n)?o(...n):o(n)}(o,n))}(e)):c}function Ed(o,n,e){o?mi(e,o,n):n()}function Cd(...o){return function Xr(){return function Dd(o=1/0){return fn(ia.D,o)}(1)}()(Jt(o,Nl(o)))}function Ad(o){return new Xe.c(n=>{pr(o()).subscribe(n)})}var GD=L(203);function Sd(o,n){const e=(0,He.T)(o)?o:()=>o,i=a=>a.error(e());return new Xe.c(n?a=>n.schedule(i,0,a):i)}var Ji=L(983),cg=L(359);function ug(){return(0,Yn.N)((o,n)=>{let e=null;o._refCount++;const i=(0,Qn._)(n,void 0,void 0,void 0,()=>{if(!o||o._refCount<=0||0<--o._refCount)return void(e=null);const a=o._connection,c=e;e=null,a&&(!c||a===c)&&a.unsubscribe(),n.unsubscribe()});o.subscribe(i),i.closed||(e=o.connect())})}class dg extends Xe.c{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Yn.S)(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new cg.yU;const e=this.getSubject();n.add(this.source.subscribe((0,Qn._)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=cg.yU.EMPTY)}return n}refCount(){return ug()(this)}}var er=L(413),Kr=L(697),es=L(594);function _i(o){return(0,Yn.N)((n,e)=>{let c,i=null,a=!1;i=n.subscribe((0,Qn._)(e,void 0,void 0,d=>{c=pr(o(d,_i(o)(n))),i?(i.unsubscribe(),i=null,c.subscribe(e)):a=!0})),a&&(i.unsubscribe(),i=null,c.subscribe(e))})}var ya=L(901);function nc(o){return o<=0?()=>Ji.w:(0,Yn.N)((n,e)=>{let i=[];n.subscribe((0,Qn._)(e,a=>{i.push(a),o<i.length&&i.shift()},()=>{for(const a of i)e.next(a);e.complete()},void 0,()=>{i=null}))})}var ba=L(774),Id=L(343);const xe="primary",_a=Symbol("RouteTitle");class pg{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ei(o){return new pg(o)}function _b(o,n,e){const i=e.path.split("/");if(i.length>o.length||"full"===e.pathMatch&&(n.hasChildren()||i.length<o.length))return null;const a={};for(let c=0;c<i.length;c++){const d=i[c],f=o[c];if(":"===d[0])a[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:o.slice(0,i.length),posParams:a}}function tr(o,n){const e=o?rc(o):void 0,i=n?rc(n):void 0;if(!e||!i||e.length!=i.length)return!1;let a;for(let c=0;c<e.length;c++)if(a=e[c],!Ea(o[a],n[a]))return!1;return!0}function rc(o){return[...Object.keys(o),...Object.getOwnPropertySymbols(o)]}function Ea(o,n){if(Array.isArray(o)&&Array.isArray(n)){if(o.length!==n.length)return!1;const e=[...o].sort(),i=[...n].sort();return e.every((a,c)=>i[c]===a)}return o===n}function Eb(o){return o.length>0?o[o.length-1]:null}function ts(o){return function zD(o){return!!o&&(o instanceof Xe.c||(0,He.T)(o.lift)&&(0,He.T)(o.subscribe))}(o)?o:(0,_.jNT)(o)?Jt(Promise.resolve(o)):be(o)}const cn={exact:function mg(o,n,e){if(!rs(o.segments,n.segments)||!ic(o.segments,n.segments,e)||o.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!o.children[i]||!mg(o.children[i],n.children[i],e))return!1;return!0},subset:yg},ns={exact:function gg(o,n){return tr(o,n)},subset:function vg(o,n){return Object.keys(n).length<=Object.keys(o).length&&Object.keys(n).every(e=>Ea(o[e],n[e]))},ignored:()=>!0};function Td(o,n,e){return cn[e.paths](o.root,n.root,e.matrixParams)&&ns[e.queryParams](o.queryParams,n.queryParams)&&!("exact"===e.fragment&&o.fragment!==n.fragment)}function yg(o,n,e){return Md(o,n,n.segments,e)}function Md(o,n,e,i){if(o.segments.length>e.length){const a=o.segments.slice(0,e.length);return!(!rs(a,e)||n.hasChildren()||!ic(a,e,i))}if(o.segments.length===e.length){if(!rs(o.segments,e)||!ic(o.segments,e,i))return!1;for(const a in n.children)if(!o.children[a]||!yg(o.children[a],n.children[a],i))return!1;return!0}{const a=e.slice(0,o.segments.length),c=e.slice(o.segments.length);return!!(rs(o.segments,a)&&ic(o.segments,a,i)&&o.children[xe])&&Md(o.children[xe],n,c,i)}}function ic(o,n,e){return n.every((i,a)=>ns[e](o[a].parameters,i.parameters))}class Di{constructor(n=new nt([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ei(this.queryParams),this._queryParamMap}toString(){return sc.serialize(this)}}class nt{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Aa(this)}}class Da{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=Ei(this.parameters),this._parameterMap}toString(){return Nd(this)}}function rs(o,n){return o.length===n.length&&o.every((e,i)=>e.path===n[i].path)}let is=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:()=>new Ca,providedIn:"root"})}}return o})();class Ca{parse(n){const e=new ac(n);return new Di(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${Xs(n.root,!0)}`,i=function _g(o){const n=Object.entries(o).map(([e,i])=>Array.isArray(i)?i.map(a=>`${Sa(e)}=${Sa(a)}`).join("&"):`${Sa(e)}=${Sa(i)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${i}${"string"==typeof n.fragment?`#${function Cb(o){return encodeURI(o)}(n.fragment)}`:""}`}}const sc=new Ca;function Aa(o){return o.segments.map(n=>Nd(n)).join("/")}function Xs(o,n){if(!o.hasChildren())return Aa(o);if(n){const e=o.children[xe]?Xs(o.children[xe],!1):"",i=[];return Object.entries(o.children).forEach(([a,c])=>{a!==xe&&i.push(`${a}:${Xs(c,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function bg(o,n){let e=[];return Object.entries(o.children).forEach(([i,a])=>{i===xe&&(e=e.concat(n(a,i)))}),Object.entries(o.children).forEach(([i,a])=>{i!==xe&&(e=e.concat(n(a,i)))}),e}(o,(i,a)=>a===xe?[Xs(o.children[xe],!1)]:[`${a}:${Xs(i,!1)}`]);return 1===Object.keys(o.children).length&&null!=o.children[xe]?`${Aa(o)}/${e[0]}`:`${Aa(o)}/(${e.join("//")})`}}function Rd(o){return encodeURIComponent(o).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Sa(o){return Rd(o).replace(/%3B/gi,";")}function xd(o){return Rd(o).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function oc(o){return decodeURIComponent(o)}function wg(o){return oc(o.replace(/\+/g,"%20"))}function Nd(o){return`${xd(o.path)}${function WD(o){return Object.entries(o).map(([n,e])=>`;${xd(n)}=${xd(e)}`).join("")}(o.parameters)}`}const Ab=/^[^\/()?;#]+/;function Pd(o){const n=o.match(Ab);return n?n[0]:""}const qD=/^[^\/()?;=#]+/,Eg=/^[^=?&#]+/,Ib=/^[^&#]+/;class ac{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nt([],{}):new nt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[xe]=new nt(n,e)),i}parseSegment(){const n=Pd(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new _.wOt(4009,!1);return this.capture(n),new Da(oc(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=function Sb(o){const n=o.match(qD);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const a=Pd(this.remaining);a&&(i=a,this.capture(i))}n[oc(e)]=oc(i)}parseQueryParam(n){const e=function Od(o){const n=o.match(Eg);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const d=function Ci(o){const n=o.match(Ib);return n?n[0]:""}(this.remaining);d&&(i=d,this.capture(i))}const a=wg(e),c=wg(i);if(n.hasOwnProperty(a)){let d=n[a];Array.isArray(d)||(d=[d],n[a]=d),d.push(c)}else n[a]=c}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Pd(this.remaining),a=this.remaining[i.length];if("/"!==a&&")"!==a&&";"!==a)throw new _.wOt(4010,!1);let c;i.indexOf(":")>-1?(c=i.slice(0,i.indexOf(":")),this.capture(c),this.capture(":")):n&&(c=xe);const d=this.parseChildren();e[c]=1===Object.keys(d).length?d[xe]:new nt([],d),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new _.wOt(4011,!1)}}function Dg(o){return o.segments.length>0?new nt([],{[xe]:o}):o}function kd(o){const n={};for(const[i,a]of Object.entries(o.children)){const c=kd(a);if(i===xe&&0===c.segments.length&&c.hasChildren())for(const[d,f]of Object.entries(c.children))n[d]=f;else(c.segments.length>0||c.hasChildren())&&(n[i]=c)}return function lc(o){if(1===o.numberOfChildren&&o.children[xe]){const n=o.children[xe];return new nt(o.segments.concat(n.segments),n.children)}return o}(new nt(o.segments,n))}function Ks(o){return o instanceof Di}function Cg(o){let n;const a=Dg(function e(c){const d={};for(const g of c.children){const v=e(g);d[g.outlet]=v}const f=new nt(c.url,d);return c===o&&(n=f),f}(o.root));return n??a}function Ag(o,n,e,i){let a=o;for(;a.parent;)a=a.parent;if(0===n.length)return Fd(a,a,a,e,i);const c=function Ld(o){if("string"==typeof o[0]&&1===o.length&&"/"===o[0])return new Sg(!0,0,o);let n=0,e=!1;const i=o.reduce((a,c,d)=>{if("object"==typeof c&&null!=c){if(c.outlets){const f={};return Object.entries(c.outlets).forEach(([g,v])=>{f[g]="string"==typeof v?v.split("/"):v}),[...a,{outlets:f}]}if(c.segmentPath)return[...a,c.segmentPath]}return"string"!=typeof c?[...a,c]:0===d?(c.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?e=!0:".."===f?n++:""!=f&&a.push(f))}),a):[...a,c]},[]);return new Sg(e,n,i)}(n);if(c.toRoot())return Fd(a,a,new nt([],{}),e,i);const d=function Zs(o,n,e){if(o.isAbsolute)return new Qs(n,!0,0);if(!e)return new Qs(n,!1,NaN);if(null===e.parent)return new Qs(e,!0,0);const i=cc(o.commands[0])?0:1;return function uc(o,n,e){let i=o,a=n,c=e;for(;c>a;){if(c-=a,i=i.parent,!i)throw new _.wOt(4005,!1);a=i.segments.length}return new Qs(i,!1,a-c)}(e,e.segments.length-1+i,o.numberOfDoubleDots)}(c,a,o),f=d.processChildren?Ai(d.segmentGroup,d.index,c.commands):Js(d.segmentGroup,d.index,c.commands);return Fd(a,d.segmentGroup,f,e,i)}function cc(o){return"object"==typeof o&&null!=o&&!o.outlets&&!o.segmentPath}function Ia(o){return"object"==typeof o&&null!=o&&o.outlets}function Fd(o,n,e,i,a){let d,c={};i&&Object.entries(i).forEach(([g,v])=>{c[g]=Array.isArray(v)?v.map(y=>`${y}`):`${v}`}),d=o===n?e:Ys(o,n,e);const f=Dg(kd(d));return new Di(f,c,a)}function Ys(o,n,e){const i={};return Object.entries(o.children).forEach(([a,c])=>{i[a]=c===n?e:Ys(c,n,e)}),new nt(o.segments,i)}class Sg{constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&cc(i[0]))throw new _.wOt(4003,!1);const a=i.find(Ia);if(a&&a!==Eb(i))throw new _.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qs{constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}}function Js(o,n,e){if(o??=new nt([],{}),0===o.segments.length&&o.hasChildren())return Ai(o,n,e);const i=function eo(o,n,e){let i=0,a=n;const c={match:!1,pathIndex:0,commandIndex:0};for(;a<o.segments.length;){if(i>=e.length)return c;const d=o.segments[a],f=e[i];if(Ia(f))break;const g=`${f}`,v=i<e.length-1?e[i+1]:null;if(a>0&&void 0===g)break;if(g&&v&&"object"==typeof v&&void 0===v.outlets){if(!hc(g,v,d))return c;i+=2}else{if(!hc(g,{},d))return c;i++}a++}return{match:!0,pathIndex:a,commandIndex:i}}(o,n,e),a=e.slice(i.commandIndex);if(i.match&&i.pathIndex<o.segments.length){const c=new nt(o.segments.slice(0,i.pathIndex),{});return c.children[xe]=new nt(o.segments.slice(i.pathIndex),o.children),Ai(c,0,a)}return i.match&&0===a.length?new nt(o.segments,{}):i.match&&!o.hasChildren()?Ta(o,n,e):i.match?Ai(o,0,a):Ta(o,n,e)}function Ai(o,n,e){if(0===e.length)return new nt(o.segments,{});{const i=function jd(o){return Ia(o[0])?o[0].outlets:{[xe]:o}}(e),a={};if(Object.keys(i).some(c=>c!==xe)&&o.children[xe]&&1===o.numberOfChildren&&0===o.children[xe].segments.length){const c=Ai(o.children[xe],n,e);return new nt(o.segments,c.children)}return Object.entries(i).forEach(([c,d])=>{"string"==typeof d&&(d=[d]),null!==d&&(a[c]=Js(o.children[c],n,d))}),Object.entries(o.children).forEach(([c,d])=>{void 0===i[c]&&(a[c]=d)}),new nt(o.segments,a)}}function Ta(o,n,e){const i=o.segments.slice(0,n);let a=0;for(;a<e.length;){const c=e[a];if(Ia(c)){const g=dc(c.outlets);return new nt(i,g)}if(0===a&&cc(e[0])){i.push(new Da(o.segments[n].path,to(e[0]))),a++;continue}const d=Ia(c)?c.outlets[xe]:`${c}`,f=a<e.length-1?e[a+1]:null;d&&f&&cc(f)?(i.push(new Da(d,to(f))),a+=2):(i.push(new Da(d,{})),a++)}return new nt(i,{})}function dc(o){const n={};return Object.entries(o).forEach(([e,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(n[e]=Ta(new nt([],{}),0,i))}),n}function to(o){const n={};return Object.entries(o).forEach(([e,i])=>n[e]=`${i}`),n}function hc(o,n,e){return o==e.path&&tr(n,e.parameters)}const fc="imperative";var Le=function(o){return o[o.NavigationStart=0]="NavigationStart",o[o.NavigationEnd=1]="NavigationEnd",o[o.NavigationCancel=2]="NavigationCancel",o[o.NavigationError=3]="NavigationError",o[o.RoutesRecognized=4]="RoutesRecognized",o[o.ResolveStart=5]="ResolveStart",o[o.ResolveEnd=6]="ResolveEnd",o[o.GuardsCheckStart=7]="GuardsCheckStart",o[o.GuardsCheckEnd=8]="GuardsCheckEnd",o[o.RouteConfigLoadStart=9]="RouteConfigLoadStart",o[o.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",o[o.ChildActivationStart=11]="ChildActivationStart",o[o.ChildActivationEnd=12]="ChildActivationEnd",o[o.ActivationStart=13]="ActivationStart",o[o.ActivationEnd=14]="ActivationEnd",o[o.Scroll=15]="Scroll",o[o.NavigationSkipped=16]="NavigationSkipped",o}(Le||{});class Dn{constructor(n,e){this.id=n,this.url=e}}class Bd extends Dn{constructor(n,e,i="imperative",a=null){super(n,e),this.type=Le.NavigationStart,this.navigationTrigger=i,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Yr extends Dn{constructor(n,e,i){super(n,e),this.urlAfterRedirects=i,this.type=Le.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Fn=function(o){return o[o.Redirect=0]="Redirect",o[o.SupersededByNewNavigation=1]="SupersededByNewNavigation",o[o.NoDataFromResolver=2]="NoDataFromResolver",o[o.GuardRejected=3]="GuardRejected",o}(Fn||{}),Ud=function(o){return o[o.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",o[o.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",o}(Ud||{});class Qr extends Dn{constructor(n,e,i,a){super(n,e),this.reason=i,this.code=a,this.type=Le.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class no extends Dn{constructor(n,e,i,a){super(n,e),this.reason=i,this.code=a,this.type=Le.NavigationSkipped}}class Vd extends Dn{constructor(n,e,i,a){super(n,e),this.error=i,this.target=a,this.type=Le.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ig extends Dn{constructor(n,e,i,a){super(n,e),this.urlAfterRedirects=i,this.state=a,this.type=Le.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ma extends Dn{constructor(n,e,i,a){super(n,e),this.urlAfterRedirects=i,this.state=a,this.type=Le.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tg extends Dn{constructor(n,e,i,a,c){super(n,e),this.urlAfterRedirects=i,this.state=a,this.shouldActivate=c,this.type=Le.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Hd extends Dn{constructor(n,e,i,a){super(n,e),this.urlAfterRedirects=i,this.state=a,this.type=Le.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Tb extends Dn{constructor(n,e,i,a){super(n,e),this.urlAfterRedirects=i,this.state=a,this.type=Le.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KD{constructor(n){this.route=n,this.type=Le.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class YD{constructor(n){this.route=n,this.type=Le.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ra{constructor(n){this.snapshot=n,this.type=Le.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mb{constructor(n){this.snapshot=n,this.type=Le.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pc{constructor(n){this.snapshot=n,this.type=Le.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $d{constructor(n){this.snapshot=n,this.type=Le.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zd{}class xa{constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}}function Cn(o){return o.outlet||xe}function Nr(o){if(!o)return null;if(o.routeConfig?._injector)return o.routeConfig._injector;for(let n=o.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class Ob{get injector(){return Nr(this.route?.snapshot)??this.rootInjector}set injector(n){}constructor(n){this.rootInjector=n,this.outlet=null,this.route=null,this.children=new Na(this.rootInjector),this.attachRef=null}}let Na=(()=>{class o{constructor(e){this.rootInjector=e,this.contexts=new Map}onChildOutletCreated(e,i){const a=this.getOrCreateContext(e);a.outlet=i,this.contexts.set(e,a)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Ob(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(_.uvJ))}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();class kb{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=io(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){const e=io(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=Pa(n,this._root);return e.length<2?[]:e[e.length-2].children.map(a=>a.value).filter(a=>a!==n)}pathFromRoot(n){return Pa(n,this._root).map(e=>e.value)}}function io(o,n){if(o===n.value)return n;for(const e of n.children){const i=io(o,e);if(i)return i}return null}function Pa(o,n){if(o===n.value)return[n];for(const e of n.children){const i=Pa(o,e);if(i.length)return i.unshift(n),i}return[]}class nr{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function ss(o){const n={};return o&&o.children.forEach(e=>n[e.value.outlet]=e),n}class Xd extends kb{constructor(n,e){super(n),this.snapshot=e,Pr(this,n)}toString(){return this.snapshot.toString()}}function Kd(o){const n=function Fb(o){const c=new mc([],{},{},"",{},xe,o,null,{});return new Pg("",new nr(c,[]))}(o),e=new kn.t([new Da("",{})]),i=new kn.t({}),a=new kn.t({}),c=new kn.t({}),d=new kn.t(""),f=new so(e,i,c,d,a,xe,o,n.root);return f.snapshot=n.root,new Xd(new nr(f,[]),n)}class so{constructor(n,e,i,a,c,d,f,g){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=a,this.dataSubject=c,this.outlet=d,this.component=f,this._futureSnapshot=g,this.title=this.dataSubject?.pipe((0,$e.T)(v=>v[_a]))??be(void 0),this.url=n,this.params=e,this.queryParams=i,this.fragment=a,this.data=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,$e.T)(n=>Ei(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,$e.T)(n=>Ei(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gc(o,n,e="emptyOnly"){let i;const{routeConfig:a}=o;return i=null===n||"always"!==e&&""!==a?.path&&(n.component||n.routeConfig?.loadComponent)?{params:{...o.params},data:{...o.data},resolve:{...o.data,...o._resolvedData??{}}}:{params:{...n.params,...o.params},data:{...n.data,...o.data},resolve:{...o.data,...n.data,...a?.data,...o._resolvedData}},a&&Lb(a)&&(i.resolve[_a]=a.title),i}class mc{get title(){return this.data?.[_a]}constructor(n,e,i,a,c,d,f,g,v){this.url=n,this.params=e,this.queryParams=i,this.fragment=a,this.data=c,this.outlet=d,this.component=f,this.routeConfig=g,this._resolve=v}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ei(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ei(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Pg extends kb{constructor(n,e){super(e),this.url=n,Pr(this,e)}toString(){return oo(this._root)}}function Pr(o,n){n.value._routerState=o,n.children.forEach(e=>Pr(o,e))}function oo(o){const n=o.children.length>0?` { ${o.children.map(oo).join(", ")} } `:"";return`${o.value}${n}`}function Yd(o){if(o.snapshot){const n=o.snapshot,e=o._futureSnapshot;o.snapshot=e,tr(n.queryParams,e.queryParams)||o.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&o.fragmentSubject.next(e.fragment),tr(n.params,e.params)||o.paramsSubject.next(e.params),function En(o,n){if(o.length!==n.length)return!1;for(let e=0;e<o.length;++e)if(!tr(o[e],n[e]))return!1;return!0}(n.url,e.url)||o.urlSubject.next(e.url),tr(n.data,e.data)||o.dataSubject.next(e.data)}else o.snapshot=o._futureSnapshot,o.dataSubject.next(o._futureSnapshot.data)}function Og(o,n){const e=tr(o.params,n.params)&&function Db(o,n){return rs(o,n)&&o.every((e,i)=>tr(e.parameters,n[i].parameters))}(o.url,n.url);return e&&!(!o.parent!=!n.parent)&&(!o.parent||Og(o.parent,n.parent))}function Lb(o){return"string"==typeof o.title||null===o.title}let kg=(()=>{class o{constructor(){this.activated=null,this._activatedRoute=null,this.name=xe,this.activateEvents=new _.bkB,this.deactivateEvents=new _.bkB,this.attachEvents=new _.bkB,this.detachEvents=new _.bkB,this.parentContexts=(0,_.WQX)(Na),this.location=(0,_.WQX)(_.c1b),this.changeDetector=(0,_.WQX)(_.gRc),this.inputBinder=(0,_.WQX)(Qd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:i,previousValue:a}=e.name;if(i)return;this.isTrackedInParentContexts(a)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(a)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.wOt(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new _.wOt(4013,!1);this._activatedRoute=e;const a=this.location,d=e.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,g=new Fg(e,f,a.injector);this.activated=a.createComponent(d,{index:a.length,injector:g,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275dir=_.FsC({type:o,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_.OA$]})}}return o})();class Fg{__ngOutletInjector(n){return new Fg(this.route,this.childContexts,n)}constructor(n,e,i){this.route=n,this.childContexts=e,this.parent=i}get(n,e){return n===so?this.route:n===Na?this.childContexts:this.parent.get(n,e)}}const Qd=new _.nKC("");function Oa(o,n,e){if(e&&o.shouldReuseRoute(n.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=n.value;const a=function Bb(o,n,e){return n.children.map(i=>{for(const a of e.children)if(o.shouldReuseRoute(i.value,a.value.snapshot))return Oa(o,i,a);return Oa(o,i)})}(o,n,e);return new nr(i,a)}{if(o.shouldAttach(n.value)){const c=o.retrieve(n.value);if(null!==c){const d=c.route;return d.value._futureSnapshot=n.value,d.children=n.children.map(f=>Oa(o,f)),d}}const i=function Ub(o){return new so(new kn.t(o.url),new kn.t(o.params),new kn.t(o.queryParams),new kn.t(o.fragment),new kn.t(o.data),o.outlet,o.component,o)}(n.value),a=n.children.map(c=>Oa(o,c));return new nr(i,a)}}class ka{constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}}const Or="ngNavigationCancelingError";function Si(o,n){const{redirectTo:e,navigationBehaviorOptions:i}=Ks(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,a=Jd(!1,Fn.Redirect);return a.url=e,a.navigationBehaviorOptions=i,a}function Jd(o,n){const e=new Error(`NavigationCancelingError: ${o||""}`);return e[Or]=!0,e.cancellationCode=n,e}function eh(o){return!!o&&o[Or]}class ZD{constructor(n,e,i,a,c){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=a,this.inputBindingEnabled=c}activate(n){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),Yd(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){const a=ss(e);n.children.forEach(c=>{const d=c.value.outlet;this.deactivateRoutes(c,a[d],i),delete a[d]}),Object.values(a).forEach(c=>{this.deactivateRouteAndItsChildren(c,i)})}deactivateRoutes(n,e,i){const a=n.value,c=e?e.value:null;if(a===c)if(a.component){const d=i.getContext(a.outlet);d&&this.deactivateChildRoutes(n,e,d.children)}else this.deactivateChildRoutes(n,e,i);else c&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const i=e.getContext(n.value.outlet),a=i&&n.value.component?i.children:e,c=ss(n);for(const d of Object.values(c))this.deactivateRouteAndItsChildren(d,a);if(i&&i.outlet){const d=i.outlet.detach(),f=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:d,route:n,contexts:f})}}deactivateRouteAndOutlet(n,e){const i=e.getContext(n.value.outlet),a=i&&n.value.component?i.children:e,c=ss(n);for(const d of Object.values(c))this.deactivateRouteAndItsChildren(d,a);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,e,i){const a=ss(e);n.children.forEach(c=>{this.activateRoutes(c,a[c.value.outlet],i),this.forwardEvent(new $d(c.value.snapshot))}),n.children.length&&this.forwardEvent(new Mb(n.value.snapshot))}activateRoutes(n,e,i){const a=n.value,c=e?e.value:null;if(Yd(a),a===c)if(a.component){const d=i.getOrCreateContext(a.outlet);this.activateChildRoutes(n,e,d.children)}else this.activateChildRoutes(n,e,i);else if(a.component){const d=i.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const f=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),Yd(f.route.value),this.activateChildRoutes(n,null,d.children)}else d.attachRef=null,d.route=a,d.outlet&&d.outlet.activateWith(a,d.injector),this.activateChildRoutes(n,null,d.children)}else this.activateChildRoutes(n,null,i)}}class vc{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class ao{constructor(n,e){this.component=n,this.route=e}}function JD(o,n,e){const i=o._root;return Fa(i,n?n._root:null,e,[i.value])}function os(o,n){const e=Symbol(),i=n.get(o,e);return i===e?"function"!=typeof o||(0,_.LfX)(o)?n.get(o):o:i}function Fa(o,n,e,i,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=ss(n);return o.children.forEach(d=>{(function Vb(o,n,e,i,a={canDeactivateChecks:[],canActivateChecks:[]}){const c=o.value,d=n?n.value:null,f=e?e.getContext(o.value.outlet):null;if(d&&c.routeConfig===d.routeConfig){const g=function Hb(o,n,e){if("function"==typeof e)return e(o,n);switch(e){case"pathParamsChange":return!rs(o.url,n.url);case"pathParamsOrQueryParamsChange":return!rs(o.url,n.url)||!tr(o.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Og(o,n)||!tr(o.queryParams,n.queryParams);default:return!Og(o,n)}}(d,c,c.routeConfig.runGuardsAndResolvers);g?a.canActivateChecks.push(new vc(i)):(c.data=d.data,c._resolvedData=d._resolvedData),Fa(o,n,c.component?f?f.children:null:e,i,a),g&&f&&f.outlet&&f.outlet.isActivated&&a.canDeactivateChecks.push(new ao(f.outlet.component,d))}else d&&La(n,f,a),a.canActivateChecks.push(new vc(i)),Fa(o,null,c.component?f?f.children:null:e,i,a)})(d,c[d.value.outlet],e,i.concat([d.value]),a),delete c[d.value.outlet]}),Object.entries(c).forEach(([d,f])=>La(f,e.getContext(d),a)),a}function La(o,n,e){const i=ss(o),a=o.value;Object.entries(i).forEach(([c,d])=>{La(d,a.component?n?n.children.getContext(c):null:n,e)}),e.canDeactivateChecks.push(new ao(a.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,a))}function ja(o){return"function"==typeof o}function Vg(o){return o instanceof ma.G||"EmptyError"===o?.name}const lo=Symbol("INITIAL_VALUE");function co(){return Zn(o=>lg(o.map(n=>n.pipe((0,Kr.s)(1),function hg(...o){const n=Nl(o);return(0,Yn.N)((e,i)=>{(n?Cd(o,e,n):Cd(o,e)).subscribe(i)})}(lo)))).pipe((0,$e.T)(n=>{for(const e of n)if(!0!==e){if(e===lo)return lo;if(!1===e||uo(e))return e}return!0}),(0,$r.p)(n=>n!==lo),(0,Kr.s)(1)))}function uo(o){return Ks(o)||o instanceof ka}function Qb(o){return(0,GD.F)(ft(n=>{if("boolean"!=typeof n)throw Si(0,n)}),(0,$e.T)(n=>!0===n))}class as{constructor(n){this.segmentGroup=n||null}}class bc extends Error{constructor(n){super(),this.urlTree=n}}function ho(o){return Sd(new as(o))}class Jb{constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let i=[],a=e.root;for(;;){if(i=i.concat(a.segments),0===a.numberOfChildren)return be(i);if(a.numberOfChildren>1||!a.children[xe])return Sd(new _.wOt(4e3,!1));a=a.children[xe]}}applyRedirectCommands(n,e,i,a,c){if("string"!=typeof e){const f=e,{queryParams:g,fragment:v,routeConfig:y,url:w,outlet:D,params:A,data:S,title:T}=a,x=(0,_.N4e)(c,()=>f({params:A,data:S,queryParams:g,fragment:v,routeConfig:y,url:w,outlet:D,title:T}));if(x instanceof Di)throw new bc(x);e=x}const d=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,i);if("/"===e[0])throw new bc(d);return d}applyRedirectCreateUrlTree(n,e,i,a){const c=this.createSegmentGroup(n,e.root,i,a);return new Di(c,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const i={};return Object.entries(n).forEach(([a,c])=>{if("string"==typeof c&&":"===c[0]){const f=c.substring(1);i[a]=e[f]}else i[a]=c}),i}createSegmentGroup(n,e,i,a){const c=this.createSegments(n,e.segments,i,a);let d={};return Object.entries(e.children).forEach(([f,g])=>{d[f]=this.createSegmentGroup(n,g,i,a)}),new nt(c,d)}createSegments(n,e,i,a){return e.map(c=>":"===c.path[0]?this.findPosParam(n,c,a):this.findOrReturn(c,i))}findPosParam(n,e,i){const a=i[e.path.substring(1)];if(!a)throw new _.wOt(4001,!1);return a}findOrReturn(n,e){let i=0;for(const a of e){if(a.path===n.path)return e.splice(i),a;i++}return n}}const th={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ew(o,n,e,i,a){const c=Wg(o,n,e);return c.matched?(i=function Rg(o,n){return o.providers&&!o._injector&&(o._injector=(0,_.Ol2)(o.providers,n,`Route: ${o.path}`)),o._injector??n}(n,i),function tC(o,n,e,i){const a=n.canMatch;return a&&0!==a.length?be(a.map(d=>{const f=os(d,o);return ts(function yc(o){return o&&ja(o.canMatch)}(f)?f.canMatch(n,e):(0,_.N4e)(o,()=>f(n,e)))})).pipe(co(),Qb()):be(!0)}(i,n,e).pipe((0,$e.T)(d=>!0===d?c:{...th}))):be(c)}function Wg(o,n,e){if("**"===n.path)return function tw(o){return{matched:!0,parameters:o.length>0?Eb(o).parameters:{},consumedSegments:o,remainingSegments:[],positionalParamSegments:{}}}(e);if(""===n.path)return"full"===n.pathMatch&&(o.hasChildren()||e.length>0)?{...th}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const a=(n.matcher||_b)(e,o,n);if(!a)return{...th};const c={};Object.entries(a.posParams??{}).forEach(([f,g])=>{c[f]=g.path});const d=a.consumed.length>0?{...c,...a.consumed[a.consumed.length-1].parameters}:c;return{matched:!0,consumedSegments:a.consumed,remainingSegments:e.slice(a.consumed.length),parameters:d,positionalParamSegments:a.posParams??{}}}function wc(o,n,e,i){return e.length>0&&function nh(o,n,e){return e.some(i=>rh(o,n,i)&&Cn(i)!==xe)}(o,e,i)?{segmentGroup:new nt(n,iC(i,new nt(e,o.children))),slicedSegments:[]}:0===e.length&&function sC(o,n,e){return e.some(i=>rh(o,n,i))}(o,e,i)?{segmentGroup:new nt(o.segments,rC(o,e,i,o.children)),slicedSegments:e}:{segmentGroup:new nt(o.segments,o.children),slicedSegments:e}}function rC(o,n,e,i){const a={};for(const c of e)if(rh(o,n,c)&&!i[Cn(c)]){const d=new nt([],{});a[Cn(c)]=d}return{...i,...a}}function iC(o,n){const e={};e[xe]=n;for(const i of o)if(""===i.path&&Cn(i)!==xe){const a=new nt([],{});e[Cn(i)]=a}return e}function rh(o,n,e){return(!(o.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}class aC{}class _c{constructor(n,e,i,a,c,d,f){this.injector=n,this.configLoader=e,this.rootComponentType=i,this.config=a,this.urlTree=c,this.paramsInheritanceStrategy=d,this.urlSerializer=f,this.applyRedirects=new Jb(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(n){return new _.wOt(4002,`'${n.segmentGroup}'`)}recognize(){const n=wc(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe((0,$e.T)(({children:e,rootSnapshot:i})=>{const a=new nr(i,e),c=new Pg("",a),d=function XD(o,n,e=null,i=null){return Ag(Cg(o),n,e,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,c.url=this.urlSerializer.serialize(d),{state:c,tree:d}}))}match(n){const e=new mc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),xe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,xe,e).pipe((0,$e.T)(i=>({children:i,rootSnapshot:e})),_i(i=>{if(i instanceof bc)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof as?this.noMatchError(i):i}))}processSegmentGroup(n,e,i,a,c){return 0===i.segments.length&&i.hasChildren()?this.processChildren(n,e,i,c):this.processSegment(n,e,i,i.segments,a,!0,c).pipe((0,$e.T)(d=>d instanceof nr?[d]:[]))}processChildren(n,e,i,a){const c=[];for(const d of Object.keys(i.children))"primary"===d?c.unshift(d):c.push(d);return Jt(c).pipe(Os(d=>{const f=i.children[d],g=function qd(o,n){const e=o.filter(i=>Cn(i)===n);return e.push(...o.filter(i=>Cn(i)!==n)),e}(e,d);return this.processSegmentGroup(n,g,f,d,a)}),function bb(o,n){return(0,Yn.N)(function va(o,n,e,i,a){return(c,d)=>{let f=e,g=n,v=0;c.subscribe((0,Qn._)(d,y=>{const w=v++;g=f?o(g,y,w):(f=!0,y),i&&d.next(g)},a&&(()=>{f&&d.next(g),d.complete()})))}}(o,n,arguments.length>=2,!0))}((d,f)=>(d.push(...f),d)),(0,ya.U)(null),function wa(o,n){const e=arguments.length>=2;return i=>i.pipe(o?(0,$r.p)((a,c)=>o(a,c,i)):ia.D,nc(1),e?(0,ya.U)(n):(0,ba.v)(()=>new ma.G))}(),fn(d=>{if(null===d)return ho(i);const f=ih(d);return function Ec(o){o.sort((n,e)=>n.value.outlet===xe?-1:e.value.outlet===xe?1:n.value.outlet.localeCompare(e.value.outlet))}(f),be(f)}))}processSegment(n,e,i,a,c,d,f){return Jt(e).pipe(Os(g=>this.processSegmentAgainstRoute(g._injector??n,e,g,i,a,c,d,f).pipe(_i(v=>{if(v instanceof as)return be(null);throw v}))),(0,es.$)(g=>!!g),_i(g=>{if(Vg(g))return function oC(o,n,e){return 0===n.length&&!o.children[e]}(i,a,c)?be(new aC):ho(i);throw g}))}processSegmentAgainstRoute(n,e,i,a,c,d,f,g){return Cn(i)===d||d!==xe&&rh(a,c,i)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(n,a,i,c,d,g):this.allowRedirects&&f?this.expandSegmentAgainstRouteUsingRedirect(n,a,e,i,c,d,g):ho(a):ho(a)}expandSegmentAgainstRouteUsingRedirect(n,e,i,a,c,d,f){const{matched:g,parameters:v,consumedSegments:y,positionalParamSegments:w,remainingSegments:D}=Wg(e,a,c);if(!g)return ho(e);"string"==typeof a.redirectTo&&"/"===a.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const A=new mc(c,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Xg(a),Cn(a),a.component??a._loadedComponent??null,a,Kg(a)),S=gc(A,f,this.paramsInheritanceStrategy);A.params=Object.freeze(S.params),A.data=Object.freeze(S.data);const T=this.applyRedirects.applyRedirectCommands(y,a.redirectTo,w,A,n);return this.applyRedirects.lineralizeSegments(a,T).pipe(fn(x=>this.processSegment(n,i,e,x.concat(D),d,!1,f)))}matchSegmentAgainstRoute(n,e,i,a,c,d){const f=ew(e,i,a,n);return"**"===i.path&&(e.children={}),f.pipe(Zn(g=>g.matched?this.getChildConfig(n=i._injector??n,i,a).pipe(Zn(({routes:v})=>{const y=i._loadedInjector??n,{parameters:w,consumedSegments:D,remainingSegments:A}=g,S=new mc(D,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Xg(i),Cn(i),i.component??i._loadedComponent??null,i,Kg(i)),T=gc(S,d,this.paramsInheritanceStrategy);S.params=Object.freeze(T.params),S.data=Object.freeze(T.data);const{segmentGroup:x,slicedSegments:M}=wc(e,D,A,v);if(0===M.length&&x.hasChildren())return this.processChildren(y,v,x,S).pipe((0,$e.T)(O=>new nr(S,O)));if(0===v.length&&0===M.length)return be(new nr(S,[]));const k=Cn(i)===c;return this.processSegment(y,v,x,M,k?xe:c,!0,S).pipe((0,$e.T)(O=>new nr(S,O instanceof nr?[O]:[])))})):ho(e)))}getChildConfig(n,e,i){return e.children?be({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?be({routes:e._loadedRoutes,injector:e._loadedInjector}):function zg(o,n,e,i){const a=n.canLoad;return void 0===a||0===a.length?be(!0):be(a.map(d=>{const f=os(d,o);return ts(function Bg(o){return o&&ja(o.canLoad)}(f)?f.canLoad(n,e):(0,_.N4e)(o,()=>f(n,e)))})).pipe(co(),Qb())}(n,e,i).pipe(fn(a=>a?this.configLoader.loadChildren(n,e).pipe(ft(c=>{e._loadedRoutes=c.routes,e._loadedInjector=c.injector})):function Zb(){return Sd(Jd(!1,Fn.GuardRejected))}())):be({routes:[],injector:n})}}function qg(o){const n=o.value.routeConfig;return n&&""===n.path}function ih(o){const n=[],e=new Set;for(const i of o){if(!qg(i)){n.push(i);continue}const a=n.find(c=>i.value.routeConfig===c.value.routeConfig);void 0!==a?(a.children.push(...i.children),e.add(a)):n.push(i)}for(const i of e){const a=ih(i.children);n.push(new nr(i.value,a))}return n.filter(i=>!e.has(i))}function Xg(o){return o.data||{}}function Kg(o){return o.resolve||{}}function An(o){const n=o.children.map(e=>An(e)).flat();return[o,...n]}function sh(o){return Zn(n=>{const e=o(n);return e?Jt(e).pipe((0,$e.T)(()=>n)):be(n)})}let iw=(()=>{class o{buildTitle(e){let i,a=e.root;for(;void 0!==a;)i=this.getResolvedTitleForRoute(a)??i,a=a.children.find(c=>c.outlet===xe);return i}getResolvedTitleForRoute(e){return e.data[_a]}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:()=>(0,_.WQX)(uC),providedIn:"root"})}}return o})(),uC=(()=>{class o extends iw{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||o)(_.KVO(eg))}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();const po=new _.nKC("",{providedIn:"root",factory:()=>({})});let oh=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=_.VBU({type:o,selectors:[["ng-component"]],standalone:!0,features:[_.aNF],decls:1,vars:0,template:function(i,a){1&i&&_.nrm(0,"router-outlet")},dependencies:[kg],encapsulation:2})}}return o})();function Zg(o){const n=o.children&&o.children.map(Zg),e=n?{...o,children:n}:{...o};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==xe&&(e.component=oh),e}const ls=new _.nKC("");let Dc=(()=>{class o{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,_.WQX)(_.Ql9)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return be(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=ts(e.loadComponent()).pipe((0,$e.T)(cs),ft(c=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=c}),Bl(()=>{this.componentLoaders.delete(e)})),a=new dg(i,()=>new er.B).pipe(ug());return this.componentLoaders.set(e,a),a}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return be({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const c=function ah(o,n,e,i){return ts(o.loadChildren()).pipe((0,$e.T)(cs),fn(a=>a instanceof _.Co$||Array.isArray(a)?be(a):Jt(n.compileModuleAsync(a))),(0,$e.T)(a=>{i&&i(o);let c,d,f=!1;return Array.isArray(a)?(d=a,!0):(c=a.create(e).injector,d=c.get(ls,[],{optional:!0,self:!0}).flat()),{routes:d.map(Zg),injector:c}}))}(i,this.compiler,e,this.onLoadEndListener).pipe(Bl(()=>{this.childrenLoaders.delete(i)})),d=new dg(c,()=>new er.B).pipe(ug());return this.childrenLoaders.set(i,d),d}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function cs(o){return function sw(o){return o&&"object"==typeof o&&"default"in o}(o)?o.default:o}let Ba=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:()=>(0,_.WQX)(Jg),providedIn:"root"})}}return o})(),Jg=(()=>{class o{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();const Cc=new _.nKC(""),lh=new _.nKC("");let Ac=(()=>{class o{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new er.B,this.transitionAbortSubject=new er.B,this.configLoader=(0,_.WQX)(Dc),this.environmentInjector=(0,_.WQX)(_.uvJ),this.urlSerializer=(0,_.WQX)(is),this.rootContexts=(0,_.WQX)(Na),this.location=(0,_.WQX)(Wt),this.inputBindingEnabled=null!==(0,_.WQX)(Qd,{optional:!0}),this.titleStrategy=(0,_.WQX)(iw),this.options=(0,_.WQX)(po,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,_.WQX)(Ba),this.createViewTransition=(0,_.WQX)(Cc,{optional:!0}),this.navigationErrorHandler=(0,_.WQX)(lh,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>be(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=a=>this.events.next(new YD(a)),this.configLoader.onLoadStartListener=a=>this.events.next(new KD(a))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:i})}setupNavigations(e,i,a){return this.transitions=new kn.t({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:fc,restoredState:null,currentSnapshot:a.snapshot,targetSnapshot:null,currentRouterState:a,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,$r.p)(c=>0!==c.id),(0,$e.T)(c=>({...c,extractedUrl:this.urlHandlingStrategy.extract(c.rawUrl)})),Zn(c=>{let d=!1,f=!1;return be(c).pipe(Zn(g=>{if(this.navigationId>c.id)return this.cancelNavigationTransition(c,"",Fn.SupersededByNewNavigation),Ji.w;this.currentTransition=c,this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,targetBrowserUrl:"string"==typeof g.extras.browserUrl?this.urlSerializer.parse(g.extras.browserUrl):g.extras.browserUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const v=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!v&&"reload"!==(g.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const w="";return this.events.next(new no(g.id,this.urlSerializer.serialize(g.rawUrl),w,Ud.IgnoredSameUrlNavigation)),g.resolve(!1),Ji.w}if(this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return be(g).pipe(Zn(w=>{const D=this.transitions?.getValue();return this.events.next(new Bd(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),D!==this.transitions?.getValue()?Ji.w:Promise.resolve(w)}),function Yg(o,n,e,i,a,c){return fn(d=>function lC(o,n,e,i,a,c,d="emptyOnly"){return new _c(o,n,e,i,a,d,c).recognize()}(o,n,e,i,d.extractedUrl,a,c).pipe((0,$e.T)(({state:f,tree:g})=>({...d,targetSnapshot:f,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),ft(w=>{c.targetSnapshot=w.targetSnapshot,c.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects};const D=new Ig(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(D)}));if(v&&this.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){const{id:w,extractedUrl:D,source:A,restoredState:S,extras:T}=g,x=new Bd(w,this.urlSerializer.serialize(D),A,S);this.events.next(x);const M=Kd(this.rootComponentType).snapshot;return this.currentTransition=c={...g,targetSnapshot:M,urlAfterRedirects:D,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=D,be(c)}{const w="";return this.events.next(new no(g.id,this.urlSerializer.serialize(g.extractedUrl),w,Ud.IgnoredByUrlHandlingStrategy)),g.resolve(!1),Ji.w}}),ft(g=>{const v=new Ma(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(v)}),(0,$e.T)(g=>(this.currentTransition=c={...g,guards:JD(g.targetSnapshot,g.currentSnapshot,this.rootContexts)},c)),function Gb(o,n){return fn(e=>{const{targetSnapshot:i,currentSnapshot:a,guards:{canActivateChecks:c,canDeactivateChecks:d}}=e;return 0===d.length&&0===c.length?be({...e,guardsResult:!0}):function Wb(o,n,e,i){return Jt(o).pipe(fn(a=>function Yb(o,n,e,i,a){const c=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return c&&0!==c.length?be(c.map(f=>{const g=Nr(n)??a,v=os(f,g);return ts(function Ug(o){return o&&ja(o.canDeactivate)}(v)?v.canDeactivate(o,n,e,i):(0,_.N4e)(g,()=>v(o,n,e,i))).pipe((0,es.$)())})).pipe(co()):be(!0)}(a.component,a.route,e,n,i)),(0,es.$)(a=>!0!==a,!0))}(d,i,a,o).pipe(fn(f=>f&&function jg(o){return"boolean"==typeof o}(f)?function Hg(o,n,e,i){return Jt(n).pipe(Os(a=>Cd(function qb(o,n){return null!==o&&n&&n(new Ra(o)),be(!0)}(a.route.parent,i),function $g(o,n){return null!==o&&n&&n(new pc(o)),be(!0)}(a.route,i),function Kb(o,n,e){const i=n[n.length-1],c=n.slice(0,n.length-1).reverse().map(d=>function eC(o){const n=o.routeConfig?o.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:o,guards:n}:null}(d)).filter(d=>null!==d).map(d=>Ad(()=>be(d.guards.map(g=>{const v=Nr(d.node)??e,y=os(g,v);return ts(function zb(o){return o&&ja(o.canActivateChild)}(y)?y.canActivateChild(i,o):(0,_.N4e)(v,()=>y(i,o))).pipe((0,es.$)())})).pipe(co())));return be(c).pipe(co())}(o,a.path,e),function Xb(o,n,e){const i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||0===i.length)return be(!0);const a=i.map(c=>Ad(()=>{const d=Nr(n)??e,f=os(c,d);return ts(function $b(o){return o&&ja(o.canActivate)}(f)?f.canActivate(n,o):(0,_.N4e)(d,()=>f(n,o))).pipe((0,es.$)())}));return be(a).pipe(co())}(o,a.route,e))),(0,es.$)(a=>!0!==a,!0))}(i,c,o,n):be(f)),(0,$e.T)(f=>({...e,guardsResult:f})))})}(this.environmentInjector,g=>this.events.next(g)),ft(g=>{if(c.guardsResult=g.guardsResult,g.guardsResult&&"boolean"!=typeof g.guardsResult)throw Si(0,g.guardsResult);const v=new Tg(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(v)}),(0,$r.p)(g=>!!g.guardsResult||(this.cancelNavigationTransition(g,"",Fn.GuardRejected),!1)),sh(g=>{if(g.guards.canActivateChecks.length)return be(g).pipe(ft(v=>{const y=new Hd(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(y)}),Zn(v=>{let y=!1;return be(v).pipe(function fo(o,n){return fn(e=>{const{targetSnapshot:i,guards:{canActivateChecks:a}}=e;if(!a.length)return be(e);const c=new Set(a.map(g=>g.route)),d=new Set;for(const g of c)if(!d.has(g))for(const v of An(g))d.add(v);let f=0;return Jt(d).pipe(Os(g=>c.has(g)?function Ln(o,n,e,i){const a=o.routeConfig,c=o._resolve;return void 0!==a?.title&&!Lb(a)&&(c[_a]=a.title),function Qg(o,n,e,i){const a=rc(o);if(0===a.length)return be({});const c={};return Jt(a).pipe(fn(d=>function cC(o,n,e,i){const a=Nr(n)??i,c=os(o,a);return ts(c.resolve?c.resolve(n,e):(0,_.N4e)(a,()=>c(n,e)))}(o[d],n,e,i).pipe((0,es.$)(),ft(f=>{if(f instanceof ka)throw Si(new Ca,f);c[d]=f}))),nc(1),function fg(o){return(0,$e.T)(()=>o)}(c),_i(d=>Vg(d)?Ji.w:Sd(d)))}(c,o,n,i).pipe((0,$e.T)(d=>(o._resolvedData=d,o.data=gc(o,o.parent,e).resolve,null)))}(g,i,o,n):(g.data=gc(g,g.parent,o).resolve,be(void 0))),ft(()=>f++),nc(1),fn(g=>f===d.size?be(e):Ji.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),ft({next:()=>y=!0,complete:()=>{y||this.cancelNavigationTransition(v,"",Fn.NoDataFromResolver)}}))}),ft(v=>{const y=new Tb(v.id,this.urlSerializer.serialize(v.extractedUrl),this.urlSerializer.serialize(v.urlAfterRedirects),v.targetSnapshot);this.events.next(y)}))}),sh(g=>{const v=y=>{const w=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(y.routeConfig).pipe(ft(D=>{y.component=D}),(0,$e.T)(()=>{})));for(const D of y.children)w.push(...v(D));return w};return lg(v(g.targetSnapshot.root)).pipe((0,ya.U)(null),(0,Kr.s)(1))}),sh(()=>this.afterPreactivation()),Zn(()=>{const{currentSnapshot:g,targetSnapshot:v}=c,y=this.createViewTransition?.(this.environmentInjector,g.root,v.root);return y?Jt(y).pipe((0,$e.T)(()=>c)):be(c)}),(0,$e.T)(g=>{const v=function jb(o,n,e){const i=Oa(o,n._root,e?e._root:void 0);return new Xd(i,n)}(e.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=c={...g,targetRouterState:v},this.currentNavigation.targetRouterState=v,c}),ft(()=>{this.events.next(new zd)}),((o,n,e,i)=>(0,$e.T)(a=>(new ZD(n,a.targetRouterState,a.currentRouterState,e,i).activate(o),a)))(this.rootContexts,e.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),(0,Kr.s)(1),ft({next:g=>{d=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Yr(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),this.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{d=!0}}),function wb(o){return(0,Yn.N)((n,e)=>{pr(o).subscribe((0,Qn._)(e,()=>e.complete(),Id.l)),!e.closed&&n.subscribe(e)})}(this.transitionAbortSubject.pipe(ft(g=>{throw g}))),Bl(()=>{!d&&!f&&this.cancelNavigationTransition(c,"",Fn.SupersededByNewNavigation),this.currentTransition?.id===c.id&&(this.currentNavigation=null,this.currentTransition=null)}),_i(g=>{if(f=!0,eh(g))this.events.next(new Qr(c.id,this.urlSerializer.serialize(c.extractedUrl),g.message,g.cancellationCode)),function Lg(o){return eh(o)&&Ks(o.url)}(g)?this.events.next(new xa(g.url,g.navigationBehaviorOptions)):c.resolve(!1);else{const v=new Vd(c.id,this.urlSerializer.serialize(c.extractedUrl),g,c.targetSnapshot??void 0);try{const y=(0,_.N4e)(this.environmentInjector,()=>this.navigationErrorHandler?.(v));if(y instanceof ka){const{message:w,cancellationCode:D}=Si(0,y);this.events.next(new Qr(c.id,this.urlSerializer.serialize(c.extractedUrl),w,D)),this.events.next(new xa(y.redirectTo,y.navigationBehaviorOptions))}else{this.events.next(v);const w=e.errorHandler(g);c.resolve(!!w)}}catch(y){this.options.resolveNavigationPromiseOnError?c.resolve(!1):c.reject(y)}}return Ji.w}))}))}cancelNavigationTransition(e,i,a){const c=new Qr(e.id,this.urlSerializer.serialize(e.extractedUrl),i,a);this.events.next(c),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function lw(o){return o!==fc}let em=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:()=>(0,_.WQX)(Va),providedIn:"root"})}}return o})();class ch{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}let Va=(()=>{class o extends ch{static{this.\u0275fac=(()=>{let e;return function(a){return(e||(e=_.xGo(o)))(a||o)}})()}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})(),Ha=(()=>{class o{static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:()=>(0,_.WQX)(uh),providedIn:"root"})}}return o})(),uh=(()=>{class o extends Ha{constructor(){super(...arguments),this.location=(0,_.WQX)(Wt),this.urlSerializer=(0,_.WQX)(is),this.options=(0,_.WQX)(po,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,_.WQX)(Ba),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Di,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Kd(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{"popstate"===i.type&&e(i.url,i.state)})}handleRouterEvent(e,i){if(e instanceof Bd)this.stateMemento=this.createStateMemento();else if(e instanceof no)this.rawUrlTree=i.initialUrl;else if(e instanceof Ig){if("eager"===this.urlUpdateStrategy&&!i.extras.skipLocationChange){const a=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??a,i)}}else e instanceof zd?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):e instanceof Qr&&(e.code===Fn.GuardRejected||e.code===Fn.NoDataFromResolver)?this.restoreHistory(i):e instanceof Vd?this.restoreHistory(i,!0):e instanceof Yr&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,i){const a=e instanceof Di?this.urlSerializer.serialize(e):e;if(this.location.isCurrentPathEqualTo(a)||i.extras.replaceUrl){const d={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(a,"",d)}else{const c={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(a,"",c)}}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-this.browserPageId;0!==c?this.location.historyGo(c):this.currentUrlTree===e.finalUrl&&0===c&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(a){return(e||(e=_.xGo(o)))(a||o)}})()}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var $a=function(o){return o[o.COMPLETE=0]="COMPLETE",o[o.FAILED=1]="FAILED",o[o.REDIRECTING=2]="REDIRECTING",o}($a||{});function dh(o){throw o}const nm={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},us={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vr=(()=>{class o{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=(0,_.WQX)(_.H3F),this.stateManager=(0,_.WQX)(Ha),this.options=(0,_.WQX)(po,{optional:!0})||{},this.pendingTasks=(0,_.WQX)(_.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,_.WQX)(Ac),this.urlSerializer=(0,_.WQX)(is),this.location=(0,_.WQX)(Wt),this.urlHandlingStrategy=(0,_.WQX)(Ba),this._events=new er.B,this.errorHandler=this.options.errorHandler||dh,this.navigated=!1,this.routeReuseStrategy=(0,_.WQX)(em),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,_.WQX)(ls,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,_.WQX)(Qd,{optional:!0}),this.eventsSubscription=new cg.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(i=>{try{const a=this.navigationTransitions.currentTransition,c=this.navigationTransitions.currentNavigation;if(null!==a&&null!==c)if(this.stateManager.handleRouterEvent(i,c),i instanceof Qr&&i.code!==Fn.Redirect&&i.code!==Fn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Yr)this.navigated=!0;else if(i instanceof xa){const d=i.navigationBehaviorOptions,f=this.urlHandlingStrategy.merge(i.url,a.currentRawUrl),g={browserUrl:a.extras.browserUrl,info:a.extras.info,skipLocationChange:a.extras.skipLocationChange,replaceUrl:a.extras.replaceUrl||"eager"===this.urlUpdateStrategy||lw(a.source),...d};this.scheduleNavigation(f,fc,null,g,{resolve:a.resolve,reject:a.reject,promise:a.promise})}(function hh(o){return!(o instanceof zd||o instanceof xa)})(i)&&this._events.next(i)}catch(a){this.navigationTransitions.transitionAbortSubject.next(a)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",i)},0)})}navigateToSyncWithBrowser(e,i,a){const c={replaceUrl:!0},d=a?.navigationId?a:null;if(a){const g={...a};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(c.state=g)}const f=this.parseUrl(e);this.scheduleNavigation(f,i,d,c)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(Zg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){const{relativeTo:a,queryParams:c,fragment:d,queryParamsHandling:f,preserveFragment:g}=i,v=g?this.currentUrlTree.fragment:d;let w,y=null;switch(f??this.options.defaultQueryParamsHandling){case"merge":y={...this.currentUrlTree.queryParams,...c};break;case"preserve":y=this.currentUrlTree.queryParams;break;default:y=c||null}null!==y&&(y=this.removeEmptyProps(y));try{w=Cg(a?a.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||"/"!==e[0][0])&&(e=[]),w=this.currentUrlTree.root}return Ag(w,e,y,v??null)}navigateByUrl(e,i={skipLocationChange:!1}){const a=Ks(e)?e:this.parseUrl(e),c=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(c,fc,null,i)}navigate(e,i={skipLocationChange:!1}){return function rm(o){for(let n=0;n<o.length;n++)if(null==o[n])throw new _.wOt(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let a;if(a=!0===i?{...nm}:!1===i?{...us}:i,Ks(e))return Td(this.currentUrlTree,e,a);const c=this.parseUrl(e);return Td(this.currentUrlTree,c,a)}removeEmptyProps(e){return Object.entries(e).reduce((i,[a,c])=>(null!=c&&(i[a]=c),i),{})}scheduleNavigation(e,i,a,c,d){if(this.disposed)return Promise.resolve(!1);let f,g,v;d?(f=d.resolve,g=d.reject,v=d.promise):v=new Promise((w,D)=>{f=w,g=D});const y=this.pendingTasks.add();return function tm(o,n){o.events.pipe((0,$r.p)(e=>e instanceof Yr||e instanceof Qr||e instanceof Vd||e instanceof no),(0,$e.T)(e=>e instanceof Yr||e instanceof no?$a.COMPLETE:e instanceof Qr&&(e.code===Fn.Redirect||e.code===Fn.SupersededByNewNavigation)?$a.REDIRECTING:$a.FAILED),(0,$r.p)(e=>e!==$a.REDIRECTING),(0,Kr.s)(1)).subscribe(()=>{n()})}(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(y))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:c,resolve:f,reject:g,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(w=>Promise.reject(w))}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275prov=_.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();const Zr=new _.nKC("");function go(o){return o.routerState.root}function lm(){const o=(0,_.WQX)(_.zZn);return n=>{const e=o.get(_.o8S);if(n!==e.components[0])return;const i=o.get(vr),a=o.get(cm);1===o.get(yh)&&i.initialNavigation(),o.get(bh,null,_.$GK.Optional)?.setUpPreloading(),o.get(Zr,null,_.$GK.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),a.closed||(a.next(),a.complete(),a.unsubscribe())}}const cm=new _.nKC("",{factory:()=>new er.B}),yh=new _.nKC("",{providedIn:"root",factory:()=>1}),bh=new _.nKC("");let ym=(()=>{class o{title="bot-list";static \u0275fac=function(i){return new(i||o)};static \u0275cmp=_.VBU({type:o,selectors:[["app-root"]],standalone:!0,features:[_.aNF],decls:1,vars:0,template:function(i,a){1&i&&_.nrm(0,"router-outlet")},dependencies:[kg]})}return o})(),Tc=(()=>{class o{http;APP_NAME="scriptagher";BASE_PATH=`https://raw.githubusercontent.com/diegofcj/${this.APP_NAME}/gh-pages/bots`;BASE_SOURCE=`https://github.com/diegofcj/${this.APP_NAME}/tree/gh-pages/bots`;constructor(e){this.http=e}getBotsConfig(){return this.http.get(`${this.BASE_PATH}/bots.json`)}getBotDetails(e){return this.http.get(`${this.BASE_SOURCE}/${e.language}/${e.botName}/Bot.json`)}downloadBot(e){return this.http.get(`${this.BASE_PATH}/${e.language}/${e.botName}/${e.botName}.zip`,{responseType:"blob"})}openBot(e){window.open(`${this.BASE_SOURCE}/${e.language}/${e.botName}`,"_blank")}static \u0275fac=function(i){return new(i||o)(_.KVO(Mp))};static \u0275prov=_.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function mw(o,n){if(1&o){const e=_.RV6();_.j41(0,"button",3),_.bIt("click",function(){_.eBV(e);const a=_.XpG();return _.Njj(a.navigateToPdfToQcm())}),_.EFF(1," Vai al Converter PDF to QCM "),_.k0s()}}let vw=(()=>{class o{router;botService;bot;language="";download=new _.bkB;constructor(e,i){this.router=e,this.botService=i}openBot(){this.bot.language=this.language,this.botService.openBot(this.bot)}downloadBot(){this.download.emit()}navigateToPdfToQcm(){try{this.router.navigate(["/pdf-to-qcm"])}catch(e){console.error("Errore durante la navigazione verso la pagina PDF to QCM:",e)}}static \u0275fac=function(i){return new(i||o)(_.rXU(vr),_.rXU(Tc))};static \u0275cmp=_.VBU({type:o,selectors:[["app-bot-card"]],inputs:{bot:"bot",language:"language"},outputs:{download:"download"},standalone:!0,features:[_.aNF],decls:14,vars:4,consts:[[1,"bot"],["class","nav-link-button",3,"click",4,"ngIf"],[3,"click"],[1,"nav-link-button",3,"click"]],template:function(i,a){1&i&&(_.j41(0,"div",0)(1,"h3"),_.EFF(2),_.k0s(),_.j41(3,"p"),_.EFF(4),_.k0s(),_.j41(5,"p"),_.EFF(6,"Start Command "),_.nrm(7,"br"),_.EFF(8),_.k0s(),_.DNE(9,mw,2,0,"button",1),_.j41(10,"button",2),_.bIt("click",function(){return a.openBot()}),_.EFF(11,"View Source"),_.k0s(),_.j41(12,"button",2),_.bIt("click",function(){return a.downloadBot()}),_.EFF(13,"Download"),_.k0s()()),2&i&&(_.R7$(2),_.JRh(a.bot.botName),_.R7$(2),_.SpI("Description: ",a.bot.description||"No description available",""),_.R7$(4),_.JRh(a.bot.startCommand||"No start commands provided"),_.R7$(),_.Y8G("ngIf","pdf-to-qcm"===a.bot.botName))},dependencies:[re,zo],styles:[".bot[_ngcontent-%COMP%]{background-color:var(--bg-card, #333);color:var(--text-card, #eee);padding:1rem;border-radius:8px;margin:1rem 0}.bot[_ngcontent-%COMP%]   .nav-link-button[_ngcontent-%COMP%]{background-color:var(--button-bg, #5cb85c);cursor:pointer}.bot[_ngcontent-%COMP%]   .nav-link-button[_ngcontent-%COMP%]:hover{background-color:var(--button-hover, #4cae4c)}"]})}return o})();function Sn(o,n){if(1&o){const e=_.RV6();_.j41(0,"app-bot-card",2),_.bIt("download",function(){const a=_.eBV(e).$implicit,c=_.XpG();return _.Njj(c.downloadBot(a))}),_.k0s()}if(2&o){const e=n.$implicit,i=_.XpG();_.Y8G("bot",e)("language",i.language)}}let yw=(()=>{class o{botService;language="";bots=[];constructor(e){this.botService=e}downloadBot(e){e.language=this.language,this.botService.downloadBot(e).subscribe({next:i=>{const a=document.createElement("a");a.href=window.URL.createObjectURL(i),a.download=`${e.botName}.zip`,a.click()},error:i=>{console.error("Error downloading bot:",i),alert("Could not download the bot. Please try again.")}})}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}static \u0275fac=function(i){return new(i||o)(_.rXU(Tc))};static \u0275cmp=_.VBU({type:o,selectors:[["app-bot-section"]],inputs:{language:"language",bots:"bots"},standalone:!0,features:[_.aNF],decls:5,vars:2,consts:[[1,"bot-container"],[3,"bot","language","download",4,"ngFor","ngForOf"],[3,"download","bot","language"]],template:function(i,a){1&i&&(_.j41(0,"section")(1,"h2"),_.EFF(2),_.k0s(),_.j41(3,"div",0),_.DNE(4,Sn,1,2,"app-bot-card",1),_.k0s()()),2&i&&(_.R7$(2),_.SpI("",a.capitalize(a.language)," Bots"),_.R7$(2),_.Y8G("ngForOf",a.bots))},dependencies:[re,$o,vw],styles:["section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}h2[_ngcontent-%COMP%]{color:#e0e0e0}.bot-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;gap:1rem;justify-content:center}"]})}return o})();function bw(o,n){if(1&o){const e=_.RV6();_.j41(0,"div",3)(1,"span",4),_.EFF(2,"Scriptagher"),_.k0s(),_.j41(3,"span",5),_.EFF(4,"PDF to QCM"),_.k0s(),_.j41(5,"div",6),_.bIt("click",function(){_.eBV(e);const a=_.XpG();return _.Njj(a.navigateHome())}),_.j41(6,"div",6),_.bIt("click",function(){_.eBV(e);const a=_.XpG();return _.Njj(a.navigateHome())}),_.nrm(7,"img",7),_.k0s()()()}}function wC(o,n){1&o&&(_.j41(0,"div",8)(1,"h1"),_.EFF(2,"Welcome to the Bot List"),_.k0s(),_.j41(3,"p"),_.EFF(4,"Here is a list of available bots, organized by language."),_.k0s()())}let Mc=(()=>{class o{router;isPdfToQcmPage=!1;constructor(e){this.router=e,this.router.events.pipe((0,$r.p)(i=>i instanceof Yr)).subscribe(i=>{this.isPdfToQcmPage="/pdf-to-qcm"===i.url})}navigateHome(){this.router.navigate(["/"])}static \u0275fac=function(i){return new(i||o)(_.rXU(vr))};static \u0275cmp=_.VBU({type:o,selectors:[["app-header"]],standalone:!0,features:[_.aNF],decls:5,vars:4,consts:[["normalHeader",""],[1,"header-content"],["class","pdf-header",4,"ngIf","ngIfElse"],[1,"pdf-header"],[1,"app-name"],[1,"current-page"],[1,"home-button",3,"click"],["src","icons/icons8-home-64.png"],[1,"normal-header"]],template:function(i,a){if(1&i&&(_.j41(0,"header")(1,"div",1),_.DNE(2,bw,8,0,"div",2)(3,wC,5,0,"ng-template",null,0,_.C5r),_.k0s()()),2&i){const c=_.sdS(4);_.AVh("pdf-page",a.isPdfToQcmPage),_.R7$(2),_.Y8G("ngIf",a.isPdfToQcmPage)("ngIfElse",c)}},dependencies:[re,zo],styles:["header[_ngcontent-%COMP%]{text-align:center;padding:1rem;background:var(--header-bg, #222);color:#fff;transition:background-color .3s ease}header.pdf-page[_ngcontent-%COMP%]{height:5cap;background:var(--pdf-header-bg, #333);position:relative;display:flex;align-items:center;justify-content:space-between;padding:0 1rem}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;justify-content:space-between;gap:.5rem}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .pdf-header[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:-20px;display:flex;align-items:center;justify-content:space-between;gap:1rem}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .pdf-header[_ngcontent-%COMP%]   .app-name[_ngcontent-%COMP%]{font-size:2rem;color:#fff}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .pdf-header[_ngcontent-%COMP%]   .current-page[_ngcontent-%COMP%]{color:#ddd;font-size:2rem}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .pdf-header[_ngcontent-%COMP%]   .home-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{cursor:pointer;width:35px;height:35px;transition:transform .2s ease}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .pdf-header[_ngcontent-%COMP%]   .home-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.1);filter:invert(60%)}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .normal-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .normal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;opacity:.7}"]})}return o})(),bm=(()=>{class o{static \u0275fac=function(i){return new(i||o)};static \u0275cmp=_.VBU({type:o,selectors:[["app-footer"]],standalone:!0,features:[_.aNF],decls:3,vars:0,template:function(i,a){1&i&&(_.j41(0,"footer")(1,"p"),_.EFF(2,"\xa9 2024 Scriptagher"),_.k0s()())},styles:["footer[_ngcontent-%COMP%]{text-align:center;padding:1rem;background-color:var(--bg-footer, #111);color:var(--text-footer, #ccc)}"]})}return o})();function ww(o,n){if(1&o&&_.nrm(0,"app-bot-section",3),2&o){const e=n.$implicit;_.Y8G("language",e.language)("bots",e.botDetails)}}function _w(o,n){if(1&o&&(_.j41(0,"main"),_.DNE(1,ww,1,2,"app-bot-section",2),_.k0s()),2&o){const e=_.XpG();_.R7$(),_.Y8G("ngForOf",e.botSections)}}function Ew(o,n){if(1&o&&(_.j41(0,"p"),_.EFF(1),_.k0s()),2&o){const e=_.XpG();_.R7$(),_.JRh(e.errorMessage||"No bots available.")}}let wm=(()=>{class o{botService;botSections=[];errorMessage="";constructor(e){this.botService=e}ngOnInit(){this.populateBotList()}populateBotList(){var i,e=this;this.botService.getBotsConfig().subscribe({next:(i=te(function*(a){e.botSections=[];for(const c in a){const d=a[c];if(!d||0===d.length)continue;const f=yield Promise.all(d.map(function(){var g=te(function*(v){try{return v.language=c,yield e.botService.getBotDetails(v).toPromise()}catch{return{botName:v.botName,description:"Error loading details"}}});return function(v){return g.apply(this,arguments)}}()));e.botSections.push({language:c,botDetails:f})}}),function(c){return i.apply(this,arguments)}),error:i=>{console.error("Error fetching bots configuration:",i),this.errorMessage="Failed to load the bot list."}})}static \u0275fac=function(i){return new(i||o)(_.rXU(Tc))};static \u0275cmp=_.VBU({type:o,selectors:[["app-bot-list"]],standalone:!0,features:[_.aNF],decls:5,vars:2,consts:[["errorTemplate",""],[4,"ngIf","ngIfElse"],[3,"language","bots",4,"ngFor","ngForOf"],[3,"language","bots"]],template:function(i,a){if(1&i&&(_.nrm(0,"app-header"),_.DNE(1,_w,2,1,"main",1)(2,Ew,2,1,"ng-template",null,0,_.C5r),_.nrm(4,"app-footer")),2&i){const c=_.sdS(3);_.R7$(),_.Y8G("ngIf",a.botSections.length)("ngIfElse",c)}},dependencies:[re,$o,zo,Mc,yw,bm],styles:["[_ngcontent-%COMP%]:root{--bg-header: #222;--text-header: #fff;--bg-footer: #111;--text-footer: #ccc;--bg-card: #333;--text-card: #eee;--button-bg: #007acc;--button-text: #fff;--button-hover: #005fa3}body[_ngcontent-%COMP%]{background-color:#121212;color:#e0e0e0;font-family:Arial,sans-serif;margin:0;padding:0}"]})}return o})();var Ga={d:(o,n)=>{for(var e in n)Ga.o(n,e)&&!Ga.o(o,e)&&Object.defineProperty(o,e,{enumerable:!0,get:n[e]})},o:(o,n)=>Object.prototype.hasOwnProperty.call(o,n)},Ee=globalThis.pdfjsLib={};Ga.d(Ee,{AbortException:()=>Ri,AnnotationEditorLayer:()=>qc,AnnotationEditorParamsType:()=>Ue,AnnotationEditorType:()=>Re,AnnotationEditorUIManager:()=>Qa,AnnotationLayer:()=>HC,AnnotationMode:()=>Ii,ColorPicker:()=>Un,DOMSVGFactory:()=>rv,DrawLayer:()=>yn,FeatureTest:()=>Vt,GlobalWorkerOptions:()=>nl,ImageKind:()=>Eh,InvalidPDFException:()=>Sh,MissingPDFException:()=>qa,OPS:()=>br,OutputScale:()=>kc,PDFDataRangeTransport:()=>Qm,PDFDateString:()=>Tm,PDFWorker:()=>Ht,PasswordResponses:()=>yo,PermissionFlag:()=>xc,PixelsPerInch:()=>Ni,RenderingCancelledException:()=>Pc,TextLayer:()=>tn,UnexpectedResponseException:()=>fs,Util:()=>se,VerbosityLevel:()=>vo,XfaLayer:()=>iv,build:()=>nv,createValidAbsoluteUrl:()=>Tw,fetchData:()=>Pi,getDocument:()=>ef,getFilenameFromUrl:()=>Lw,getPdfFilenameFromUrl:()=>Ka,getXfaPageViewport:()=>jw,isDataScheme:()=>ki,isPdfFile:()=>Oc,noContextMenu:()=>rr,normalizeUnicode:()=>Ow,setLayerDimensions:()=>Fr,shadow:()=>je,stopEvent:()=>ir,version:()=>af});const en=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type),_m=[1,0,0,1,0,0],_h=[.001,0,0,.001,0,0],Ii={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Re={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ue={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},xc={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Eh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},vo={ERRORS:0,WARNINGS:1,INFOS:5},br={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},yo={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Wa=vo.WARNINGS;function bo(){return Wa}function wo(o){Wa>=vo.INFOS&&console.log(`Info: ${o}`)}function Te(o){Wa>=vo.WARNINGS&&console.log(`Warning: ${o}`)}function Je(o){throw new Error(o)}function At(o,n){o||Je(n)}function Tw(o,n=null,e=null){if(!o)return null;try{if(e&&"string"==typeof o&&(e.addDefaultProtocol&&o.startsWith("www.")&&o.match(/\./g)?.length>=2&&(o=`http://${o}`),e.tryConvertEncoding))try{o=function Nw(o){return decodeURIComponent(escape(o))}(o)}catch{}const i=n?new URL(o,n):new URL(o);if(function Iw(o){switch(o?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch{}return null}function je(o,n,e,i=!1){return Object.defineProperty(o,n,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Mi=function(){function n(e,i){this.message=e,this.name=i}return n.prototype=new Error,n.constructor=n,n}();class Ch extends Mi{constructor(n,e){super(n,"PasswordException"),this.code=e}}class Ah extends Mi{constructor(n,e){super(n,"UnknownErrorException"),this.details=e}}class Sh extends Mi{constructor(n){super(n,"InvalidPDFException")}}class qa extends Mi{constructor(n){super(n,"MissingPDFException")}}class fs extends Mi{constructor(n,e){super(n,"UnexpectedResponseException"),this.status=e}}class Mw extends Mi{constructor(n){super(n,"FormatError")}}class Ri extends Mi{constructor(n){super(n,"AbortException")}}function Em(o){("object"!=typeof o||void 0===o?.length)&&Je("Invalid argument for bytesToString");const n=o.length,e=8192;if(n<e)return String.fromCharCode.apply(null,o);const i=[];for(let a=0;a<n;a+=e){const c=Math.min(a+e,n),d=o.subarray(a,c);i.push(String.fromCharCode.apply(null,d))}return i.join("")}function ps(o){"string"!=typeof o&&Je("Invalid argument for stringToBytes");const n=o.length,e=new Uint8Array(n);for(let i=0;i<n;++i)e[i]=255&o.charCodeAt(i);return e}function Nc(o){const n=Object.create(null);for(const[e,i]of o)n[e]=i;return n}class Vt{static get isLittleEndian(){return je(this,"isLittleEndian",function Ih(){const o=new Uint8Array(4);return o[0]=1,1===new Uint32Array(o.buffer,0,1)[0]}())}static get isEvalSupported(){return je(this,"isEvalSupported",function Dm(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return je(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return je(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&"string"==typeof navigator?.platform?je(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:"string"==typeof navigator?.userAgent&&navigator.userAgent.includes("Firefox")}):je(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return je(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const xi=Array.from(Array(256).keys(),o=>o.toString(16).padStart(2,"0"));class se{static makeHexColor(n,e,i){return`#${xi[n]}${xi[e]}${xi[i]}`}static scaleMinMax(n,e){let i;n[0]?(n[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=n[0],e[2]*=n[0],n[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=n[3],e[3]*=n[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,n[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=n[1],e[3]*=n[1],n[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=n[2],e[2]*=n[2]),e[0]+=n[4],e[1]+=n[5],e[2]+=n[4],e[3]+=n[5]}static transform(n,e){return[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],n[0]*e[4]+n[2]*e[5]+n[4],n[1]*e[4]+n[3]*e[5]+n[5]]}static applyTransform(n,e){return[n[0]*e[0]+n[1]*e[2]+e[4],n[0]*e[1]+n[1]*e[3]+e[5]]}static applyInverseTransform(n,e){const i=e[0]*e[3]-e[1]*e[2];return[(n[0]*e[3]-n[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-n[0]*e[1]+n[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]}static getAxialAlignedBoundingBox(n,e){const i=this.applyTransform(n,e),a=this.applyTransform(n.slice(2,4),e),c=this.applyTransform([n[0],n[3]],e),d=this.applyTransform([n[2],n[1]],e);return[Math.min(i[0],a[0],c[0],d[0]),Math.min(i[1],a[1],c[1],d[1]),Math.max(i[0],a[0],c[0],d[0]),Math.max(i[1],a[1],c[1],d[1])]}static inverseTransform(n){const e=n[0]*n[3]-n[1]*n[2];return[n[3]/e,-n[1]/e,-n[2]/e,n[0]/e,(n[2]*n[5]-n[4]*n[3])/e,(n[4]*n[1]-n[5]*n[0])/e]}static singularValueDecompose2dScale(n){const e=[n[0],n[2],n[1],n[3]],i=n[0]*e[0]+n[1]*e[2],d=n[2]*e[1]+n[3]*e[3],f=(i+d)/2,g=Math.sqrt((i+d)**2-4*(i*d-(n[2]*e[0]+n[3]*e[2])*(n[0]*e[1]+n[1]*e[3])))/2,y=f-g||1;return[Math.sqrt(f+g||1),Math.sqrt(y)]}static normalizeRect(n){const e=n.slice(0);return n[0]>n[2]&&(e[0]=n[2],e[2]=n[0]),n[1]>n[3]&&(e[1]=n[3],e[3]=n[1]),e}static intersect(n,e){const i=Math.max(Math.min(n[0],n[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(n[0],n[2]),Math.max(e[0],e[2]));if(i>a)return null;const c=Math.max(Math.min(n[1],n[3]),Math.min(e[1],e[3])),d=Math.min(Math.max(n[1],n[3]),Math.max(e[1],e[3]));return c>d?null:[i,c,a,d]}static#e(n,e,i,a,c,d,f,g,v,y){if(v<=0||v>=1)return;const w=1-v,D=v*v,A=D*v,S=w*(w*(w*n+3*v*e)+3*D*i)+A*a,T=w*(w*(w*c+3*v*d)+3*D*f)+A*g;y[0]=Math.min(y[0],S),y[1]=Math.min(y[1],T),y[2]=Math.max(y[2],S),y[3]=Math.max(y[3],T)}static#t(n,e,i,a,c,d,f,g,v,y,w,D){if(Math.abs(v)<1e-12)return void(Math.abs(y)>=1e-12&&this.#e(n,e,i,a,c,d,f,g,-w/y,D));const A=y**2-4*w*v;if(A<0)return;const S=Math.sqrt(A),T=2*v;this.#e(n,e,i,a,c,d,f,g,(-y+S)/T,D),this.#e(n,e,i,a,c,d,f,g,(-y-S)/T,D)}static bezierBoundingBox(n,e,i,a,c,d,f,g,v){return v?(v[0]=Math.min(v[0],n,f),v[1]=Math.min(v[1],e,g),v[2]=Math.max(v[2],n,f),v[3]=Math.max(v[3],e,g)):v=[Math.min(n,f),Math.min(e,g),Math.max(n,f),Math.max(e,g)],this.#t(n,i,c,f,e,a,d,g,3*(3*(i-c)-n+f),6*(n-2*i+c),3*(i-n),v),this.#t(n,i,c,f,e,a,d,g,3*(3*(a-d)-e+g),6*(e-2*a+d),3*(a-e),v),v}}let Am=null,Pw=null;function Ow(o){return Am||(Am=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Pw=new Map([["\ufb05","\u017ft"]])),o.replaceAll(Am,(n,e,i)=>e?e.normalize("NFKC"):Pw.get(i))}const Sm="pdfjs_internal_id_";"function"!=typeof Promise.try&&(Promise.try=function(o,...n){return new Promise(e=>{e(o(...n))})});const ti="http://www.w3.org/2000/svg";class Ni{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}function Pi(o){return Xa.apply(this,arguments)}function Xa(){return(Xa=te(function*(o,n="text"){if(_o(o,document.baseURI)){const e=yield fetch(o);if(!e.ok)throw new Error(e.statusText);switch(n){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const a=new XMLHttpRequest;a.open("GET",o,!0),a.responseType=n,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(200===a.status||0===a.status){switch(n){case"arraybuffer":case"blob":case"json":return void e(a.response)}return void e(a.responseText)}i(new Error(a.statusText))}},a.send(null)})})).apply(this,arguments)}class Oi{constructor({viewBox:n,scale:e,rotation:i,offsetX:a=0,offsetY:c=0,dontFlip:d=!1}){this.viewBox=n,this.scale=e,this.rotation=i,this.offsetX=a,this.offsetY=c;const f=(n[2]+n[0])/2,g=(n[3]+n[1])/2;let v,y,w,D,A,S,T,x;switch((i%=360)<0&&(i+=360),i){case 180:v=-1,y=0,w=0,D=1;break;case 90:v=0,y=1,w=1,D=0;break;case 270:v=0,y=-1,w=-1,D=0;break;case 0:v=1,y=0,w=0,D=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}d&&(w=-w,D=-D),0===v?(A=Math.abs(g-n[1])*e+a,S=Math.abs(f-n[0])*e+c,T=(n[3]-n[1])*e,x=(n[2]-n[0])*e):(A=Math.abs(f-n[0])*e+a,S=Math.abs(g-n[1])*e+c,T=(n[2]-n[0])*e,x=(n[3]-n[1])*e),this.transform=[v*e,y*e,w*e,D*e,A-v*e*f-w*e*g,S-y*e*f-D*e*g],this.width=T,this.height=x}get rawDims(){const{viewBox:n}=this;return je(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:n=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:c=!1}={}){return new Oi({viewBox:this.viewBox.slice(),scale:n,rotation:e,offsetX:i,offsetY:a,dontFlip:c})}convertToViewportPoint(n,e){return se.applyTransform([n,e],this.transform)}convertToViewportRectangle(n){const e=se.applyTransform([n[0],n[1]],this.transform),i=se.applyTransform([n[2],n[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(n,e){return se.applyInverseTransform([n,e],this.transform)}}class Pc extends Mi{constructor(n,e=0){super(n,"RenderingCancelledException"),this.extraDelay=e}}function ki(o){const n=o.length;let e=0;for(;e<n&&""===o[e].trim();)e++;return"data:"===o.substring(e,e+5).toLowerCase()}function Oc(o){return"string"==typeof o&&/\.pdf$/i.test(o)}function Lw(o){return[o]=o.split(/[#?]/,1),o.substring(o.lastIndexOf("/")+1)}function Ka(o,n="document.pdf"){if("string"!=typeof o)return n;if(ki(o))return Te('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),n;const i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(o);let c=i.exec(a[1])||i.exec(a[2])||i.exec(a[3]);if(c&&(c=c[0],c.includes("%")))try{c=i.exec(decodeURIComponent(c))[0]}catch{}return c||n}class Mh{started=Object.create(null);times=[];time(n){n in this.started&&Te(`Timer is already running for ${n}`),this.started[n]=Date.now()}timeEnd(n){n in this.started||Te(`Timer has not been started for ${n}`),this.times.push({name:n,start:this.started[n],end:Date.now()}),delete this.started[n]}toString(){const n=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:a,end:c}of this.times)n.push(`${i.padEnd(e)} ${c-a}ms\n`);return n.join("")}}function _o(o,n){try{const{protocol:e}=n?new URL(o,n):new URL(o);return"http:"===e||"https:"===e}catch{return!1}}function rr(o){o.preventDefault()}function ir(o){o.preventDefault(),o.stopPropagation()}function Im(o){console.log("Deprecated API usage: "+o)}class Tm{static#e;static toDateObject(n){if(!n||"string"!=typeof n)return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#e.exec(n);if(!e)return null;const i=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let c=parseInt(e[3],10);c=c>=1&&c<=31?c:1;let d=parseInt(e[4],10);d=d>=0&&d<=23?d:0;let f=parseInt(e[5],10);f=f>=0&&f<=59?f:0;let g=parseInt(e[6],10);g=g>=0&&g<=59?g:0;const v=e[7]||"Z";let y=parseInt(e[8],10);y=y>=0&&y<=23?y:0;let w=parseInt(e[9],10)||0;return w=w>=0&&w<=59?w:0,"-"===v?(d+=y,f+=w):"+"===v&&(d-=y,f-=w),new Date(Date.UTC(i,a,c,d,f,g))}}function jw(o,{scale:n=1,rotation:e=0}){const{width:i,height:a}=o.attributes.style,c=[0,0,parseInt(i),parseInt(a)];return new Oi({viewBox:c,scale:n,rotation:e})}function gs(o){if(o.startsWith("#")){const n=parseInt(o.slice(1),16);return[(16711680&n)>>16,(65280&n)>>8,255&n]}return o.startsWith("rgb(")?o.slice(4,-1).split(",").map(n=>parseInt(n)):o.startsWith("rgba(")?o.slice(5,-1).split(",").map(n=>parseInt(n)).slice(0,3):(Te(`Not a valid color format: "${o}"`),[0,0,0])}function vt(o){const{a:n,b:e,c:i,d:a,e:c,f:d}=o.getTransform();return[n,e,i,a,c,d]}function kr(o){const{a:n,b:e,c:i,d:a,e:c,f:d}=o.getTransform().invertSelf();return[n,e,i,a,c,d]}function Fr(o,n,e=!1,i=!0){if(n instanceof Oi){const{pageWidth:a,pageHeight:c}=n.rawDims,{style:d}=o,f=Vt.isCSSRoundSupported,g=`var(--scale-factor) * ${a}px`,v=`var(--scale-factor) * ${c}px`,y=f?`round(down, ${g}, var(--scale-round-x, 1px))`:`calc(${g})`,w=f?`round(down, ${v}, var(--scale-round-y, 1px))`:`calc(${v})`;e&&n.rotation%180!=0?(d.width=w,d.height=y):(d.width=y,d.height=w)}i&&o.setAttribute("data-main-rotation",n.rotation)}class kc{constructor(){const n=window.devicePixelRatio||1;this.sx=n,this.sy=n}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}}class Eo{#e=null;#t=null;#n;#r=null;#s=null;static#i=null;constructor(n){this.#n=n,Eo.#i||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const n=this.#e=document.createElement("div");n.classList.add("editToolbar","hidden"),n.setAttribute("role","toolbar");const e=this.#n._uiManager._signal;n.addEventListener("contextmenu",rr,{signal:e}),n.addEventListener("pointerdown",Eo.#c,{signal:e});const i=this.#r=document.createElement("div");i.className="buttons",n.append(i);const a=this.#n.toolbarPosition;if(a){const{style:c}=n,d="ltr"===this.#n._uiManager.direction?1-a[0]:a[0];c.insetInlineEnd=100*d+"%",c.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return this.#d(),n}get div(){return this.#e}static#c(n){n.stopPropagation()}#a(n){this.#n._focusEventsAllowed=!1,ir(n)}#u(n){this.#n._focusEventsAllowed=!0,ir(n)}#l(n){const e=this.#n._uiManager._signal;n.addEventListener("focusin",this.#a.bind(this),{capture:!0,signal:e}),n.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:e}),n.addEventListener("contextmenu",rr,{signal:e})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#s?.shown()}#d(){const{editorType:n,_uiManager:e}=this.#n,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",Eo.#i[n]),this.#l(i),i.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#r.append(i)}get#o(){const n=document.createElement("div");return n.className="divider",n}addAltText(n){var e=this;return te(function*(){const i=yield n.render();e.#l(i),e.#r.prepend(i,e.#o),e.#s=n})()}addColorPicker(n){this.#t=n;const e=n.renderButton();this.#l(e),this.#r.prepend(e,this.#o)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Mm{#e=null;#t=null;#n;constructor(n){this.#n=n}#r(){const n=this.#t=document.createElement("div");n.className="editToolbar",n.setAttribute("role","toolbar"),n.addEventListener("contextmenu",rr,{signal:this.#n._signal});const e=this.#e=document.createElement("div");return e.className="buttons",n.append(e),this.#i(),n}#s(n,e){let i=0,a=0;for(const c of n){const d=c.y+c.height;if(d<i)continue;const f=c.x+(e?c.width:0);d>i?(a=f,i=d):e?f>a&&(a=f):f<a&&(a=f)}return[e?1-a:a,i]}show(n,e,i){const[a,c]=this.#s(e,i),{style:d}=this.#t||=this.#r();n.append(this.#t),d.insetInlineEnd=100*a+"%",d.top=`calc(${100*c}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(){const n=document.createElement("button");n.className="highlightButton",n.tabIndex=0,n.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");n.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#n._signal;n.addEventListener("contextmenu",rr,{signal:i}),n.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:i}),this.#e.append(n)}}function Fc(o,n,e){for(const i of e)n.addEventListener(i,o[i].bind(o))}class Rh{#e=0;get id(){return"pdfjs_internal_editor_"+this.#e++}}class Do{#e=function kw(){if("function"==typeof crypto.randomUUID)return crypto.randomUUID();const o=new Uint8Array(32);return crypto.getRandomValues(o),Em(o)}();#t=0;#n=null;static get _isSVGFittingCanvas(){const i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;return a.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',je(this,"_isSVGFittingCanvas",a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),0===new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0])))}#r(n,e){var i=this;return te(function*(){i.#n||=new Map;let a=i.#n.get(n);if(null===a)return null;if(a?.bitmap)return a.refCounter+=1,a;try{let c;if(a||={bitmap:null,id:`image_${i.#e}_${i.#t++}`,refCounter:0,isSvg:!1},"string"==typeof e?(a.url=e,c=yield Pi(e,"blob")):e instanceof File?c=a.file=e:e instanceof Blob&&(c=e),"image/svg+xml"===c.type){const d=Do._isSVGFittingCanvas,f=new FileReader,g=new Image,v=new Promise((y,w)=>{g.onload=()=>{a.bitmap=g,a.isSvg=!0,y()},f.onload=te(function*(){const D=a.svgUrl=f.result;g.src=(yield d)?`${D}#svgView(preserveAspectRatio(none))`:D}),g.onerror=f.onerror=w});f.readAsDataURL(c),yield v}else a.bitmap=yield createImageBitmap(c);a.refCounter=1}catch(c){Te(c),a=null}return i.#n.set(n,a),a&&i.#n.set(a.id,a),a})()}getFromFile(n){var e=this;return te(function*(){const{lastModified:i,name:a,size:c,type:d}=n;return e.#r(`${i}_${a}_${c}_${d}`,n)})()}getFromUrl(n){var e=this;return te(function*(){return e.#r(n,n)})()}getFromBlob(n,e){var i=this;return te(function*(){const a=yield e;return i.#r(n,a)})()}getFromId(n){var e=this;return te(function*(){e.#n||=new Map;const i=e.#n.get(n);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return e.getFromFile(i.file);if(i.blobPromise){const{blobPromise:a}=i;return delete i.blobPromise,e.getFromBlob(i.id,a)}return e.getFromUrl(i.url)})()}getFromCanvas(n,e){this.#n||=new Map;let i=this.#n.get(n);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(n,i),this.#n.set(i.id,i),i}getSvgUrl(n){const e=this.#n.get(n);return e?.isSvg?e.svgUrl:null}deleteId(n){this.#n||=new Map;const e=this.#n.get(n);if(!e||(e.refCounter-=1,0!==e.refCounter))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(n){return n.startsWith(`image_${this.#e}_`)}}class Vw{#e=[];#t=!1;#n;#r=-1;constructor(n=128){this.#n=n}add({cmd:n,undo:e,post:i,mustExec:a,type:c=NaN,overwriteIfSameType:d=!1,keepUndo:f=!1}){if(a&&n(),this.#t)return;const g={cmd:n,undo:e,post:i,type:c};if(-1===this.#r)return this.#e.length>0&&(this.#e.length=0),this.#r=0,void this.#e.push(g);if(d&&this.#e[this.#r].type===c)return f&&(g.undo=this.#e[this.#r].undo),void(this.#e[this.#r]=g);const v=this.#r+1;v===this.#n?this.#e.splice(0,1):(this.#r=v,v<this.#e.length&&this.#e.splice(v)),this.#e.push(g)}undo(){if(-1===this.#r)return;this.#t=!0;const{undo:n,post:e}=this.#e[this.#r];n(),e?.(),this.#t=!1,this.#r-=1}redo(){if(this.#r<this.#e.length-1){this.#r+=1,this.#t=!0;const{cmd:n,post:e}=this.#e[this.#r];n(),e?.(),this.#t=!1}}hasSomethingToUndo(){return-1!==this.#r}hasSomethingToRedo(){return this.#r<this.#e.length-1}cleanType(n){if(-1!==this.#r){for(let e=this.#r;e>=0;e--)if(this.#e[e].type!==n)return this.#e.splice(e+1,this.#r-e),void(this.#r=e);this.#e.length=0,this.#r=-1}}destroy(){this.#e=null}}class Ya{constructor(n){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Vt.platform;for(const[i,a,c={}]of n)for(const d of i){const f=d.startsWith("mac+");e&&f?(this.callbacks.set(d.slice(4),{callback:a,options:c}),this.allKeys.add(d.split("+").at(-1))):!e&&!f&&(this.callbacks.set(d,{callback:a,options:c}),this.allKeys.add(d.split("+").at(-1)))}}#e(n){n.altKey&&this.buffer.push("alt"),n.ctrlKey&&this.buffer.push("ctrl"),n.metaKey&&this.buffer.push("meta"),n.shiftKey&&this.buffer.push("shift"),this.buffer.push(n.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(n,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#e(e));if(!i)return;const{callback:a,options:{bubbles:c=!1,args:d=[],checker:f=null}}=i;f&&!f(n,e)||(a.bind(n,...d,e)(),c||ir(e))}}class xh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const n=new Map([["CanvasText",null],["Canvas",null]]);return function Bw(o){const n=document.createElement("span");n.style.visibility="hidden",document.body.append(n);for(const e of o.keys()){n.style.color=e;const i=window.getComputedStyle(n).color;o.set(e,gs(i))}n.remove()}(n),je(this,"_colors",n)}convert(n){const e=gs(n);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,a]of this._colors)if(a.every((c,d)=>c===e[d]))return xh._colorsMapping.get(i);return e}getHexCode(n){const e=this._colors.get(n);return e?se.makeHexColor(...e):n}}let Qa=(()=>{class o{#e=new AbortController;#t=null;#n=new Map;#r=new Map;#s=null;#i=null;#c=null;#a=new Vw;#u=null;#l=null;#d=0;#o=new Set;#h=null;#f=null;#p=new Set;_editorUndoBar=null;#m=!1;#g=!1;#v=!1;#y=null;#w=null;#_=null;#C=null;#A=!1;#S=null;#T=new Rh;#E=!1;#M=!1;#I=null;#R=null;#O=null;#j=null;#D=Re.NONE;#b=new Set;#P=null;#B=null;#V=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#F=[0,0];#N=null;#U=null;#W=null;#k=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=o.prototype,i=f=>f.#U.contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&f.hasSomethingToControl(),a=(f,{target:g})=>{if(g instanceof HTMLInputElement){const{type:v}=g;return"text"!==v&&"number"!==v}return!0},c=this.TRANSLATE_SMALL,d=this.TRANSLATE_BIG;return je(this,"_keyboardManager",new Ya([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:a}],[["ctrl+z","mac+meta+z"],e.undo,{checker:a}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:a}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:a}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(f,{target:g})=>!(g instanceof HTMLButtonElement)&&f.#U.contains(g)&&!f.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(f,{target:g})=>!(g instanceof HTMLButtonElement)&&f.#U.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-c,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-d,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[c,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[d,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-c],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-d],checker:i}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,c],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,d],checker:i}]]))}constructor(e,i,a,c,d,f,g,v,y,w,D,A){const S=this._signal=this.#e.signal;this.#U=e,this.#W=i,this.#s=a,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:S}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),c._on("setpreference",this.onSetPreference.bind(this),{signal:S}),c._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:S}),this.#te(),this.#se(),this.#X(),this.#i=d.annotationStorage,this.#y=d.filterFactory,this.#B=f,this.#C=g||null,this.#m=v,this.#g=y,this.#v=w,this.#j=D||null,this.viewParameters={realScale:Ni.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=A||null}destroy(){this.#k?.resolve(),this.#k=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#r.values())e.destroy();this.#r.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#b.clear(),this.#a.destroy(),this.#s?.destroy(),this.#S?.hide(),this.#S=null,this.#w&&(clearTimeout(this.#w),this.#w=null),this.#N&&(clearTimeout(this.#N),this.#N=null),this._editorUndoBar?.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#j}get useNewAltTextFlow(){return this.#g}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return je(this,"hcmFilter",this.#B?this.#y.addHCMFilter(this.#B.foreground,this.#B.background):"none")}get direction(){return je(this,"direction",getComputedStyle(this.#U).direction)}get highlightColors(){return je(this,"highlightColors",this.#C?new Map(this.#C.split(",").map(e=>e.split("=").map(i=>i.trim()))):null)}get highlightColorNames(){return je(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#l=e}setMainHighlightColorPicker(e){this.#O=e}editAltText(e,i=!1){this.#s?.editAltText(this,e,i)}switchToMode(e,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,i){this._eventBus.dispatch("setpreference",{source:this,name:e,value:i})}onSetPreference({name:e,value:i}){"enableNewAltTextWhenAddingImage"===e&&(this.#v=i)}onPageChanging({pageNumber:e}){this.#d=e-1}focusMainContainer(){this.#U.focus()}findParent(e,i){for(const a of this.#r.values()){const{x:c,y:d,width:f,height:g}=a.div.getBoundingClientRect();if(e>=c&&e<=c+f&&i>=d&&i<=d+g)return a}return null}disableUserSelect(e=!1){this.#W.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Ni.PDF_TO_CSS_UNITS;for(const i of this.#p)i.onScaleChanging();this.#l?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#z({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#q(e){const{currentLayer:i}=this;if(i.hasTextLayer(e))return i;for(const a of this.#r.values())if(a.hasTextLayer(e))return a;return null}highlightSelection(e=""){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:a,anchorOffset:c,focusNode:d,focusOffset:f}=i,g=i.toString(),y=this.#z(i).closest(".textLayer"),w=this.getSelectionBoxes(y);if(!w)return;i.empty();const D=this.#q(y),A=this.#D===Re.NONE,S=()=>{D?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:w,anchorNode:a,anchorOffset:c,focusNode:d,focusOffset:f,text:g}),A&&this.showAllEditors("highlight",!0,!0)};A?this.switchToMode(Re.HIGHLIGHT,S):S()}#J(){const e=document.getSelection();if(!e||e.isCollapsed)return;const a=this.#z(e).closest(".textLayer"),c=this.getSelectionBoxes(a);c&&(this.#S||=new Mm(this),this.#S.show(a,c,"ltr"===this.direction))}addToAnnotationStorage(e){!e.isEmpty()&&this.#i&&!this.#i.has(e.id)&&this.#i.setValue(e.id,e)}#ee(){const e=document.getSelection();if(!e||e.isCollapsed)return void(this.#P&&(this.#S?.hide(),this.#P=null,this.#x({hasSelectedText:!1})));const{anchorNode:i}=e;if(i===this.#P)return;const c=this.#z(e).closest(".textLayer");if(c){if(this.#S?.hide(),this.#P=i,this.#x({hasSelectedText:!0}),(this.#D===Re.HIGHLIGHT||this.#D===Re.NONE)&&(this.#D===Re.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const d=this.#D===Re.HIGHLIGHT?this.#q(c):null;d?.toggleDrawing();const f=new AbortController,g=this.combinedSignal(f),v=y=>{"pointerup"===y.type&&0!==y.button||(f.abort(),d?.toggleDrawing(!0),"pointerup"===y.type&&this.#G("main_toolbar"))};window.addEventListener("pointerup",v,{signal:g}),window.addEventListener("blur",v,{signal:g})}}else this.#P&&(this.#S?.hide(),this.#P=null,this.#x({hasSelectedText:!1}))}#G(e=""){this.#D===Re.HIGHLIGHT?this.highlightSelection(e):this.#m&&this.#J()}#te(){document.addEventListener("selectionchange",this.#ee.bind(this),{signal:this._signal})}#ne(){if(this.#_)return;this.#_=new AbortController;const e=this.combinedSignal(this.#_);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#re(){this.#_?.abort(),this.#_=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#G("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const i of this.#b)if(i.div.contains(e)){this.#R=[i,e],i._focusEventsAllowed=!1;break}}focus(){if(!this.#R)return;const[e,i]=this.#R;this.#R=null,i.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#X(){if(this.#I)return;this.#I=new AbortController;const e=this.combinedSignal(this.#I);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ie(){this.#I?.abort(),this.#I=null}#K(){if(this.#u)return;this.#u=new AbortController;const e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#Y(){this.#u?.abort(),this.#u=null}#se(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#X(),this.#K()}removeEditListeners(){this.#ie(),this.#Y()}dragOver(e){for(const{type:i}of e.dataTransfer.items)for(const a of this.#f)if(a.isHandlingMimeForPasting(i))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const i of e.dataTransfer.items)for(const a of this.#f)if(a.isHandlingMimeForPasting(i.type))return a.paste(i,this.currentLayer),void e.preventDefault()}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const a of this.#b){const c=a.serialize(!0);c&&i.push(c)}0!==i.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(e){this.copy(e),this.delete()}paste(e){var i=this;return te(function*(){e.preventDefault();const{clipboardData:a}=e;for(const f of a.items)for(const g of i.#f)if(g.isHandlingMimeForPasting(f.type))return void g.paste(f,i.currentLayer);let c=a.getData("application/pdfjs");if(!c)return;try{c=JSON.parse(c)}catch(f){return void Te(`paste: "${f.message}".`)}if(!Array.isArray(c))return;i.unselectAll();const d=i.currentLayer;try{const f=[];for(const y of c){const w=yield d.deserialize(y);if(!w)return;f.push(w)}const g=()=>{for(const y of f)i.#Q(y);i.#Z(f)};i.addCommands({cmd:g,undo:()=>{for(const y of f)y.remove()},mustExec:!0})}catch(f){Te(`paste: "${f.message}".`)}})()}keydown(e){!this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!0),this.#D!==Re.NONE&&!this.isEditorHandlingKeyboard&&o._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#G("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu")}}#x(e){Object.entries(e).some(([a,c])=>this.#H[a]!==c)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,e)}),this.#D===Re.HIGHLIGHT&&!1===e.hasSelectedEditor&&this.#L([[Ue.HIGHLIGHT_FREE,!0]]))}#L(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ne(),this.#K(),this.#x({isEditing:this.#D!==Re.NONE,isEmpty:this.#$(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#re(),this.#Y(),this.#x({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#f){this.#f=e;for(const i of this.#f)this.#L(i.defaultPropertiesToUpdate)}}getId(){return this.#T.id}get currentLayer(){return this.#r.get(this.#d)}getLayer(e){return this.#r.get(e)}get currentPageIndex(){return this.#d}addLayer(e){this.#r.set(e.pageIndex,e),this.#E?e.enable():e.disable()}removeLayer(e){this.#r.delete(e.pageIndex)}updateMode(e,i=null,a=!1){var c=this;return te(function*(){if(c.#D!==e&&(!c.#k||(yield c.#k.promise,c.#k))){if(c.#k=Promise.withResolvers(),c.#D=e,e===Re.NONE)return c.setEditingState(!1),c.#ae(),c._editorUndoBar?.hide(),void c.#k.resolve();c.setEditingState(!0),yield c.#oe(),c.unselectAll();for(const d of c.#r.values())d.updateMode(e);if(!i)return a&&c.addNewEditorFromKeyboard(),void c.#k.resolve();for(const d of c.#n.values())d.annotationElementId===i?(c.setSelected(d),d.enterInEditMode()):d.unselect();c.#k.resolve()}})()}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#D&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,i){if(this.#f){switch(e){case Ue.CREATE:return void this.currentLayer.addNewEditor();case Ue.HIGHLIGHT_DEFAULT_COLOR:this.#O?.updateColor(i);break;case Ue.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#V||=new Map).set(e,i),this.showAllEditors("highlight",i)}for(const a of this.#b)a.updateParams(e,i);for(const a of this.#f)a.updateDefaultParams(e,i)}}showAllEditors(e,i,a=!1){for(const d of this.#n.values())d.editorType===e&&d.show(i);(this.#V?.get(Ue.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#L([[Ue.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(e=!1){if(this.#M!==e){this.#M=e;for(const i of this.#r.values())e?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",e)}}#oe(){var e=this;return te(function*(){if(!e.#E){e.#E=!0;const i=[];for(const a of e.#r.values())i.push(a.enable());yield Promise.all(i);for(const a of e.#n.values())a.enable()}})()}#ae(){if(this.unselectAll(),this.#E){this.#E=!1;for(const e of this.#r.values())e.disable();for(const e of this.#n.values())e.disable()}}getEditors(e){const i=[];for(const a of this.#n.values())a.pageIndex===e&&i.push(a);return i}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.focusMainContainer(),this.#w=null},0)),this.#n.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#o.has(e.annotationElementId))&&this.#i?.remove(e.id)}addDeletedAnnotationElement(e){this.#o.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#o.has(e)}removeDeletedAnnotationElement(e){this.#o.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#Q(e){const i=this.#r.get(e.pageIndex);i?i.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#L(e.propertiesToUpdate))}get#le(){let e=null;for(e of this.#b);return e}updateUI(e){this.#le===e&&this.#L(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#L(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#b.has(e))return this.#b.delete(e),e.unselect(),void this.#x({hasSelectedEditor:this.hasSelection});this.#b.add(e),e.select(),this.#L(e.propertiesToUpdate),this.#x({hasSelectedEditor:!0})}setSelected(e){this.#l?.commitOrRemove();for(const i of this.#b)i!==e&&i.unselect();this.#b.clear(),this.#b.add(e),e.select(),this.#L(e.propertiesToUpdate),this.#x({hasSelectedEditor:!0})}isSelected(e){return this.#b.has(e)}get firstSelectedEditor(){return this.#b.values().next().value}unselect(e){e.unselect(),this.#b.delete(e),this.#x({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#b.size}get isEnterHandled(){return 1===this.#b.size&&this.firstSelectedEditor.isEnterHandled}undo(){this.#a.undo(),this.#x({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#$()}),this._editorUndoBar?.hide()}redo(){this.#a.redo(),this.#x({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#$()})}addCommands(e){this.#a.add(e),this.#x({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#$()})}cleanUndoStack(e){this.#a.cleanType(e)}#$(){if(0===this.#n.size)return!0;if(1===this.#n.size)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const i=e?[e]:[...this.#b],c=()=>{for(const d of i)this.#Q(d)};this.addCommands({cmd:()=>{this._editorUndoBar?.show(c,1===i.length?i[0].editorType:i.length);for(const d of i)d.remove()},undo:c,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Z(e){for(const i of this.#b)i.unselect();this.#b.clear();for(const i of e)i.isEmpty()||(this.#b.add(i),i.select());this.#x({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#b)e.commit();this.#Z(this.#n.values())}unselectAll(){if((!this.#t||(this.#t.commitOrRemove(),this.#D===Re.NONE))&&!this.#l?.commitOrRemove()&&this.hasSelection){for(const e of this.#b)e.unselect();this.#b.clear(),this.#x({hasSelectedEditor:!1})}}translateSelectedEditors(e,i,a=!1){if(a||this.commitOrRemove(),!this.hasSelection)return;this.#F[0]+=e,this.#F[1]+=i;const[c,d]=this.#F,f=[...this.#b];this.#N&&clearTimeout(this.#N),this.#N=setTimeout(()=>{this.#N=null,this.#F[0]=this.#F[1]=0,this.addCommands({cmd:()=>{for(const v of f)this.#n.has(v.id)&&v.translateInPage(c,d)},undo:()=>{for(const v of f)this.#n.has(v.id)&&v.translateInPage(-c,-d)},mustExec:!1})},1e3);for(const v of f)v.translateInPage(e,i)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#h=new Map;for(const e of this.#b)this.#h.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#h)return!1;this.disableUserSelect(!1);const e=this.#h;this.#h=null;let i=!1;for(const[{x:c,y:d,pageIndex:f},g]of e)g.newX=c,g.newY=d,g.newPageIndex=f,i||=c!==g.savedX||d!==g.savedY||f!==g.savedPageIndex;if(!i)return!1;const a=(c,d,f,g)=>{if(this.#n.has(c.id)){const v=this.#r.get(g);v?c._setParentAndPosition(v,d,f):(c.pageIndex=g,c.x=d,c.y=f)}};return this.addCommands({cmd:()=>{for(const[c,{newX:d,newY:f,newPageIndex:g}]of e)a(c,d,f,g)},undo:()=>{for(const[c,{savedX:d,savedY:f,savedPageIndex:g}]of e)a(c,d,f,g)},mustExec:!0}),!0}dragSelectedEditors(e,i){if(this.#h)for(const a of this.#h.keys())a.drag(e,i)}rebuild(e){if(null===e.parent){const i=this.getLayer(e.pageIndex);i?(i.changeParent(e),i.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||1===this.#b.size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#D}get imageManager(){return je(this,"imageManager",new Do)}getSelectionBoxes(e){if(!e)return null;const i=document.getSelection();for(let y=0,w=i.rangeCount;y<w;y++)if(!e.contains(i.getRangeAt(y).commonAncestorContainer))return null;const{x:a,y:c,width:d,height:f}=e.getBoundingClientRect();let g;switch(e.getAttribute("data-main-rotation")){case"90":g=(y,w,D,A)=>({x:(w-c)/f,y:1-(y+D-a)/d,width:A/f,height:D/d});break;case"180":g=(y,w,D,A)=>({x:1-(y+D-a)/d,y:1-(w+A-c)/f,width:D/d,height:A/f});break;case"270":g=(y,w,D,A)=>({x:1-(w+A-c)/f,y:(y-a)/d,width:A/f,height:D/d});break;default:g=(y,w,D,A)=>({x:(y-a)/d,y:(w-c)/f,width:D/d,height:A/f})}const v=[];for(let y=0,w=i.rangeCount;y<w;y++){const D=i.getRangeAt(y);if(!D.collapsed)for(const{x:A,y:S,width:T,height:x}of D.getClientRects())0===T||0===x||v.push(g(A,S,T,x))}return 0===v.length?null:v}addChangedExistingAnnotation({annotationElementId:e,id:i}){(this.#c||=new Map).set(e,i)}removeChangedExistingAnnotation({annotationElementId:e}){this.#c?.delete(e)}renderAnnotationElement(e){const i=this.#c?.get(e.data.id);if(!i)return;const a=this.#i.getRawValue(i);a&&(this.#D===Re.NONE&&!a.hasBeenModified||a.renderAnnotationElement(e))}}return o})(),Rm=(()=>{class o{#e=null;#t=!1;#n=null;#r=null;#s=null;#i=null;#c=!1;#a=null;#u=null;#l=null;#d=null;#o=!1;static#h=null;static _l10n=null;constructor(e){this.#u=e,this.#o=e._uiManager.useNewAltTextFlow,o.#h||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){o._l10n??=e}render(){var e=this;return te(function*(){const i=e.#n=document.createElement("button");i.className="altText",i.tabIndex="0";const a=e.#r=document.createElement("span");i.append(a),e.#o?(i.classList.add("new"),i.setAttribute("data-l10n-id",o.#h.missing),a.setAttribute("data-l10n-id",o.#h["missing-label"])):(i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),a.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const c=e.#u._uiManager._signal;i.addEventListener("contextmenu",rr,{signal:c}),i.addEventListener("pointerdown",f=>f.stopPropagation(),{signal:c});const d=f=>{f.preventDefault(),e.#u._uiManager.editAltText(e.#u),e.#o&&e.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:e.#f}})};return i.addEventListener("click",d,{capture:!0,signal:c}),i.addEventListener("keydown",f=>{f.target===i&&"Enter"===f.key&&(e.#c=!0,d(f))},{signal:c}),yield e.#p(),i})()}get#f(){return(this.#e?"added":null===this.#e&&this.guessedText&&"review")||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#c}),this.#c=!1)}isEmpty(){return this.#o?null===this.#e:!this.#e&&!this.#t}hasData(){return this.#o?null!==this.#e||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}setGuessedText(e){var i=this;return te(function*(){null===i.#e&&(i.#l=e,i.#d=yield o._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),i.#p())})()}toggleAltTextBadge(e=!1){if(!this.#o||this.#e)return this.#a?.remove(),void(this.#a=null);if(!this.#a){const i=this.#a=document.createElement("div");i.className="noAltTextBadge",this.#u.div.append(i)}this.#a.classList.toggle("hidden",!e)}serialize(e){let i=this.#e;return!e&&this.#l===i&&(i=this.#d),{altText:i,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:i,guessedText:a,textWithDisclaimer:c,cancel:d=!1}){a&&(this.#l=a,this.#d=c),(this.#e!==e||this.#t!==i)&&(d||(this.#e=e,this.#t=i),this.#p())}toggle(e=!1){this.#n&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#n.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#f}})}destroy(){this.#n?.remove(),this.#n=null,this.#r=null,this.#s=null,this.#a?.remove(),this.#a=null}#p(){var e=this;return te(function*(){const i=e.#n;if(!i)return;if(e.#o){if(i.classList.toggle("done",!!e.#e),i.setAttribute("data-l10n-id",o.#h[e.#f]),e.#r?.setAttribute("data-l10n-id",o.#h[`${e.#f}-label`]),!e.#e)return void e.#s?.remove()}else{if(!e.#e&&!e.#t)return i.classList.remove("done"),void e.#s?.remove();i.classList.add("done"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let a=e.#s;if(!a){e.#s=a=document.createElement("span"),a.className="tooltip",a.setAttribute("role","tooltip"),a.id=`alt-text-tooltip-${e.#u.id}`;const d=100,f=e.#u._uiManager._signal;f.addEventListener("abort",()=>{clearTimeout(e.#i),e.#i=null},{once:!0}),i.addEventListener("mouseenter",()=>{e.#i=setTimeout(()=>{e.#i=null,e.#s.classList.add("show"),e.#u._reportTelemetry({action:"alt_text_tooltip"})},d)},{signal:f}),i.addEventListener("mouseleave",()=>{e.#i&&(clearTimeout(e.#i),e.#i=null),e.#s?.classList.remove("show")},{signal:f})}e.#t?a.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(a.removeAttribute("data-l10n-id"),a.textContent=e.#e),a.parentNode||i.append(a),e.#u.getImageForAltText()?.setAttribute("aria-describedby",a.id)})()}}return o})();class Oe{#e=null;#t=null;#n=null;#r=!1;#s=null;#i="";#c=!1;#a=null;#u=null;#l=null;#d=null;#o="";#h=!1;#f=null;#p=!1;#m=!1;#g=!1;#v=null;#y=0;#w=0;#_=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#C=!1;#A=Oe._zIndex++;static _borderLineWidth=-1;static _colorManager=new xh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const n=Oe.prototype._resizeWithKeyboard,e=Qa.TRANSLATE_SMALL,i=Qa.TRANSLATE_BIG;return je(this,"_resizerKeyboardManager",new Ya([[["ArrowLeft","mac+ArrowLeft"],n,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],n,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],n,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],n,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n,{args:[0,i]}],[["Escape","mac+Escape"],Oe.prototype._stopResizingWithKeyboard]]))}constructor(n){this.parent=n.parent,this.id=n.id,this.width=this.height=null,this.pageIndex=n.parent.pageIndex,this.name=n.name,this.div=null,this._uiManager=n.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=n.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:a,pageX:c,pageY:d}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[c,d];const[f,g]=this.parentDimensions;this.x=n.x/f,this.y=n.y/g,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return je(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(n){const e=new Nh({id:n.parent.getNextId(),parent:n.parent,uiManager:n._uiManager});e.annotationElementId=n.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(n,e){if(Oe._l10n??=n,Oe._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),-1!==Oe._borderLineWidth)return;const i=getComputedStyle(document.documentElement);Oe._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(n,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(n){return!1}static paste(n,e){Je("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#C}set _isDraggable(n){this.#C=n,this.div?.classList.toggle("draggable",n)}get isEnterHandled(){return!0}center(){const[n,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*n),this.y+=this.width*n/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*n),this.y-=this.width*n/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(n){this._uiManager.addCommands(n)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#A}setParent(n){null!==n?(this.pageIndex=n.pageIndex,this.pageDimensions=n.pageDimensions):this.#N(),this.parent=n}focusin(n){this._focusEventsAllowed&&(this.#h?this.#h=!1:this.parent.setSelected(this))}focusout(n){!this._focusEventsAllowed||!this.isAttachedToDOM||n.relatedTarget?.closest(`#${this.id}`)||(n.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(n,e,i,a){const[c,d]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(n+i)/c,this.y=(e+a)/d,this.fixAndSetPosition()}#S([n,e],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/n,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(n,e){this.#S(this.parentDimensions,n,e)}translateInPage(n,e){this.#f||=[this.x,this.y,this.width,this.height],this.#S(this.pageDimensions,n,e),this.div.scrollIntoView({block:"nearest"})}drag(n,e){this.#f||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,c]}=this;if(this.x+=n/a,this.y+=e/c,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:w,y:D}=this.div.getBoundingClientRect();this.parent.findNewParent(this,w,D)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:d,y:f}=this;const[g,v]=this.getBaseTranslation();d+=g,f+=v;const{style:y}=i;y.left=`${(100*d).toFixed(2)}%`,y.top=`${(100*f).toFixed(2)}%`,this._onTranslating(d,f),i.scrollIntoView({block:"nearest"})}_onTranslating(n,e){}_onTranslated(n,e){}get _hasBeenMoved(){return!!this.#f&&(this.#f[0]!==this.x||this.#f[1]!==this.y)}get _hasBeenResized(){return!!this.#f&&(this.#f[2]!==this.width||this.#f[3]!==this.height)}getBaseTranslation(){const[n,e]=this.parentDimensions,{_borderLineWidth:i}=Oe,a=i/n,c=i/e;switch(this.rotation){case 90:return[-a,c];case 180:return[a,c];case 270:return[a,-c];default:return[-a,-c]}}get _mustFixPosition(){return!0}fixAndSetPosition(n=this.rotation){const{div:{style:e},pageDimensions:[i,a]}=this;let{x:c,y:d,width:f,height:g}=this;if(f*=i,g*=a,c*=i,d*=a,this._mustFixPosition)switch(n){case 0:c=Math.max(0,Math.min(i-f,c)),d=Math.max(0,Math.min(a-g,d));break;case 90:c=Math.max(0,Math.min(i-g,c)),d=Math.min(a,Math.max(f,d));break;case 180:c=Math.min(i,Math.max(f,c)),d=Math.min(a,Math.max(g,d));break;case 270:c=Math.min(i,Math.max(g,c)),d=Math.max(0,Math.min(a-f,d))}this.x=c/=i,this.y=d/=a;const[v,y]=this.getBaseTranslation();c+=v,d+=y,e.left=`${(100*c).toFixed(2)}%`,e.top=`${(100*d).toFixed(2)}%`,this.moveInDOM()}static#T(n,e,i){switch(i){case 90:return[e,-n];case 180:return[-n,-e];case 270:return[-e,n];default:return[n,e]}}screenToPageTranslation(n,e){return Oe.#T(n,e,this.parentRotation)}pageTranslationToScreen(n,e){return Oe.#T(n,e,360-this.parentRotation)}#E(n){switch(n){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:n,pageDimensions:[e,i]}=this;return[e*n,i*n]}setDims(n,e){const[i,a]=this.parentDimensions,{style:c}=this.div;c.width=`${(100*n/i).toFixed(2)}%`,this.#c||(c.height=`${(100*e/a).toFixed(2)}%`)}fixDims(){const{style:n}=this.div,{height:e,width:i}=n,a=i.endsWith("%"),c=!this.#c&&e.endsWith("%");if(a&&c)return;const[d,f]=this.parentDimensions;a||(n.width=`${(100*parseFloat(i)/d).toFixed(2)}%`),!this.#c&&!c&&(n.height=`${(100*parseFloat(e)/f).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#M(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const n=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of n){const a=document.createElement("div");this.#a.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#I.bind(this,i),{signal:e}),a.addEventListener("contextmenu",rr,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#a)}#I(n,e){e.preventDefault();const{isMac:i}=Vt.platform;if(0!==e.button||e.ctrlKey&&i)return;this.#n?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#u=[e.screenX,e.screenY];const c=new AbortController,d=this._uiManager.combinedSignal(c);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#j.bind(this,n),{passive:!0,capture:!0,signal:d}),window.addEventListener("touchmove",ir,{passive:!1,signal:d}),window.addEventListener("contextmenu",rr,{signal:d}),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const f=this.parent.div.style.cursor,g=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const v=()=>{c.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=f,this.div.style.cursor=g,this.#O()};window.addEventListener("pointerup",v,{signal:d}),window.addEventListener("blur",v,{signal:d})}#R(n,e,i,a){this.width=i,this.height=a,this.x=n,this.y=e;const[c,d]=this.parentDimensions;this.setDims(c*i,d*a),this.fixAndSetPosition(),this._onResized()}_onResized(){}#O(){if(!this.#l)return;const{savedX:n,savedY:e,savedWidth:i,savedHeight:a}=this.#l;this.#l=null;const c=this.x,d=this.y,f=this.width,g=this.height;c===n&&d===e&&f===i&&g===a||this.addCommands({cmd:this.#R.bind(this,c,d,f,g),undo:this.#R.bind(this,n,e,i,a),mustExec:!0})}#j(n,e){const[i,a]=this.parentDimensions,c=this.x,d=this.y,f=this.width,g=this.height,v=Oe.MIN_SIZE/i,y=Oe.MIN_SIZE/a,w=ee=>Math.round(1e4*ee)/1e4,D=this.#E(this.rotation),A=(ee,we)=>[D[0]*ee+D[2]*we,D[1]*ee+D[3]*we],S=this.#E(360-this.rotation);let x,M,k=!1,O=!1;switch(n){case"topLeft":k=!0,x=(ee,we)=>[0,0],M=(ee,we)=>[ee,we];break;case"topMiddle":x=(ee,we)=>[ee/2,0],M=(ee,we)=>[ee/2,we];break;case"topRight":k=!0,x=(ee,we)=>[ee,0],M=(ee,we)=>[0,we];break;case"middleRight":O=!0,x=(ee,we)=>[ee,we/2],M=(ee,we)=>[0,we/2];break;case"bottomRight":k=!0,x=(ee,we)=>[ee,we],M=(ee,we)=>[0,0];break;case"bottomMiddle":x=(ee,we)=>[ee/2,we],M=(ee,we)=>[ee/2,0];break;case"bottomLeft":k=!0,x=(ee,we)=>[0,we],M=(ee,we)=>[ee,0];break;case"middleLeft":O=!0,x=(ee,we)=>[0,we/2],M=(ee,we)=>[ee,we/2]}const j=x(f,g),B=M(f,g);let z=A(...B);const W=w(c+z[0]),oe=w(d+z[1]);let Be,yt,ge=1,Ke=1;if(e.fromKeyboard)({deltaX:Be,deltaY:yt}=e);else{const{screenX:ee,screenY:we}=e,[Dr,Mn]=this.#u;[Be,yt]=this.screenToPageTranslation(ee-Dr,we-Mn),this.#u[0]=ee,this.#u[1]=we}if([Be,yt]=[S[0]*(ee=Be/i)+S[2]*(we=yt/a),S[1]*ee+S[3]*we],k){const ee=Math.hypot(f,g);ge=Ke=Math.max(Math.min(Math.hypot(B[0]-j[0]-Be,B[1]-j[1]-yt)/ee,1/f,1/g),v/f,y/g)}else O?ge=Math.max(v,Math.min(1,Math.abs(B[0]-j[0]-Be)))/f:Ke=Math.max(y,Math.min(1,Math.abs(B[1]-j[1]-yt)))/g;var ee,we;const zt=w(f*ge),We=w(g*Ke);z=A(...M(zt,We));const un=W-z[0],st=oe-z[1];this.#f||=[this.x,this.y,this.width,this.height],this.width=zt,this.height=We,this.x=un,this.y=st,this.setDims(i*zt,a*We),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}addEditToolbar(){var n=this;return te(function*(){return n._editToolbar||n.#m||(n._editToolbar=new Eo(n),n.div.append(n._editToolbar.render()),n.#n&&(yield n._editToolbar.addAltText(n.#n))),n._editToolbar})()}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(n){const e=this._editToolbar?.div;e?e.before(n):this.div.append(n)}getClientDimensions(){return this.div.getBoundingClientRect()}addAltTextButton(){var n=this;return te(function*(){n.#n||(Rm.initialize(Oe._l10n),n.#n=new Rm(n),n.#e&&(n.#n.data=n.#e,n.#e=null),yield n.addEditToolbar())})()}get altTextData(){return this.#n?.data}set altTextData(n){this.#n&&(this.#n.data=n)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(n){var e=this;return te(function*(){yield e.#n?.setGuessedText(n)})()}serializeAltText(n){return this.#n?.serialize(n)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#r?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#P();const[n,e]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*e/n).toFixed(2)}%`,this.div.style.maxHeight=`${(100*n/e).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),Fc(this,this.div,["pointerdown"]),this._uiManager._editorUndoBar?.hide(),this.div}pointerdown(n){const{isMac:e}=Vt.platform;0!==n.button||n.ctrlKey&&e?n.preventDefault():(this.#h=!0,this._isDraggable?this.#b(n):this.#D(n))}get isSelected(){return this._uiManager.isSelected(this)}#D(n){const{isMac:e}=Vt.platform;n.ctrlKey&&!e||n.shiftKey||n.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#b(n){const{isSelected:e}=this;this._uiManager.setUpDragSession();const i=new AbortController,a=this._uiManager.combinedSignal(i),c={capture:!0,passive:!1,signal:a},d=g=>{i.abort(),this.#s=null,this.#h=!1,this._uiManager.endDragSession()||this.#D(g)};e&&(this.#y=n.clientX,this.#w=n.clientY,this.#s=n.pointerId,this.#i=n.pointerType,window.addEventListener("pointermove",g=>{const{clientX:v,clientY:y,pointerId:w}=g;if(w!==this.#s)return void ir(g);const[D,A]=this.screenToPageTranslation(v-this.#y,y-this.#w);this.#y=v,this.#w=y,this._uiManager.dragSelectedEditors(D,A)},c),window.addEventListener("touchmove",ir,c),window.addEventListener("pointerdown",g=>{g.isPrimary&&g.pointerType===this.#i&&d(g),ir(g)},c)),this._onStartDragging();const f=g=>{if(!this.#s||this.#s===g.pointerId)return d(g),void this._onStopDragging();ir(g)};window.addEventListener("pointerup",f,{signal:a}),window.addEventListener("blur",f,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(n,e,i){n.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(n,e,i=this.rotation){const a=this.parentScale,[c,d]=this.pageDimensions,[f,g]=this.pageTranslation,v=n/a,y=e/a,w=this.x*c,D=this.y*d,A=this.width*c,S=this.height*d;switch(i){case 0:return[w+v+f,d-D-y-S+g,w+v+A+f,d-D-y+g];case 90:return[w+y+f,d-D+v+g,w+y+S+f,d-D+v+A+g];case 180:return[w-v-A+f,d-D+y+g,w-v+f,d-D+y+S+g];case 270:return[w-y-S+f,d-D-v-A+g,w-y+f,d-D-v+g];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(n,e){const[i,a,c,d]=n,f=c-i,g=d-a;switch(this.rotation){case 0:return[i,e-d,f,g];case 90:return[i,e-a,g,f];case 180:return[c,e-a,f,g];case 270:return[c,e-d,g,f];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#m=!0}disableEditMode(){this.#m=!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#g}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:n,left:e,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:c,innerWidth:d}=window;return e<d&&a>0&&n<c&&i>0}#P(){if(this.#d||!this.div)return;this.#d=new AbortController;const n=this._uiManager.combinedSignal(this.#d);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:n}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:n})}rebuild(){this.#P()}rotate(n){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(n=!1,e=null){Je("An editor must be serializable")}static deserialize(n,e,i){var a=this;return te(function*(){const c=new a.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});c.rotation=n.rotation,c.#e=n.accessibilityData;const[d,f]=c.pageDimensions,[g,v,y,w]=c.getRectInCurrentCoords(n.rect,f);return c.x=g/d,c.y=v/f,c.width=y/d,c.height=w/f,c})()}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.#d?.abort(),this.#d=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#N(),this.removeEditToolbar(),this.#_){for(const n of this.#_.values())clearTimeout(n);this.#_=null}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#M(),this.#a.classList.remove("hidden"),Fc(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(n){if(!this.isResizable||n.target!==this.div||"Enter"!==n.key)return;this._uiManager.setSelected(this),this.#l={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#a.children;if(!this.#t){this.#t=Array.from(e);const d=this.#B.bind(this),f=this.#V.bind(this),g=this._uiManager._signal;for(const v of this.#t){const y=v.getAttribute("data-resizer-name");v.setAttribute("role","spinbutton"),v.addEventListener("keydown",d,{signal:g}),v.addEventListener("blur",f,{signal:g}),v.addEventListener("focus",this.#H.bind(this,y),{signal:g}),v.setAttribute("data-l10n-id",Oe._l10nResizer[y])}}const i=this.#t[0];let a=0;for(const d of e){if(d===i)break;a++}const c=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(c!==a){if(c<a)for(let f=0;f<a-c;f++)this.#a.append(this.#a.firstChild);else if(c>a)for(let f=0;f<c-a;f++)this.#a.firstChild.before(this.#a.lastChild);let d=0;for(const f of e){const v=this.#t[d++].getAttribute("data-resizer-name");f.setAttribute("data-l10n-id",Oe._l10nResizer[v])}}this.#F(0),this.#g=!0,this.#a.firstChild.focus({focusVisible:!0}),n.preventDefault(),n.stopImmediatePropagation()}#B(n){Oe._resizerKeyboardManager.exec(this,n)}#V(n){this.#g&&n.relatedTarget?.parentNode!==this.#a&&this.#N()}#H(n){this.#o=this.#g?n:""}#F(n){if(this.#t)for(const e of this.#t)e.tabIndex=n}_resizeWithKeyboard(n,e){this.#g&&this.#j(this.#o,{deltaX:n,deltaY:e,fromKeyboard:!0})}#N(){this.#g=!1,this.#F(-1),this.#O()}_stopResizingWithKeyboard(){this.#N(),this.div.focus()}select(){this.makeResizable(),this.div?.classList.add("selectedEditor"),this._editToolbar?(this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()})}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(n,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(n){this.#p=n,this.parent&&(n?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(n,e){this.#c=!0;const i=n/e,{style:a}=this.div;a.aspectRatio=i,a.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(n,e=!1){if(e){this.#_||=new Map;const{action:i}=n;let a=this.#_.get(i);return a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(n),this.#_.delete(i),0===this.#_.size&&(this.#_=null)},Oe._telemetryTimeout),void this.#_.set(i,a)}n.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:n}})}show(n=this._isVisible){this.div.classList.toggle("hidden",!n),this._isVisible=n}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}renderAnnotationElement(n){let e=n.container.querySelector(".annotationContent");if(e){if("CANVAS"===e.nodeName){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}}else e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.container.prepend(e);return e}resetAnnotationElement(n){const{firstChild:e}=n.container;"DIV"===e?.nodeName&&e.classList.contains("annotationContent")&&e.remove()}}class Nh extends Oe{constructor(n){super(n),this.annotationElementId=n.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Co=3285377520,jn=4294901760,wr=65535;class xm{constructor(n){this.h1=n?4294967295&n:Co,this.h2=n?4294967295&n:Co}update(n){let e,i;if("string"==typeof n){e=new Uint8Array(2*n.length),i=0;for(let T=0,x=n.length;T<x;T++){const M=n.charCodeAt(T);M<=255?e[i++]=M:(e[i++]=M>>>8,e[i++]=255&M)}}else{if(!ArrayBuffer.isView(n))throw new Error("Invalid data format, must be a string or TypedArray.");e=n.slice(),i=e.byteLength}const a=i>>2,c=i-4*a,d=new Uint32Array(e.buffer,0,a);let f=0,g=0,v=this.h1,y=this.h2;const w=3432918353,D=461845907,A=w&wr,S=D&wr;for(let T=0;T<a;T++)1&T?(f=d[T],f=f*w&jn|f*A&wr,f=f<<15|f>>>17,f=f*D&jn|f*S&wr,v^=f,v=v<<13|v>>>19,v=5*v+3864292196):(g=d[T],g=g*w&jn|g*A&wr,g=g<<15|g>>>17,g=g*D&jn|g*S&wr,y^=g,y=y<<13|y>>>19,y=5*y+3864292196);switch(f=0,c){case 3:f^=e[4*a+2]<<16;case 2:f^=e[4*a+1]<<8;case 1:f^=e[4*a],f=f*w&jn|f*A&wr,f=f<<15|f>>>17,f=f*D&jn|f*S&wr,1&a?v^=f:y^=f}this.h1=v,this.h2=y}hexdigest(){let n=this.h1,e=this.h2;return n^=e>>>1,n=3981806797*n&jn|36045*n&wr,e=4283543511*e&jn|(2950163797*(e<<16|n>>>16)&jn)>>>16,n^=e>>>1,n=444984403*n&jn|60499*n&wr,e=3301882366*e&jn|(3120437893*(e<<16|n>>>16)&jn)>>>16,n^=e>>>1,(n>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const ms=Object.freeze({map:null,hash:"",transfer:void 0});class Ao{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(n,e){const i=this.#n.get(n);return void 0===i?e:Object.assign(e,i)}getRawValue(n){return this.#n.get(n)}remove(n){if(this.#n.delete(n),0===this.#n.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const e of this.#n.values())if(e instanceof Oe)return;this.onAnnotationEditor(null)}}setValue(n,e){const i=this.#n.get(n);let a=!1;if(void 0!==i)for(const[c,d]of Object.entries(e))i[c]!==d&&(a=!0,i[c]=d);else a=!0,this.#n.set(n,e);a&&this.#r(),e instanceof Oe&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(n){return this.#n.has(n)}getAll(){return this.#n.size>0?Nc(this.#n):null}setAll(n){for(const[e,i]of Object.entries(n))this.setValue(e,i)}get size(){return this.#n.size}#r(){this.#e||(this.#e=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new Hw(this)}get serializable(){if(0===this.#n.size)return ms;const n=new Map,e=new xm,i=[],a=Object.create(null);let c=!1;for(const[d,f]of this.#n){const g=f instanceof Oe?f.serialize(!1,a):f;g&&(n.set(d,g),e.update(`${d}:${JSON.stringify(g)}`),c||=!!g.bitmap)}if(c)for(const d of n.values())d.bitmap&&i.push(d.bitmap);return n.size>0?{map:n,hash:e.hexdigest(),transfer:i}:ms}get editorStats(){let n=null;const e=new Map;for(const i of this.#n.values()){if(!(i instanceof Oe))continue;const a=i.telemetryFinalData;if(!a)continue;const{type:c}=a;e.has(c)||e.set(c,Object.getPrototypeOf(i).constructor),n||=Object.create(null);const d=n[c]||=new Map;for(const[f,g]of Object.entries(a)){if("type"===f)continue;let v=d.get(f);v||(v=new Map,d.set(f,v));const y=v.get(g)??0;v.set(g,y+1)}}for(const[i,a]of e)n[i]=a.computeTelemetryFinalData(n[i]);return n}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const n=[];for(const e of this.#n.values())!(e instanceof Oe)||!e.annotationElementId||!e.serialize()||n.push(e.annotationElementId);return this.#t={ids:new Set(n),hash:n.join(",")}}}class Hw extends Ao{#e;constructor(n){super();const{map:e,hash:i,transfer:a}=n.serializable,c=structuredClone(e,a?{transfer:a}:null);this.#e={map:c,hash:i,transfer:a}}get print(){Je("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return je(this,"modifiedIds",{ids:new Set,hash:""})}}class $w{#e=new Set;constructor({ownerDocument:n=globalThis.document,styleElement:e=null}){this._document=n,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(n){this.nativeFontFaces.add(n),this._document.fonts.add(n)}removeNativeFontFace(n){this.nativeFontFaces.delete(n),this._document.fonts.delete(n)}insertRule(n){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(n,e.cssRules.length)}clear(){for(const n of this.nativeFontFaces)this._document.fonts.delete(n);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont({systemFontInfo:n,_inspectFont:e}){var i=this;return te(function*(){if(n&&!i.#e.has(n.loadedName)){if(At(!i.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),i.isFontLoadingAPISupported){const{loadedName:a,src:c,style:d}=n,f=new FontFace(a,c,d);i.addNativeFontFace(f);try{yield f.load(),i.#e.add(a),e?.(n)}catch{Te(`Cannot load system font: ${n.baseFontName}, installing it could help to improve PDF rendering.`),i.removeNativeFontFace(f)}return}Je("Not implemented: loadSystemFont without the Font Loading API.")}})()}bind(n){var e=this;return te(function*(){if(n.attached||n.missingFile&&!n.systemFontInfo)return;if(n.attached=!0,n.systemFontInfo)return void(yield e.loadSystemFont(n));if(e.isFontLoadingAPISupported){const a=n.createNativeFontFace();if(a){e.addNativeFontFace(a);try{yield a.loaded}catch(c){throw Te(`Failed to load font '${a.family}': '${c}'.`),n.disableFontFace=!0,c}}return}const i=n.createFontFaceRule();if(i){if(e.insertRule(i),e.isSyncFontLoadingSupported)return;yield new Promise(a=>{const c=e._queueLoadingCallback(a);e._prepareFontLoadEvent(n,c)})}})()}get isFontLoadingAPISupported(){return je(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){let n=!1;return(en||typeof navigator<"u"&&"string"==typeof navigator?.userAgent&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(n=!0),je(this,"isSyncFontLoadingSupported",n)}_queueLoadingCallback(n){const{loadingRequests:i}=this,a={done:!1,complete:function e(){for(At(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const c=i.shift();setTimeout(c.callback,0)}},callback:n};return i.push(a),a}get _loadTestFont(){return je(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(n,e){function i(j,B){return j.charCodeAt(B)<<24|j.charCodeAt(B+1)<<16|j.charCodeAt(B+2)<<8|255&j.charCodeAt(B+3)}function a(j,B,z,W){return j.substring(0,B)+W+j.substring(B+z)}let c,d;const f=this._document.createElement("canvas");f.width=1,f.height=1;const g=f.getContext("2d");let v=0;const w=`lt${Date.now()}${this.loadTestFontId++}`;let D=this._loadTestFont;D=a(D,976,w.length,w);const T=1482184792;let x=i(D,16);for(c=0,d=w.length-3;c<d;c+=4)x=x-T+i(w,c)|0;c<w.length&&(x=x-T+i(w+"XXX",c)|0),D=a(D,16,4,function Rw(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,255&o)}(x));const M=`url(data:font/opentype;base64,${btoa(D)});`;this.insertRule(`@font-face {font-family:"${w}";src:${M}}`);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const j of[n.loadedName,w]){const B=this._document.createElement("span");B.textContent="Hi",B.style.fontFamily=j,O.append(B)}this._document.body.append(O),function y(j,B){if(++v>30)return Te("Load test font never loaded."),void B();g.font="30px "+j,g.fillText(".",0,20),g.getImageData(0,0,1,1).data[3]>0?B():setTimeout(y.bind(null,j,B))}(w,()=>{O.remove(),e.complete()})}}class Nm{constructor(n,{disableFontFace:e=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const a in n)this[a]=n[a];this.disableFontFace=!0===e,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let n;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),n=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else n=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),n}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const n=`url(data:${this.mimetype};base64,${function Fw(o){return Uint8Array.prototype.toBase64?o.toBase64():btoa(Em(o))}(this.data)});`;let e;if(this.cssFontInfo){let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${n}}`}else e=`@font-face {font-family:"${this.loadedName}";src:${n}}`;return this._inspectFont?.(this,n),e}getPathGenerator(n,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let i;try{i=n.get(this.loadedName+"_path_"+e)}catch(c){Te(`getPathGenerator - ignoring character: "${c}".`)}if(!Array.isArray(i)||0===i.length)return this.compiledGlyphs[e]=function(c,d){};const a=[];for(let c=0,d=i.length;c<d;)switch(i[c++]){case 0:{const[f,g,v,y,w,D]=i.slice(c,c+6);a.push(A=>A.bezierCurveTo(f,g,v,y,w,D)),c+=6}break;case 1:{const[f,g]=i.slice(c,c+2);a.push(v=>v.moveTo(f,g)),c+=2}break;case 2:{const[f,g]=i.slice(c,c+2);a.push(v=>v.lineTo(f,g)),c+=2}break;case 3:{const[f,g,v,y]=i.slice(c,c+4);a.push(w=>w.quadraticCurveTo(f,g,v,y)),c+=4}break;case 4:a.push(f=>f.restore());break;case 5:a.push(f=>f.save());break;case 6:At(2===a.length,"Scale command is only valid at the third position.");break;case 7:{const[f,g,v,y,w,D]=i.slice(c,c+6);a.push(A=>A.transform(f,g,v,y,w,D)),c+=6}break;case 8:{const[f,g]=i.slice(c,c+2);a.push(v=>v.translate(f,g)),c+=2}}return a.push(c=>c.closePath()),this.compiledGlyphs[e]=function(d,f){a[0](d),a[1](d),d.scale(f,-f);for(let g=2,v=a.length;g<v;g++)a[g](d)}}}class Lc{#e=!1;constructor({enableHWA:n=!1}){this.#e=n}create(n,e){if(n<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(n,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(n,e,i){if(!n.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");n.canvas.width=e,n.canvas.height=i}destroy(n){if(!n.canvas)throw new Error("Canvas is not specified");n.canvas.width=0,n.canvas.height=0,n.canvas=null,n.context=null}_createCanvas(n,e){Je("Abstract method `_createCanvas` called.")}}class Ph{constructor({baseUrl:n=null,isCompressed:e=!0}){this.baseUrl=n,this.isCompressed=e}fetch({name:n}){var e=this;return te(function*(){if(!e.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!n)throw new Error("CMap name must be specified.");const i=e.baseUrl+n+(e.isCompressed?".bcmap":"");return e._fetch(i).then(a=>({cMapData:a,isCompressed:e.isCompressed})).catch(a=>{throw new Error(`Unable to load ${e.isCompressed?"binary ":""}CMap at: ${i}`)})})()}_fetch(n){return te(function*(){Je("Abstract method `_fetch` called.")})()}}class Pm extends Ph{_fetch(n){var e=this;return te(function*(){const i=yield Pi(n,e.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):ps(i)})()}}class Oh{addFilter(n){return"none"}addHCMFilter(n,e){return"none"}addAlphaFilter(n){return"none"}addLuminosityFilter(n){return"none"}addHighlightHCMFilter(n,e,i,a,c){return"none"}destroy(n=!1){}}class kh{constructor({baseUrl:n=null}){this.baseUrl=n}fetch({filename:n}){var e=this;return te(function*(){if(!e.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!n)throw new Error("Font filename must be specified.");const i=`${e.baseUrl}${n}`;return e._fetch(i).catch(a=>{throw new Error(`Unable to load font data at: ${i}`)})})()}_fetch(n){return te(function*(){Je("Abstract method `_fetch` called.")})()}}class jc extends kh{_fetch(n){return te(function*(){const e=yield Pi(n,"arraybuffer");return new Uint8Array(e)})()}}function km(o){return Fh.apply(this,arguments)}function Fh(){return(Fh=te(function*(o){const e=yield process.getBuiltinModule("fs").promises.readFile(o);return new Uint8Array(e)})).apply(this,arguments)}function Lh(o,n){if(!n)return;const e=n[2]-n[0],i=n[3]-n[1],a=new Path2D;a.rect(n[0],n[1],e,i),o.clip(a)}class jh{getPattern(){Je("Abstract method `getPattern` called.")}}class Kw extends jh{constructor(n){super(),this._type=n[1],this._bbox=n[2],this._colorStops=n[3],this._p0=n[4],this._p1=n[5],this._r0=n[6],this._r1=n[7],this.matrix=null}_createGradient(n){let e;"axial"===this._type?e=n.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=n.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(n,e,i,a){let c;if("Stroke"===a||"Fill"===a){const d=e.current.getClippedPathBoundingBox(a,vt(n))||[0,0,0,0],f=Math.ceil(d[2]-d[0])||1,g=Math.ceil(d[3]-d[1])||1,v=e.cachedCanvases.getCanvas("pattern",f,g),y=v.context;y.clearRect(0,0,y.canvas.width,y.canvas.height),y.beginPath(),y.rect(0,0,y.canvas.width,y.canvas.height),y.translate(-d[0],-d[1]),i=se.transform(i,[1,0,0,1,d[0],d[1]]),y.transform(...e.baseTransform),this.matrix&&y.transform(...this.matrix),Lh(y,this._bbox),y.fillStyle=this._createGradient(y),y.fill(),c=n.createPattern(v.canvas,"no-repeat");const w=new DOMMatrix(i);c.setTransform(w)}else Lh(n,this._bbox),c=this._createGradient(n);return c}}function ni(o,n,e,i,a,c,d,f){const g=n.coords,v=n.colors,y=o.data,w=4*o.width;let D;g[e+1]>g[i+1]&&(D=e,e=i,i=D,D=c,c=d,d=D),g[i+1]>g[a+1]&&(D=i,i=a,a=D,D=d,d=f,f=D),g[e+1]>g[i+1]&&(D=e,e=i,i=D,D=c,c=d,d=D);const A=(g[e]+n.offsetX)*n.scaleX,S=(g[e+1]+n.offsetY)*n.scaleY,T=(g[i]+n.offsetX)*n.scaleX,x=(g[i+1]+n.offsetY)*n.scaleY,M=(g[a]+n.offsetX)*n.scaleX,k=(g[a+1]+n.offsetY)*n.scaleY;if(S>=k)return;const O=v[c],j=v[c+1],B=v[c+2],z=v[d],W=v[d+1],oe=v[d+2],ge=v[f],Ke=v[f+1],Be=v[f+2],yt=Math.round(S),zt=Math.round(k);let We,un,st,ee,we,Dr,Mn,Rn;for(let Ft=yt;Ft<=zt;Ft++){if(Ft<x){const bt=Ft<S?0:(S-Ft)/(S-x);We=A-(A-T)*bt,un=O-(O-z)*bt,st=j-(j-W)*bt,ee=B-(B-oe)*bt}else{let bt;bt=Ft>k?1:x===k?0:(x-Ft)/(x-k),We=T-(T-M)*bt,un=z-(z-ge)*bt,st=W-(W-Ke)*bt,ee=oe-(oe-Be)*bt}let It;It=Ft<S?0:Ft>k?1:(S-Ft)/(S-k),we=A-(A-M)*It,Dr=O-(O-ge)*It,Mn=j-(j-Ke)*It,Rn=B-(B-Be)*It;const Ds=Math.round(Math.min(We,we)),Fo=Math.round(Math.max(We,we));let or=w*Ft+4*Ds;for(let bt=Ds;bt<=Fo;bt++)It=(We-bt)/(We-we),It<0?It=0:It>1&&(It=1),y[or++]=un-(un-Dr)*It|0,y[or++]=st-(st-Mn)*It|0,y[or++]=ee-(ee-Rn)*It|0,y[or++]=255}}function Za(o,n,e){const i=n.coords,a=n.colors;let c,d;switch(n.type){case"lattice":const f=n.verticesPerRow,g=Math.floor(i.length/f)-1,v=f-1;for(c=0;c<g;c++){let y=c*f;for(let w=0;w<v;w++,y++)ni(o,e,i[y],i[y+1],i[y+f],a[y],a[y+1],a[y+f]),ni(o,e,i[y+f+1],i[y+1],i[y+f],a[y+f+1],a[y+1],a[y+f])}break;case"triangles":for(c=0,d=i.length;c<d;c+=3)ni(o,e,i[c],i[c+1],i[c+2],a[c],a[c+1],a[c+2]);break;default:throw new Error("illegal figure")}}class Bh extends jh{constructor(n){super(),this._coords=n[2],this._colors=n[3],this._figures=n[4],this._bounds=n[5],this._bbox=n[7],this._background=n[8],this.matrix=null}_createMeshCanvas(n,e,i){const f=Math.floor(this._bounds[0]),g=Math.floor(this._bounds[1]),v=Math.ceil(this._bounds[2])-f,y=Math.ceil(this._bounds[3])-g,w=Math.min(Math.ceil(Math.abs(v*n[0]*1.1)),3e3),D=Math.min(Math.ceil(Math.abs(y*n[1]*1.1)),3e3),A=v/w,S=y/D,T={coords:this._coords,colors:this._colors,offsetX:-f,offsetY:-g,scaleX:1/A,scaleY:1/S},k=i.getCanvas("mesh",w+4,D+4),O=k.context,j=O.createImageData(w,D);if(e){const z=j.data;for(let W=0,oe=z.length;W<oe;W+=4)z[W]=e[0],z[W+1]=e[1],z[W+2]=e[2],z[W+3]=255}for(const z of this._figures)Za(j,z,T);return O.putImageData(j,2,2),{canvas:k.canvas,offsetX:f-2*A,offsetY:g-2*S,scaleX:A,scaleY:S}}getPattern(n,e,i,a){let c;if(Lh(n,this._bbox),"Shading"===a)c=se.singularValueDecompose2dScale(vt(n));else if(c=se.singularValueDecompose2dScale(e.baseTransform),this.matrix){const f=se.singularValueDecompose2dScale(this.matrix);c=[c[0]*f[0],c[1]*f[1]]}const d=this._createMeshCanvas(c,"Shading"===a?null:this._background,e.cachedCanvases);return"Shading"!==a&&(n.setTransform(...e.baseTransform),this.matrix&&n.transform(...this.matrix)),n.translate(d.offsetX,d.offsetY),n.scale(d.scaleX,d.scaleY),n.createPattern(d.canvas,"no-repeat")}}class Uh extends jh{getPattern(){return"hotpink"}}let Fm=(()=>{class o{static MAX_PATTERN_SIZE=3e3;constructor(e,i,a,c,d){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=i,this.ctx=a,this.canvasGraphicsFactory=c,this.baseTransform=d}createPatternCanvas(e){const{bbox:i,operatorList:a,paintType:c,tilingType:d,color:f,canvasGraphicsFactory:g}=this;let{xstep:v,ystep:y}=this;v=Math.abs(v),y=Math.abs(y),wo("TilingType: "+d);const w=i[0],D=i[1],A=i[2],S=i[3],T=A-w,x=S-D,M=se.singularValueDecompose2dScale(this.matrix),k=se.singularValueDecompose2dScale(this.baseTransform),O=M[0]*k[0],j=M[1]*k[1];let B=T,z=x,W=!1,oe=!1;const ge=Math.ceil(v*O),Ke=Math.ceil(y*j);ge>=Math.ceil(T*O)?B=v:W=!0,Ke>=Math.ceil(x*j)?z=y:oe=!0;const zt=this.getSizeAndScale(B,this.ctx.canvas.width,O),We=this.getSizeAndScale(z,this.ctx.canvas.height,j),un=e.cachedCanvases.getCanvas("pattern",zt.size,We.size),st=un.context,ee=g.createCanvasGraphics(st);if(ee.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ee,c,f),st.translate(-zt.scale*w,-We.scale*D),ee.transform(zt.scale,0,0,We.scale,0,0),st.save(),this.clipBbox(ee,w,D,A,S),ee.baseTransform=vt(ee.ctx),ee.executeOperatorList(a),ee.endDrawing(),st.restore(),W||oe){const we=un.canvas;W&&(B=v),oe&&(z=y);const Dr=this.getSizeAndScale(B,this.ctx.canvas.width,O),Mn=this.getSizeAndScale(z,this.ctx.canvas.height,j),Rn=Dr.size,Ft=Mn.size,It=e.cachedCanvases.getCanvas("pattern-workaround",Rn,Ft),Ds=It.context,Fo=W?Math.floor(T/v):0,or=oe?Math.floor(x/y):0;for(let bt=0;bt<=Fo;bt++)for(let bn=0;bn<=or;bn++)Ds.drawImage(we,Rn*bt,Ft*bn,Rn,Ft,0,0,Rn,Ft);return{canvas:It.canvas,scaleX:Dr.scale,scaleY:Mn.scale,offsetX:w,offsetY:D}}return{canvas:un.canvas,scaleX:zt.scale,scaleY:We.scale,offsetX:w,offsetY:D}}getSizeAndScale(e,i,a){const c=Math.max(o.MAX_PATTERN_SIZE,i);let d=Math.ceil(e*a);return d>=c?d=c:a=d/e,{scale:a,size:d}}clipBbox(e,i,a,c,d){e.ctx.rect(i,a,c-i,d-a),e.current.updateRectMinMax(vt(e.ctx),[i,a,c,d]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,i,a){const c=e.ctx,d=e.current;switch(i){case 1:const f=this.ctx;c.fillStyle=f.fillStyle,c.strokeStyle=f.strokeStyle,d.fillColor=f.fillStyle,d.strokeColor=f.strokeStyle;break;case 2:const g=se.makeHexColor(a[0],a[1],a[2]);c.fillStyle=g,c.strokeStyle=g,d.fillColor=g,d.strokeColor=g;break;default:throw new Mw(`Unsupported paint type: ${i}`)}}getPattern(e,i,a,c){let d=a;"Shading"!==c&&(d=se.transform(d,i.baseTransform),this.matrix&&(d=se.transform(d,this.matrix)));const f=this.createPatternCanvas(i);let g=new DOMMatrix(d);g=g.translate(f.offsetX,f.offsetY),g=g.scale(1/f.scaleX,1/f.scaleY);const v=e.createPattern(f.canvas,"repeat");return v.setTransform(g),v}}return o})();function Lm({src:o,srcPos:n=0,dest:e,width:i,height:a,nonBlackColor:c=4294967295,inverseDecode:d=!1}){const f=Vt.isLittleEndian?4278190080:255,[g,v]=d?[c,f]:[f,c],y=i>>3,w=7&i,D=o.length;e=new Uint32Array(e.buffer);let A=0;for(let S=0;S<a;S++){for(const x=n+y;n<x;n++){const M=n<D?o[n]:255;e[A++]=128&M?v:g,e[A++]=64&M?v:g,e[A++]=32&M?v:g,e[A++]=16&M?v:g,e[A++]=8&M?v:g,e[A++]=4&M?v:g,e[A++]=2&M?v:g,e[A++]=1&M?v:g}if(0===w)continue;const T=n<D?o[n++]:255;for(let x=0;x<w;x++)e[A++]=T&1<<7-x?v:g}return{srcPos:n,destPos:A}}class Bm{constructor(n){this.canvasFactory=n,this.cache=Object.create(null)}getCanvas(n,e,i){let a;return void 0!==this.cache[n]?(a=this.cache[n],this.canvasFactory.reset(a,e,i)):(a=this.canvasFactory.create(e,i),this.cache[n]=a),a}delete(n){delete this.cache[n]}clear(){for(const n in this.cache)this.canvasFactory.destroy(this.cache[n]),delete this.cache[n]}}function Bc(o,n,e,i,a,c,d,f,g,v){const[y,w,D,A,S,T]=vt(o);if(0===w&&0===D){const O=Math.round(d*y+S),B=Math.round(f*A+T),W=Math.abs(Math.round((d+g)*y+S)-O)||1,ge=Math.abs(Math.round((f+v)*A+T)-B)||1;return o.setTransform(Math.sign(y),0,0,Math.sign(A),O,B),o.drawImage(n,e,i,a,c,0,0,W,ge),o.setTransform(y,w,D,A,S,T),[W,ge]}if(0===y&&0===A){const O=Math.round(f*D+S),B=Math.round(d*w+T),W=Math.abs(Math.round((f+v)*D+S)-O)||1,ge=Math.abs(Math.round((d+g)*w+T)-B)||1;return o.setTransform(0,Math.sign(w),Math.sign(D),0,O,B),o.drawImage(n,e,i,a,c,0,0,ge,W),o.setTransform(y,w,D,A,S,T),[ge,W]}return o.drawImage(n,e,i,a,c,d,f,g,v),[Math.hypot(y,w)*g,Math.hypot(D,A)*v]}class Fi{constructor(n,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=_m,this.textMatrixScale=1,this.fontMatrix=_h,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=0,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,n,e])}clone(){const n=Object.create(this);return n.clipBox=this.clipBox.slice(),n}setCurrentPoint(n,e){this.x=n,this.y=e}updatePathMinMax(n,e,i){[e,i]=se.applyTransform([e,i],n),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(n,e){const i=se.applyTransform(e,n),a=se.applyTransform(e.slice(2),n),c=se.applyTransform([e[0],e[3]],n),d=se.applyTransform([e[2],e[1]],n);this.minX=Math.min(this.minX,i[0],a[0],c[0],d[0]),this.minY=Math.min(this.minY,i[1],a[1],c[1],d[1]),this.maxX=Math.max(this.maxX,i[0],a[0],c[0],d[0]),this.maxY=Math.max(this.maxY,i[1],a[1],c[1],d[1])}updateScalingPathMinMax(n,e){se.scaleMinMax(n,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(n,e,i,a,c,d,f,g,v,y){const w=se.bezierBoundingBox(e,i,a,c,d,f,g,v,y);y||this.updateRectMinMax(n,w)}getPathBoundingBox(n="Fill",e=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if("Stroke"===n){e||Je("Stroke bounding box must include transform.");const a=se.singularValueDecompose2dScale(e),c=a[0]*this.lineWidth/2,d=a[1]*this.lineWidth/2;i[0]-=c,i[1]-=d,i[2]+=c,i[3]+=d}return i}updateClipFromPath(){const n=se.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(n||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(n){this.clipBox=n,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(n="Fill",e=null){return se.intersect(this.clipBox,this.getPathBoundingBox(n,e))}}function ys(o,n){if(n instanceof ImageData)return void o.putImageData(n,0,0);const e=n.height,i=n.width,a=e%16,c=(e-a)/16,d=0===a?c:c+1,f=o.createImageData(i,16);let v,g=0;const y=n.data,w=f.data;let D,A,S,T;if(n.kind===Eh.GRAYSCALE_1BPP){const x=y.byteLength,M=new Uint32Array(w.buffer,0,w.byteLength>>2),k=M.length,O=i+7>>3,j=4294967295,B=Vt.isLittleEndian?4278190080:255;for(D=0;D<d;D++){for(S=D<c?16:a,v=0,A=0;A<S;A++){const z=x-g;let W=0;const oe=z>O?i:8*z-7,ge=-8&oe;let Ke=0,Be=0;for(;W<ge;W+=8)Be=y[g++],M[v++]=128&Be?j:B,M[v++]=64&Be?j:B,M[v++]=32&Be?j:B,M[v++]=16&Be?j:B,M[v++]=8&Be?j:B,M[v++]=4&Be?j:B,M[v++]=2&Be?j:B,M[v++]=1&Be?j:B;for(;W<oe;W++)0===Ke&&(Be=y[g++],Ke=128),M[v++]=Be&Ke?j:B,Ke>>=1}for(;v<k;)M[v++]=0;o.putImageData(f,0,16*D)}}else if(n.kind===Eh.RGBA_32BPP){for(A=0,T=16*i*4,D=0;D<c;D++)w.set(y.subarray(g,g+T)),g+=T,o.putImageData(f,0,A),A+=16;D<d&&(T=i*a*4,w.set(y.subarray(g,g+T)),o.putImageData(f,0,A))}else{if(n.kind!==Eh.RGB_24BPP)throw new Error(`bad image kind: ${n.kind}`);for(S=16,T=i*S,D=0;D<d;D++){for(D>=c&&(S=a,T=i*S),v=0,A=T;A--;)w[v++]=y[g++],w[v++]=y[g++],w[v++]=y[g++],w[v++]=255;o.putImageData(f,0,16*D)}}}function bs(o,n){if(n.bitmap)return void o.drawImage(n.bitmap,0,0);const e=n.height,i=n.width,a=e%16,c=(e-a)/16,d=0===a?c:c+1,f=o.createImageData(i,16);let g=0;const v=n.data,y=f.data;for(let w=0;w<d;w++){const D=w<c?16:a;({srcPos:g}=Lm({src:v,srcPos:g,dest:y,width:i,height:D,nonBlackColor:0})),o.putImageData(f,0,16*w)}}function Uc(o,n){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)void 0!==o[i]&&(n[i]=o[i]);void 0!==o.setLineDash&&(n.setLineDash(o.getLineDash()),n.lineDashOffset=o.lineDashOffset)}function el(o){if(o.strokeStyle=o.fillStyle="#000000",o.fillRule="nonzero",o.globalAlpha=1,o.lineWidth=1,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=10,o.globalCompositeOperation="source-over",o.font="10px sans-serif",void 0!==o.setLineDash&&(o.setLineDash([]),o.lineDashOffset=0),!en){const{filter:n}=o;"none"!==n&&""!==n&&(o.filter="none")}}function Vc(o,n){if(n)return!0;const e=se.singularValueDecompose2dScale(o);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Ni.PDF_TO_CSS_UNITS);return e[0]<=i&&e[1]<=i}const t_=["butt","round","square"],Um=["miter","round","bevel"],n_={},$h={};class tl{constructor(n,e,i,a,c,{optionalContentConfig:d,markedContentStack:f=null},g,v){this.ctx=n,this.current=new Fi(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=a,this.filterFactory=c,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=f||[],this.optionalContentConfig=d,this.cachedCanvases=new Bm(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=g,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=v,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(n,e=null){return"string"==typeof n?n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n):e}beginDrawing({transform:n,viewport:e,transparency:i=!1,background:a=null}){const c=this.ctx.canvas.width,d=this.ctx.canvas.height,f=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,c,d),this.ctx.fillStyle=f,i){const g=this.cachedCanvases.getCanvas("transparent",c,d);this.compositeCtx=this.ctx,this.transparentCanvas=g.canvas,this.ctx=g.context,this.ctx.save(),this.ctx.transform(...vt(this.compositeCtx))}this.ctx.save(),el(this.ctx),n&&(this.ctx.transform(...n),this.outputScaleX=n[0],this.outputScaleY=n[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=vt(this.ctx)}executeOperatorList(n,e,i,a){const c=n.argsArray,d=n.fnArray;let f=e||0;const g=c.length;if(g===f)return f;const v=g-f>10&&"function"==typeof i,y=v?Date.now()+15:0;let w=0;const D=this.commonObjs,A=this.objs;let S;for(;;){if(void 0!==a&&f===a.nextBreakPoint)return a.breakIt(f,i),f;if(S=d[f],S!==br.dependency)this[S].apply(this,c[f]);else for(const T of c[f]){const x=T.startsWith("g_")?D:A;if(!x.has(T))return x.get(T,i),f}if(f++,f===g)return f;if(v&&++w>10){if(Date.now()>y)return i(),f;w=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const n of this._cachedBitmapsMap.values()){for(const e of n.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);n.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const n=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==n){const e=this.ctx.filter;this.ctx.filter=n,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(n,e){const i=n.width??n.displayWidth,a=n.height??n.displayHeight;let y,w,c=Math.max(Math.hypot(e[0],e[1]),1),d=Math.max(Math.hypot(e[2],e[3]),1),f=i,g=a,v="prescale1";for(;c>2&&f>1||d>2&&g>1;){let D=f,A=g;c>2&&f>1&&(D=f>=16384?Math.floor(f/2)-1||1:Math.ceil(f/2),c/=f/D),d>2&&g>1&&(A=g>=16384?Math.floor(g/2)-1||1:Math.ceil(g)/2,d/=g/A),y=this.cachedCanvases.getCanvas(v,D,A),w=y.context,w.clearRect(0,0,D,A),w.drawImage(n,0,0,f,g,0,0,D,A),n=y.canvas,f=D,g=A,v="prescale1"===v?"prescale2":"prescale1"}return{img:n,paintWidth:f,paintHeight:g}}_createMaskCanvas(n){const e=this.ctx,{width:i,height:a}=n,c=this.current.fillColor,d=this.current.patternFill,f=vt(e);let g,v,y,w;if((n.bitmap||n.data)&&n.count>1){const oe=n.bitmap||n.data.buffer;v=JSON.stringify(d?f:[f.slice(0,4),c]),g=this._cachedBitmapsMap.get(oe),g||(g=new Map,this._cachedBitmapsMap.set(oe,g));const ge=g.get(v);if(ge&&!d)return{canvas:ge,offsetX:Math.round(Math.min(f[0],f[2])+f[4]),offsetY:Math.round(Math.min(f[1],f[3])+f[5])};y=ge}y||(w=this.cachedCanvases.getCanvas("maskCanvas",i,a),bs(w.context,n));let D=se.transform(f,[1/i,0,0,-1/a,0,0]);D=se.transform(D,[1,0,0,1,0,-a]);const[A,S,T,x]=se.getAxialAlignedBoundingBox([0,0,i,a],D),M=Math.round(T-A)||1,k=Math.round(x-S)||1,O=this.cachedCanvases.getCanvas("fillCanvas",M,k),j=O.context,B=A,z=S;j.translate(-B,-z),j.transform(...D),y||(y=this._scaleImage(w.canvas,kr(j)),y=y.img,g&&d&&g.set(v,y)),j.imageSmoothingEnabled=Vc(vt(j),n.interpolate),Bc(j,y,0,0,y.width,y.height,0,0,i,a),j.globalCompositeOperation="source-in";const W=se.transform(kr(j),[1,0,0,1,-B,-z]);return j.fillStyle=d?c.getPattern(e,this,W,"Fill"):c,j.fillRect(0,0,i,a),g&&!d&&(this.cachedCanvases.delete("fillCanvas"),g.set(v,O.canvas)),{canvas:O.canvas,offsetX:Math.round(B),offsetY:Math.round(z)}}setLineWidth(n){n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(n){this.ctx.lineCap=t_[n]}setLineJoin(n){this.ctx.lineJoin=Um[n]}setMiterLimit(n){this.ctx.miterLimit=n}setDash(n,e){const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(n),i.lineDashOffset=e)}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[e,i]of n)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const n=this.inSMaskMode;this.current.activeSMask&&!n?this.beginSMaskMode():!this.current.activeSMask&&n&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const a=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=a.context;const c=this.ctx;c.setTransform(...vt(this.suspendedCtx)),Uc(this.suspendedCtx,c),function Jw(o,n){if(o._removeMirroring)throw new Error("Context is already forwarding operations.");o.__originalSave=o.save,o.__originalRestore=o.restore,o.__originalRotate=o.rotate,o.__originalScale=o.scale,o.__originalTranslate=o.translate,o.__originalTransform=o.transform,o.__originalSetTransform=o.setTransform,o.__originalResetTransform=o.resetTransform,o.__originalClip=o.clip,o.__originalMoveTo=o.moveTo,o.__originalLineTo=o.lineTo,o.__originalBezierCurveTo=o.bezierCurveTo,o.__originalRect=o.rect,o.__originalClosePath=o.closePath,o.__originalBeginPath=o.beginPath,o._removeMirroring=()=>{o.save=o.__originalSave,o.restore=o.__originalRestore,o.rotate=o.__originalRotate,o.scale=o.__originalScale,o.translate=o.__originalTranslate,o.transform=o.__originalTransform,o.setTransform=o.__originalSetTransform,o.resetTransform=o.__originalResetTransform,o.clip=o.__originalClip,o.moveTo=o.__originalMoveTo,o.lineTo=o.__originalLineTo,o.bezierCurveTo=o.__originalBezierCurveTo,o.rect=o.__originalRect,o.closePath=o.__originalClosePath,o.beginPath=o.__originalBeginPath,delete o._removeMirroring},o.save=function(){n.save(),this.__originalSave()},o.restore=function(){n.restore(),this.__originalRestore()},o.translate=function(i,a){n.translate(i,a),this.__originalTranslate(i,a)},o.scale=function(i,a){n.scale(i,a),this.__originalScale(i,a)},o.transform=function(i,a,c,d,f,g){n.transform(i,a,c,d,f,g),this.__originalTransform(i,a,c,d,f,g)},o.setTransform=function(i,a,c,d,f,g){n.setTransform(i,a,c,d,f,g),this.__originalSetTransform(i,a,c,d,f,g)},o.resetTransform=function(){n.resetTransform(),this.__originalResetTransform()},o.rotate=function(i){n.rotate(i),this.__originalRotate(i)},o.clip=function(i){n.clip(i),this.__originalClip(i)},o.moveTo=function(e,i){n.moveTo(e,i),this.__originalMoveTo(e,i)},o.lineTo=function(e,i){n.lineTo(e,i),this.__originalLineTo(e,i)},o.bezierCurveTo=function(e,i,a,c,d,f){n.bezierCurveTo(e,i,a,c,d,f),this.__originalBezierCurveTo(e,i,a,c,d,f)},o.rect=function(e,i,a,c){n.rect(e,i,a,c),this.__originalRect(e,i,a,c)},o.closePath=function(){n.closePath(),this.__originalClosePath()},o.beginPath=function(){n.beginPath(),this.__originalBeginPath()}}(c,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Uc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(n){this.current.activeSMask&&(n?(n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n[2]=Math.ceil(n[2]),n[3]=Math.ceil(n[3])):n=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],this.composeSMask(this.suspendedCtx,this.current.activeSMask,this.ctx,n),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}composeSMask(n,e,i,a){const c=a[0],d=a[1],f=a[2]-c,g=a[3]-d;0===f||0===g||(this.genericComposeSMask(e.context,i,f,g,e.subtype,e.backdrop,e.transferMap,c,d,e.offsetX,e.offsetY),n.save(),n.globalAlpha=1,n.globalCompositeOperation="source-over",n.setTransform(1,0,0,1,0,0),n.drawImage(i.canvas,0,0),n.restore())}genericComposeSMask(n,e,i,a,c,d,f,g,v,y,w){let D=n.canvas,A=g-y,S=v-w;if(d){const x=se.makeHexColor(...d);if(A<0||S<0||A+i>D.width||S+a>D.height){const M=this.cachedCanvases.getCanvas("maskExtension",i,a),k=M.context;k.drawImage(D,-A,-S),k.globalCompositeOperation="destination-atop",k.fillStyle=x,k.fillRect(0,0,i,a),k.globalCompositeOperation="source-over",D=M.canvas,A=S=0}else{n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0);const M=new Path2D;M.rect(A,S,i,a),n.clip(M),n.globalCompositeOperation="destination-atop",n.fillStyle=x,n.fillRect(A,S,i,a),n.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),"Alpha"===c&&f?e.filter=this.filterFactory.addAlphaFilter(f):"Luminosity"===c&&(e.filter=this.filterFactory.addLuminosityFilter(f));const T=new Path2D;T.rect(g,v,i,a),e.clip(T),e.globalCompositeOperation="destination-in",e.drawImage(D,A,S,i,a,g,v,i,a),e.restore()}save(){this.inSMaskMode?(Uc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Uc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(n,e,i,a,c,d){this.ctx.transform(n,e,i,a,c,d),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(n,e,i){const a=this.ctx,c=this.current;let g,v,d=c.x,f=c.y;const y=vt(a),w=0===y[0]&&0===y[3]||0===y[1]&&0===y[2],D=w?i.slice(0):null;for(let A=0,S=0,T=n.length;A<T;A++)switch(0|n[A]){case br.rectangle:d=e[S++],f=e[S++];const x=e[S++],M=e[S++],k=d+x,O=f+M;a.moveTo(d,f),0===x||0===M?a.lineTo(k,O):(a.lineTo(k,f),a.lineTo(k,O),a.lineTo(d,O)),w||c.updateRectMinMax(y,[d,f,k,O]),a.closePath();break;case br.moveTo:d=e[S++],f=e[S++],a.moveTo(d,f),w||c.updatePathMinMax(y,d,f);break;case br.lineTo:d=e[S++],f=e[S++],a.lineTo(d,f),w||c.updatePathMinMax(y,d,f);break;case br.curveTo:g=d,v=f,d=e[S+4],f=e[S+5],a.bezierCurveTo(e[S],e[S+1],e[S+2],e[S+3],d,f),c.updateCurvePathMinMax(y,g,v,e[S],e[S+1],e[S+2],e[S+3],d,f,D),S+=6;break;case br.curveTo2:g=d,v=f,a.bezierCurveTo(d,f,e[S],e[S+1],e[S+2],e[S+3]),c.updateCurvePathMinMax(y,g,v,d,f,e[S],e[S+1],e[S+2],e[S+3],D),d=e[S+2],f=e[S+3],S+=4;break;case br.curveTo3:g=d,v=f,d=e[S+2],f=e[S+3],a.bezierCurveTo(e[S],e[S+1],d,f,d,f),c.updateCurvePathMinMax(y,g,v,e[S],e[S+1],d,f,d,f,D),S+=4;break;case br.closePath:a.closePath()}w&&c.updateScalingPathMinMax(y,D),c.setCurrentPoint(d,f)}closePath(){this.ctx.closePath()}stroke(n=!0){const e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&i?.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,kr(e),"Stroke"),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),n&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(n=!0){const e=this.ctx,i=this.current.fillColor;let c=!1;this.current.patternFill&&(e.save(),e.fillStyle=i.getPattern(e,this,kr(e),"Fill"),c=!0);const d=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==d&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),c&&e.restore(),n&&this.consumePath(d)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=n_}eoClip(){this.pendingClip=$h}beginText(){this.current.textMatrix=_m,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const n=this.pendingTextPaths,e=this.ctx;if(void 0!==n){e.save(),e.beginPath();for(const i of n)e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(n){this.current.charSpacing=n}setWordSpacing(n){this.current.wordSpacing=n}setHScale(n){this.current.textHScale=n/100}setLeading(n){this.current.leading=-n}setFont(n,e){const i=this.commonObjs.get(n),a=this.current;if(!i)throw new Error(`Can't find font for ${n}`);if(a.fontMatrix=i.fontMatrix||_h,(0===a.fontMatrix[0]||0===a.fontMatrix[3])&&Te("Invalid font matrix for font "+n),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const c=i.loadedName||"sans-serif",d=i.systemFontInfo?.css||`"${c}", ${i.fallbackName}`;let f="normal";i.black?f="900":i.bold&&(f="bold");const g=i.italic?"italic":"normal";let v=e;e<16?v=16:e>100&&(v=100),this.current.fontSizeScale=e/v,this.ctx.font=`${g} ${f} ${v}px ${d}`}setTextRenderingMode(n){this.current.textRenderingMode=n}setTextRise(n){this.current.textRise=n}moveText(n,e){this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=e}setLeadingMoveText(n,e){this.setLeading(-e),this.moveText(n,e)}setTextMatrix(n,e,i,a,c,d){this.current.textMatrix=[n,e,i,a,c,d],this.current.textMatrixScale=Math.hypot(n,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(n,e,i,a,c){const d=this.ctx,f=this.current,g=f.font,v=f.textRenderingMode,y=f.fontSize/f.fontSizeScale,w=3&v,D=!!(4&v),A=f.patternFill&&!g.missingFile,S=f.patternStroke&&!g.missingFile;let T;(g.disableFontFace||D||A||S)&&(T=g.getPathGenerator(this.commonObjs,n)),g.disableFontFace||A||S?(d.save(),d.translate(e,i),d.beginPath(),T(d,y),(0===w||2===w)&&(a&&d.setTransform(...a),d.fill()),(1===w||2===w)&&(c&&d.setTransform(...c),d.stroke()),d.restore()):((0===w||2===w)&&d.fillText(n,e,i),(1===w||2===w)&&d.strokeText(n,e,i)),D&&(this.pendingTextPaths||=[]).push({transform:vt(d),x:e,y:i,fontSize:y,addToPath:T})}get isFontSubpixelAAEnabled(){const{context:n}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);n.scale(1.5,1),n.fillText("I",0,10);const e=n.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){i=!0;break}return je(this,"isFontSubpixelAAEnabled",i)}showText(n){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(n);const a=e.fontSize;if(0===a)return;const c=this.ctx,d=e.fontSizeScale,f=e.charSpacing,g=e.wordSpacing,v=e.fontDirection,y=e.textHScale*v,w=n.length,D=i.vertical,A=D?1:-1,S=i.defaultVMetrics,T=a*e.fontMatrix[0],x=0===e.textRenderingMode&&!i.disableFontFace&&!e.patternFill;let M,k;if(c.save(),c.transform(...e.textMatrix),c.translate(e.x,e.y+e.textRise),c.scale(y,v>0?-1:1),e.patternFill){c.save();const W=e.fillColor.getPattern(c,this,kr(c),"Fill");M=vt(c),c.restore(),c.fillStyle=W}if(e.patternStroke){c.save();const W=e.strokeColor.getPattern(c,this,kr(c),"Stroke");k=vt(c),c.restore(),c.strokeStyle=W}let O=e.lineWidth;const j=e.textMatrixScale;if(0===j||0===O){const W=3&e.textRenderingMode;(1===W||2===W)&&(O=this.getSinglePixelWidth())}else O/=j;if(1!==d&&(c.scale(d,d),O/=d),c.lineWidth=O,i.isInvalidPDFjsFont){const W=[];let oe=0;for(const ge of n)W.push(ge.unicode),oe+=ge.width;return c.fillText(W.join(""),0,0),e.x+=oe*T*y,c.restore(),void this.compose()}let z,B=0;for(z=0;z<w;++z){const W=n[z];if("number"==typeof W){B+=A*W*a/1e3;continue}let oe=!1;const ge=(W.isSpace?g:0)+f,Ke=W.fontChar,Be=W.accent;let yt,zt,We=W.width;if(D){const st=W.vmetric||S,ee=-(W.vmetric?st[1]:.5*We)*T;We=st?-st[0]:We,yt=ee/d,zt=(B+st[2]*T)/d}else yt=B/d,zt=0;if(i.remeasure&&We>0){const st=1e3*c.measureText(Ke).width/a*d;if(We<st&&this.isFontSubpixelAAEnabled){const ee=We/st;oe=!0,c.save(),c.scale(ee,1),yt/=ee}else We!==st&&(yt+=(We-st)/2e3*a/d)}this.contentVisible&&(W.isInFont||i.missingFile)&&(x&&!Be?c.fillText(Ke,yt,zt):(this.paintChar(Ke,yt,zt,M,k),Be&&this.paintChar(Be.fontChar,yt+a*Be.offset.x/d,zt-a*Be.offset.y/d,M,k))),B+=D?We*T-ge*v:We*T+ge*v,oe&&c.restore()}D?e.y-=B:e.x+=B*y,c.restore(),this.compose()}showType3Text(n){const e=this.ctx,i=this.current,a=i.font,c=i.fontSize,d=i.fontDirection,f=a.vertical?1:-1,g=i.charSpacing,v=i.wordSpacing,y=i.textHScale*d,w=i.fontMatrix||_h,D=n.length;let S,T,x,M;if(3!==i.textRenderingMode&&0!==c){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...i.textMatrix),e.translate(i.x,i.y),e.scale(y,d),S=0;S<D;++S){if(T=n[S],"number"==typeof T){M=f*T*c/1e3,this.ctx.translate(M,0),i.x+=M*y;continue}const k=(T.isSpace?v:0)+g,O=a.charProcOperatorList[T.operatorListId];O?(this.contentVisible&&(this.processingType3=T,this.save(),e.scale(c,c),e.transform(...w),this.executeOperatorList(O),this.restore()),x=se.applyTransform([T.width,0],w)[0]*c+k,e.translate(x,0),i.x+=x*y):Te(`Type3 character "${T.operatorListId}" is not available.`)}e.restore(),this.processingType3=null}}setCharWidth(n,e){}setCharWidthAndBounds(n,e,i,a,c,d){this.ctx.rect(i,a,c-i,d-a),this.ctx.clip(),this.endPath()}getColorN_Pattern(n){let e;if("TilingPattern"===n[0]){const i=n[1],a=this.baseTransform||vt(this.ctx);e=new Fm(n,i,this.ctx,{createCanvasGraphics:d=>new tl(d,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},a)}else e=this._getPattern(n[1],n[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(n,e,i){this.ctx.strokeStyle=this.current.strokeColor=se.makeHexColor(n,e,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(n,e,i){this.ctx.fillStyle=this.current.fillColor=se.makeHexColor(n,e,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(n,e=null){let i;return this.cachedPatterns.has(n)?i=this.cachedPatterns.get(n):(i=function Yw(o){switch(o[0]){case"RadialAxial":return new Kw(o);case"Mesh":return new Bh(o);case"Dummy":return new Uh}throw new Error(`Unknown IR type: ${o[0]}`)}(this.getObject(n)),this.cachedPatterns.set(n,i)),e&&(i.matrix=e),i}shadingFill(n){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(n);e.fillStyle=i.getPattern(e,this,kr(e),"Shading");const a=kr(e);if(a){const{width:c,height:d}=e.canvas,[f,g,v,y]=se.getAxialAlignedBoundingBox([0,0,c,d],a);this.ctx.fillRect(f,g,v-f,y-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Je("Should not call beginInlineImage")}beginImageData(){Je("Should not call beginImageData")}paintFormXObjectBegin(n,e){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),n&&this.transform(...n),this.baseTransform=vt(this.ctx),e)&&(this.ctx.rect(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.current.updateRectMinMax(vt(this.ctx),e),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(n){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;n.isolated||wo("TODO: Support non-isolated groups."),n.knockout&&Te("Knockout groups not supported.");const i=vt(e);if(n.matrix&&e.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let a=se.getAxialAlignedBoundingBox(n.bbox,vt(e));a=se.intersect(a,[0,0,e.canvas.width,e.canvas.height])||[0,0,0,0];const d=Math.floor(a[0]),f=Math.floor(a[1]),g=Math.max(Math.ceil(a[2])-d,1),v=Math.max(Math.ceil(a[3])-f,1);this.current.startNewPathAndClipBox([0,0,g,v]);let y="groupAt"+this.groupLevel;n.smask&&(y+="_smask_"+this.smaskCounter++%2);const w=this.cachedCanvases.getCanvas(y,g,v),D=w.context;D.translate(-d,-f),D.transform(...i),n.smask?this.smaskStack.push({canvas:w.canvas,context:D,offsetX:d,offsetY:f,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(d,f),e.save()),Uc(e,D),this.ctx=D,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(n){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,n.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=vt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...a);const c=se.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(n,e,i,a,c){if(this.#e(),el(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const d=e[2]-e[0],f=e[3]-e[1];if(c&&this.annotationCanvasMap){(i=i.slice())[4]-=e[0],i[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=d,e[3]=f;const[g,v]=se.singularValueDecompose2dScale(vt(this.ctx)),{viewportScale:y}=this,w=Math.ceil(d*this.outputScaleX*y),D=Math.ceil(f*this.outputScaleY*y);this.annotationCanvas=this.canvasFactory.create(w,D);const{canvas:A,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(n,A),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(g,0,0,-v,0,f*v),el(this.ctx)}else el(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],d,f),this.ctx.clip(),this.ctx.beginPath()}this.current=new Fi(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...a)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(n){if(!this.contentVisible)return;const e=n.count;(n=this.getObject(n.data,n)).count=e;const i=this.ctx,a=this.processingType3;if(a&&(void 0===a.compiled&&(a.compiled=function e_(o){const{width:n,height:e}=o;if(n>1e3||e>1e3)return null;const a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),c=n+1;let f,g,v,d=new Uint8Array(c*(e+1));const y=n+7&-8;let w=new Uint8Array(y*e),D=0;for(const M of o.data){let k=128;for(;k>0;)w[D++]=M&k?0:255,k>>=1}let A=0;for(D=0,0!==w[D]&&(d[0]=1,++A),g=1;g<n;g++)w[D]!==w[D+1]&&(d[g]=w[D]?2:1,++A),D++;for(0!==w[D]&&(d[g]=2,++A),f=1;f<e;f++){D=f*y,v=f*c,w[D-y]!==w[D]&&(d[v]=w[D]?1:8,++A);let M=(w[D]?4:0)+(w[D-y]?8:0);for(g=1;g<n;g++)M=(M>>2)+(w[D+1]?4:0)+(w[D-y+1]?8:0),a[M]&&(d[v+g]=a[M],++A),D++;if(w[D-y]!==w[D]&&(d[v+g]=w[D]?2:4,++A),A>1e3)return null}for(D=y*(e-1),v=f*c,0!==w[D]&&(d[v]=8,++A),g=1;g<n;g++)w[D]!==w[D+1]&&(d[v+g]=w[D]?4:8,++A),D++;if(0!==w[D]&&(d[v+g]=4,++A),A>1e3)return null;const S=new Int32Array([0,c,-1,0,-c,0,0,0,1]),T=new Path2D;for(f=0;A&&f<=e;f++){let M=f*c;const k=M+n;for(;M<k&&!d[M];)M++;if(M===k)continue;T.moveTo(M%c,f);const O=M;let j=d[M];do{const B=S[j];do{M+=B}while(!d[M]);const z=d[M];5!==z&&10!==z?(j=z,d[M]=0):(j=z&51*j>>4,d[M]&=j>>2|j<<2),T.lineTo(M%c,M/c|0),d[M]||--A}while(O!==M);--f}return w=null,d=null,function(M){M.save(),M.scale(1/n,-1/e),M.translate(0,-e),M.fill(T),M.beginPath(),M.restore()}}(n)),a.compiled))return void a.compiled(i);const c=this._createMaskCanvas(n),d=c.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(d,c.offsetX,c.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(n,e,i=0,a=0,c,d){if(!this.contentVisible)return;n=this.getObject(n.data,n);const f=this.ctx;f.save();const g=vt(f);f.transform(e,i,a,c,0,0);const v=this._createMaskCanvas(n);f.setTransform(1,0,0,1,v.offsetX-g[4],v.offsetY-g[5]);for(let y=0,w=d.length;y<w;y+=2){const D=se.transform(g,[e,i,a,c,d[y],d[y+1]]),[A,S]=se.applyTransform([0,0],D);f.drawImage(v.canvas,A,S)}f.restore(),this.compose()}paintImageMaskXObjectGroup(n){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,a=this.current.patternFill;for(const c of n){const{data:d,width:f,height:g,transform:v}=c,y=this.cachedCanvases.getCanvas("maskCanvas",f,g),w=y.context;w.save(),bs(w,this.getObject(d,c)),w.globalCompositeOperation="source-in",w.fillStyle=a?i.getPattern(w,this,kr(e),"Fill"):i,w.fillRect(0,0,f,g),w.restore(),e.save(),e.transform(...v),e.scale(1,-1),Bc(e,y.canvas,0,0,f,g,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(n){if(!this.contentVisible)return;const e=this.getObject(n);e?this.paintInlineImageXObject(e):Te("Dependent image isn't ready yet")}paintImageXObjectRepeat(n,e,i,a){if(!this.contentVisible)return;const c=this.getObject(n);if(!c)return void Te("Dependent image isn't ready yet");const d=c.width,f=c.height,g=[];for(let v=0,y=a.length;v<y;v+=2)g.push({transform:[e,0,0,i,a[v],a[v+1]],x:0,y:0,w:d,h:f});this.paintInlineImageXObjectGroup(c,g)}applyTransferMapsToCanvas(n){return"none"!==this.current.transferMaps&&(n.filter=this.current.transferMaps,n.drawImage(n.canvas,0,0),n.filter="none"),n.canvas}applyTransferMapsToBitmap(n){if("none"===this.current.transferMaps)return n.bitmap;const{bitmap:e,width:i,height:a}=n,c=this.cachedCanvases.getCanvas("inlineImage",i,a),d=c.context;return d.filter=this.current.transferMaps,d.drawImage(e,0,0),d.filter="none",c.canvas}paintInlineImageXObject(n){if(!this.contentVisible)return;const e=n.width,i=n.height,a=this.ctx;if(this.save(),!en){const{filter:f}=a;"none"!==f&&""!==f&&(a.filter="none")}let c;if(a.scale(1/e,-1/i),n.bitmap)c=this.applyTransferMapsToBitmap(n);else if("function"==typeof HTMLElement&&n instanceof HTMLElement||!n.data)c=n;else{const g=this.cachedCanvases.getCanvas("inlineImage",e,i).context;ys(g,n),c=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(c,kr(a));a.imageSmoothingEnabled=Vc(vt(a),n.interpolate),Bc(a,d.img,0,0,d.paintWidth,d.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(n,e){if(!this.contentVisible)return;const i=this.ctx;let a;if(n.bitmap)a=n.bitmap;else{const g=this.cachedCanvases.getCanvas("inlineImage",n.width,n.height).context;ys(g,n),a=this.applyTransferMapsToCanvas(g)}for(const c of e)i.save(),i.transform(...c.transform),i.scale(1,-1),Bc(i,a,c.x,c.y,c.w,c.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(n){}markPointProps(n,e){}beginMarkedContent(n){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(n,e){this.markedContentStack.push("OC"===n?{visible:this.optionalContentConfig.isVisible(e)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(n){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip&&(e||(this.pendingClip===$h?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const n=vt(this.ctx);if(0===n[1]&&0===n[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(n[0]),Math.abs(n[3]));else{const e=Math.abs(n[0]*n[3]-n[2]*n[1]),i=Math.hypot(n[0],n[2]),a=Math.hypot(n[1],n[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:n}=this.current,{a:e,b:i,c:a,d:c}=this.ctx.getTransform();let d,f;if(0===i&&0===a){const g=Math.abs(e),v=Math.abs(c);if(g===v)if(0===n)d=f=1/g;else{const y=g*n;d=f=y<1?1/y:1}else if(0===n)d=1/g,f=1/v;else{const y=g*n,w=v*n;d=y<1?1/y:1,f=w<1?1/w:1}}else{const g=Math.abs(e*c-i*a),v=Math.hypot(e,i),y=Math.hypot(a,c);if(0===n)d=y/g,f=v/g;else{const w=n*g;d=y>w?y/w:1,f=v>w?v/w:1}}this._cachedScaleForStroking[0]=d,this._cachedScaleForStroking[1]=f}return this._cachedScaleForStroking}rescaleAndStroke(n){const{ctx:e}=this,{lineWidth:i}=this.current,[a,c]=this.getScaleForStroking();if(e.lineWidth=i||1,1===a&&1===c)return void e.stroke();const d=e.getLineDash();if(n&&e.save(),e.scale(a,c),d.length>0){const f=Math.max(a,c);e.setLineDash(d.map(g=>g/f)),e.lineDashOffset/=f}e.stroke(),n&&e.restore()}isContentVisible(){for(let n=this.markedContentStack.length-1;n>=0;n--)if(!this.markedContentStack[n].visible)return!1;return!0}}for(const o in br)void 0!==tl.prototype[o]&&(tl.prototype[br[o]]=tl.prototype[o]);class nl{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(n){if(!(typeof Worker<"u"&&n instanceof Worker)&&null!==n)throw new Error("Invalid `workerPort` type.");this.#e=n}static get workerSrc(){return this.#t}static set workerSrc(n){if("string"!=typeof n)throw new Error("Invalid `workerSrc` type.");this.#t=n}}function Vm(){}function sr(o){switch(o instanceof Error||"object"==typeof o&&null!==o||Je('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),o.name){case"AbortException":return new Ri(o.message);case"MissingPDFException":return new qa(o.message);case"PasswordException":return new Ch(o.message,o.code);case"UnexpectedResponseException":return new fs(o.message,o.status);case"UnknownErrorException":return new Ah(o.message,o.details);default:return new Ah(o.message,o.toString())}}class rl{#e=new AbortController;constructor(n,e,i){this.sourceName=n,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:n}){if(n.targetName!==this.sourceName)return;if(n.stream)return void this.#r(n);if(n.callback){const i=n.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],1===n.callback)a.resolve(n.data);else{if(2!==n.callback)throw new Error("Unexpected callback case");a.reject(sr(n.reason))}return}const e=this.actionHandler[n.action];if(!e)throw new Error(`Unknown action from worker: ${n.action}`);if(n.callbackId){const i=this.sourceName,a=n.sourceName,c=this.comObj;Promise.try(e,n.data).then(function(d){c.postMessage({sourceName:i,targetName:a,callback:1,callbackId:n.callbackId,data:d})},function(d){c.postMessage({sourceName:i,targetName:a,callback:2,callbackId:n.callbackId,reason:sr(d)})})}else n.streamId?this.#n(n):e(n.data)}on(n,e){const i=this.actionHandler;if(i[n])throw new Error(`There is already an actionName called "${n}"`);i[n]=e}send(n,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:n,data:e},i)}sendWithPromise(n,e,i){const a=this.callbackId++,c=Promise.withResolvers();this.callbackCapabilities[a]=c;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:n,callbackId:a,data:e},i)}catch(d){c.reject(d)}return c.promise}sendWithStream(n,e,i,a){const c=this.streamId++,d=this.sourceName,f=this.targetName,g=this.comObj;return new ReadableStream({start:v=>{const y=Promise.withResolvers();return this.streamControllers[c]={controller:v,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},g.postMessage({sourceName:d,targetName:f,action:n,streamId:c,data:e,desiredSize:v.desiredSize},a),y.promise},pull:v=>{const y=Promise.withResolvers();return this.streamControllers[c].pullCall=y,g.postMessage({sourceName:d,targetName:f,stream:6,streamId:c,desiredSize:v.desiredSize}),y.promise},cancel:v=>{At(v instanceof Error,"cancel must have a valid reason");const y=Promise.withResolvers();return this.streamControllers[c].cancelCall=y,this.streamControllers[c].isClosed=!0,g.postMessage({sourceName:d,targetName:f,stream:1,streamId:c,reason:sr(v)}),y.promise}},i)}#n(n){const e=n.streamId,i=this.sourceName,a=n.sourceName,c=this.comObj,d=this,f=this.actionHandler[n.action],g={enqueue(v,y=1,w){if(this.isCancelled)return;const D=this.desiredSize;this.desiredSize-=y,D>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),c.postMessage({sourceName:i,targetName:a,stream:4,streamId:e,chunk:v},w)},close(){this.isCancelled||(this.isCancelled=!0,c.postMessage({sourceName:i,targetName:a,stream:3,streamId:e}),delete d.streamSinks[e])},error(v){At(v instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,c.postMessage({sourceName:i,targetName:a,stream:5,streamId:e,reason:sr(v)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:n.desiredSize,ready:null};g.sinkCapability.resolve(),g.ready=g.sinkCapability.promise,this.streamSinks[e]=g,Promise.try(f,n.data,g).then(function(){c.postMessage({sourceName:i,targetName:a,stream:8,streamId:e,success:!0})},function(v){c.postMessage({sourceName:i,targetName:a,stream:8,streamId:e,reason:sr(v)})})}#r(n){const e=n.streamId,i=this.sourceName,a=n.sourceName,c=this.comObj,d=this.streamControllers[e],f=this.streamSinks[e];switch(n.stream){case 8:n.success?d.startCall.resolve():d.startCall.reject(sr(n.reason));break;case 7:n.success?d.pullCall.resolve():d.pullCall.reject(sr(n.reason));break;case 6:if(!f){c.postMessage({sourceName:i,targetName:a,stream:7,streamId:e,success:!0});break}f.desiredSize<=0&&n.desiredSize>0&&f.sinkCapability.resolve(),f.desiredSize=n.desiredSize,Promise.try(f.onPull||Vm).then(function(){c.postMessage({sourceName:i,targetName:a,stream:7,streamId:e,success:!0})},function(v){c.postMessage({sourceName:i,targetName:a,stream:7,streamId:e,reason:sr(v)})});break;case 4:if(At(d,"enqueue should have stream controller"),d.isClosed)break;d.controller.enqueue(n.chunk);break;case 3:if(At(d,"close should have stream controller"),d.isClosed)break;d.isClosed=!0,d.controller.close(),this.#s(d,e);break;case 5:At(d,"error should have stream controller"),d.controller.error(sr(n.reason)),this.#s(d,e);break;case 2:n.success?d.cancelCall.resolve():d.cancelCall.reject(sr(n.reason)),this.#s(d,e);break;case 1:if(!f)break;const g=sr(n.reason);Promise.try(f.onCancel||Vm,g).then(function(){c.postMessage({sourceName:i,targetName:a,stream:2,streamId:e,success:!0})},function(v){c.postMessage({sourceName:i,targetName:a,stream:2,streamId:e,reason:sr(v)})}),f.sinkCapability.reject(g),f.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}#s(n,e){var i=this;return te(function*(){yield Promise.allSettled([n.startCall?.promise,n.pullCall?.promise,n.cancelCall?.promise]),delete i.streamControllers[e]})()}destroy(){this.#e?.abort(),this.#e=null}}class zh{#e;#t;constructor({parsedData:n,rawData:e}){this.#e=n,this.#t=e}getRaw(){return this.#t}get(n){return this.#e.get(n)??null}getAll(){return Nc(this.#e)}has(n){return this.#e.has(n)}}const Bn=Symbol("INTERNAL");class Hc{#e=!1;#t=!1;#n=!1;#r=!0;constructor(n,{name:e,intent:i,usage:a,rbGroups:c}){this.#e=!!(2&n),this.#t=!!(4&n),this.name=e,this.intent=i,this.usage=a,this.rbGroups=c}get visible(){if(this.#n)return this.#r;if(!this.#r)return!1;const{print:n,view:e}=this.usage;return this.#e?"OFF"!==e?.viewState:!this.#t||"OFF"!==n?.printState}_setVisible(n,e,i=!1){n!==Bn&&Je("Internal method `_setVisible` called."),this.#n=i,this.#r=e}}class Hm{#e=null;#t=new Map;#n=null;#r=null;constructor(n,e=2){if(this.renderingIntent=e,this.name=null,this.creator=null,null!==n){this.name=n.name,this.creator=n.creator,this.#r=n.order;for(const i of n.groups)this.#t.set(i.id,new Hc(e,i));if("OFF"===n.baseState)for(const i of this.#t.values())i._setVisible(Bn,!1);for(const i of n.on)this.#t.get(i)._setVisible(Bn,!0);for(const i of n.off)this.#t.get(i)._setVisible(Bn,!1);this.#n=this.getHash()}}#s(n){const e=n.length;if(e<2)return!0;const i=n[0];for(let a=1;a<e;a++){const c=n[a];let d;if(Array.isArray(c))d=this.#s(c);else{if(!this.#t.has(c))return Te(`Optional content group not found: ${c}`),!0;d=this.#t.get(c).visible}switch(i){case"And":if(!d)return!1;break;case"Or":if(d)return!0;break;case"Not":return!d;default:return!0}}return"And"===i}isVisible(n){if(0===this.#t.size)return!0;if(!n)return wo("Optional content group not defined."),!0;if("OCG"===n.type)return this.#t.has(n.id)?this.#t.get(n.id).visible:(Te(`Optional content group not found: ${n.id}`),!0);if("OCMD"===n.type){if(n.expression)return this.#s(n.expression);if(!n.policy||"AnyOn"===n.policy){for(const e of n.ids){if(!this.#t.has(e))return Te(`Optional content group not found: ${e}`),!0;if(this.#t.get(e).visible)return!0}return!1}if("AllOn"===n.policy){for(const e of n.ids){if(!this.#t.has(e))return Te(`Optional content group not found: ${e}`),!0;if(!this.#t.get(e).visible)return!1}return!0}if("AnyOff"===n.policy){for(const e of n.ids){if(!this.#t.has(e))return Te(`Optional content group not found: ${e}`),!0;if(!this.#t.get(e).visible)return!0}return!1}if("AllOff"===n.policy){for(const e of n.ids){if(!this.#t.has(e))return Te(`Optional content group not found: ${e}`),!0;if(this.#t.get(e).visible)return!1}return!0}return Te(`Unknown optional content policy ${n.policy}.`),!0}return Te(`Unknown group type ${n.type}.`),!0}setVisibility(n,e=!0,i=!0){const a=this.#t.get(n);if(a){if(i&&e&&a.rbGroups.length)for(const c of a.rbGroups)for(const d of c)d!==n&&this.#t.get(d)?._setVisible(Bn,!1,!0);a._setVisible(Bn,!!e,!0),this.#e=null}else Te(`Optional content group not found: ${n}`)}setOCGState({state:n,preserveRB:e}){let i;for(const a of n){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const c=this.#t.get(a);if(c)switch(i){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!c.visible,e)}}this.#e=null}get hasInitialVisibility(){return null===this.#n||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?Nc(this.#t):null}getGroup(n){return this.#t.get(n)||null}getHash(){if(null!==this.#e)return this.#e;const n=new xm;for(const[e,i]of this.#t)n.update(`${e}:${i.visible}`);return this.#e=n.hexdigest()}}class il{constructor(n,{disableRange:e=!1,disableStream:i=!1}){At(n,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:c,progressiveDone:d,contentDispositionFilename:f}=n;if(this._queuedChunks=[],this._progressiveDone=d,this._contentDispositionFilename=f,c?.length>0){const g=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;this._queuedChunks.push(g)}this._pdfDataRangeTransport=n,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],n.addRangeListener((g,v)=>{this._onReceiveData({begin:g,chunk:v})}),n.addProgressListener((g,v)=>{this._onProgress({loaded:g,total:v})}),n.addProgressiveReadListener(g=>{this._onReceiveData({chunk:g})}),n.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),n.transportReady()}_onReceiveData({begin:n,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;void 0===n?this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i):At(this._rangeReaders.some(function(c){return c._begin===n&&(c._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(n){void 0===n.total?this._rangeReaders[0]?.onProgress?.({loaded:n.loaded}):this._fullRequestReader?.onProgress?.({loaded:n.loaded,total:n.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(n){const e=this._rangeReaders.indexOf(n);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){At(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const n=this._queuedChunks;return this._queuedChunks=null,new r_(this,n,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(n,e){if(e<=this._progressiveDataLength)return null;const i=new i_(this,n,e);return this._pdfDataRangeTransport.requestDataRange(n,e),this._rangeReaders.push(i),i}cancelAllRequests(n){this._fullRequestReader?.cancel(n);for(const e of this._rangeReaders.slice(0))e.cancel(n);this._pdfDataRangeTransport.abort()}}class r_{constructor(n,e,i=!1,a=null){this._stream=n,this._done=i||!1,this._filename=Oc(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const c of this._queuedChunks)this._loaded+=c.byteLength;this._requests=[],this._headersReady=Promise.resolve(),n._fullRequestReader=this,this.onProgress=null}_enqueue(n){this._done||(this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunks.push(n),this._loaded+=n.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var n=this;return te(function*(){if(n._queuedChunks.length>0)return{value:n._queuedChunks.shift(),done:!1};if(n._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return n._requests.push(e),e.promise})()}cancel(n){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class i_{constructor(n,e,i){this._stream=n,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(n){if(!this._done){if(0===this._requests.length)this._queuedChunk=n;else{this._requests.shift().resolve({value:n,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var n=this;return te(function*(){if(n._queuedChunk){const i=n._queuedChunk;return n._queuedChunk=null,{value:i,done:!1}}if(n._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return n._requests.push(e),e.promise})()}cancel(n){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Wh(o,n){const e=new Headers;if(!o||!n||"object"!=typeof n)return e;for(const i in n){const a=n[i];void 0!==a&&e.append(i,a)}return e}function _r(o){try{return new URL(o).origin}catch{}return null}function So({responseHeaders:o,isHttp:n,rangeChunkSize:e,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},c=parseInt(o.get("Content-Length"),10);return!Number.isInteger(c)||(a.suggestedLength=c,c<=2*e)||i||!n||"bytes"!==o.get("Accept-Ranges")||"identity"!==(o.get("Content-Encoding")||"identity")||(a.allowRangeRequests=!0),a}function s_(o){const n=o.get("Content-Disposition");if(n){let e=function Gh(o){let n=!0,e=i("filename\\*","i").exec(o);if(e){e=e[1];let y=f(e);return y=unescape(y),y=g(y),y=v(y),c(y)}if(e=function d(y){const w=[];let D;const A=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(D=A.exec(y));){let[,T,x,M]=D;if(T=parseInt(T,10),T in w){if(0===T)break}else w[T]=[x,M]}const S=[];for(let T=0;T<w.length&&T in w;++T){let[x,M]=w[T];M=f(M),x&&(M=unescape(M),0===T&&(M=g(M))),S.push(M)}return S.join("")}(o),e)return c(v(e));if(e=i("filename","i").exec(o),e){e=e[1];let y=f(e);return y=v(y),c(y)}function i(y,w){return new RegExp("(?:^|;)\\s*"+y+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',w)}function a(y,w){if(y){if(!/^[\x00-\xFF]+$/.test(w))return w;try{const D=new TextDecoder(y,{fatal:!0}),A=ps(w);w=D.decode(A),n=!1}catch{}}return w}function c(y){return n&&/[\x80-\xff]/.test(y)&&(y=a("utf-8",y),n&&(y=a("iso-8859-1",y))),y}function f(y){if(y.startsWith('"')){const w=y.slice(1).split('\\"');for(let D=0;D<w.length;++D){const A=w[D].indexOf('"');-1!==A&&(w[D]=w[D].slice(0,A),w.length=D+1),w[D]=w[D].replaceAll(/\\(.)/g,"$1")}y=w.join('"')}return y}function g(y){const w=y.indexOf("'");return-1===w?y:a(y.slice(0,w),y.slice(w+1).replace(/^[^']*'/,""))}function v(y){return!y.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(y)?y:y.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(w,D,A,S){if("q"===A||"Q"===A)return a(D,S=(S=S.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(T,x){return String.fromCharCode(parseInt(x,16))}));try{S=atob(S)}catch{}return a(D,S)})}return""}(n);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Oc(e))return e}return null}function _s(o,n){return 404===o||0===o&&n.startsWith("file:")?new qa('Missing PDF "'+n+'".'):new fs(`Unexpected server response (${o}) while retrieving PDF "${n}".`,o)}function qh(o){return 200===o||206===o}function Xh(o,n,e){return{method:"GET",headers:o,signal:e.signal,mode:"cors",credentials:n?"include":"same-origin",redirect:"follow"}}function $m(o){return o instanceof Uint8Array?o.buffer:o instanceof ArrayBuffer?o:(Te(`getArrayBuffer - unexpected data format: ${o}`),new Uint8Array(o).buffer)}class Io{_responseOrigin=null;constructor(n){this.source=n,this.isHttp=/^https?:/i.test(n.url),this.headers=Wh(this.isHttp,n.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return At(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new o_(this),this._fullRequestReader}getRangeReader(n,e){if(e<=this._progressiveDataLength)return null;const i=new a_(this,n,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(n){this._fullRequestReader?.cancel(n);for(const e of this._rangeRequestReaders.slice(0))e.cancel(n)}}class o_{constructor(n){this._stream=n,this._reader=null,this._loaded=0,this._filename=null;const e=n.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(n.headers),a=e.url;fetch(a,Xh(i,this._withCredentials,this._abortController)).then(c=>{if(n._responseOrigin=_r(c.url),!qh(c.status))throw _s(c.status,a);this._reader=c.body.getReader(),this._headersCapability.resolve();const d=c.headers,{allowRangeRequests:f,suggestedLength:g}=So({responseHeaders:d,isHttp:n.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=f,this._contentLength=g||this._contentLength,this._filename=s_(d),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ri("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var n=this;return te(function*(){yield n._headersCapability.promise;const{value:e,done:i}=yield n._reader.read();return i?{value:e,done:i}:(n._loaded+=e.byteLength,n.onProgress?.({loaded:n._loaded,total:n._contentLength}),{value:$m(e),done:!1})})()}cancel(n){this._reader?.cancel(n),this._abortController.abort()}}class a_{constructor(n,e,i){this._stream=n,this._reader=null,this._loaded=0;const a=n.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const c=new Headers(n.headers);c.append("Range",`bytes=${e}-${i-1}`);const d=a.url;fetch(d,Xh(c,this._withCredentials,this._abortController)).then(f=>{const g=_r(f.url);if(g!==n._responseOrigin)throw new Error(`Expected range response-origin "${g}" to match "${n._responseOrigin}".`);if(!qh(f.status))throw _s(f.status,d);this._readCapability.resolve(),this._reader=f.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var n=this;return te(function*(){yield n._readCapability.promise;const{value:e,done:i}=yield n._reader.read();return i?{value:e,done:i}:(n._loaded+=e.byteLength,n.onProgress?.({loaded:n._loaded}),{value:$m(e),done:!1})})()}cancel(n){this._reader?.cancel(n),this._abortController.abort()}}class c_{_responseOrigin=null;constructor({url:n,httpHeaders:e,withCredentials:i}){this.url=n,this.isHttp=/^https?:/i.test(n),this.headers=Wh(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(n,e,i){const a={begin:n,end:e};for(const c in i)a[c]=i[c];return this.request(a)}requestFull(n){return this.request(n)}request(n){const e=new XMLHttpRequest,i=this.currXhrId++,a=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[c,d]of this.headers)e.setRequestHeader(c,d);return this.isHttp&&"begin"in n&&"end"in n?(e.setRequestHeader("Range",`bytes=${n.begin}-${n.end-1}`),a.expectedStatus=206):a.expectedStatus=200,e.responseType="arraybuffer",n.onError&&(e.onerror=function(c){n.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),a.onHeadersReceived=n.onHeadersReceived,a.onDone=n.onDone,a.onError=n.onError,a.onProgress=n.onProgress,e.send(null),i}onProgress(n,e){const i=this.pendingRequests[n];i&&i.onProgress?.(e)}onStateChange(n,e){const i=this.pendingRequests[n];if(!i)return;const a=i.xhr;if(a.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),4!==a.readyState||!(n in this.pendingRequests))return;if(delete this.pendingRequests[n],0===a.status&&this.isHttp)return void i.onError?.(a.status);const c=a.status||200;if((200!==c||206!==i.expectedStatus)&&c!==i.expectedStatus)return void i.onError?.(a.status);const f=function l_(o){const n=o.response;return"string"!=typeof n?n:ps(n).buffer}(a);if(206===c){const g=a.getResponseHeader("Content-Range"),v=/bytes (\d+)-(\d+)\/(\d+)/.exec(g);i.onDone({begin:parseInt(v[1],10),chunk:f})}else f?i.onDone({begin:0,chunk:f}):i.onError?.(a.status)}getRequestXhr(n){return this.pendingRequests[n].xhr}isPendingRequest(n){return n in this.pendingRequests}abortRequest(n){const e=this.pendingRequests[n].xhr;delete this.pendingRequests[n],e.abort()}}class u_{constructor(n){this._source=n,this._manager=new c_(n),this._rangeChunkSize=n.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(n){const e=this._rangeRequestReaders.indexOf(n);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return At(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new d_(this._manager,this._source),this._fullRequestReader}getRangeReader(n,e){const i=new $c(this._manager,n,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(n){this._fullRequestReader?.cancel(n);for(const e of this._rangeRequestReaders.slice(0))e.cancel(n)}}class d_{constructor(n,e){this._manager=n;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=n.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const n=this._fullRequestId,e=this._manager.getRequestXhr(n);this._manager._responseOrigin=_r(e.responseURL);const i=e.getAllResponseHeaders(),a=new Headers(i?i.trim().split(/[\r\n]+/).map(f=>{const[g,...v]=f.split(": ");return[g,v.join(": ")]}):[]),{allowRangeRequests:c,suggestedLength:d}=So({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});c&&(this._isRangeSupported=!0),this._contentLength=d||this._contentLength,this._filename=s_(a),this._isRangeSupported&&this._manager.abortRequest(n),this._headersCapability.resolve()}_onDone(n){if(n&&(this._requests.length>0?this._requests.shift().resolve({value:n.chunk,done:!1}):this._cachedChunks.push(n.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(n){this._storedError=_s(n,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(n){this.onProgress?.({loaded:n.loaded,total:n.lengthComputable?n.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){var n=this;return te(function*(){if(yield n._headersCapability.promise,n._storedError)throw n._storedError;if(n._cachedChunks.length>0)return{value:n._cachedChunks.shift(),done:!1};if(n._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return n._requests.push(e),e.promise})()}cancel(n){this._done=!0,this._headersCapability.reject(n);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class $c{constructor(n,e,i){this._manager=n;const a={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=n.url,this._requestId=n.requestRange(e,i,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const n=_r(this._manager.getRequestXhr(this._requestId)?.responseURL);n!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${n}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(n){const e=n.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(n){this._storedError??=_s(n,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(n){this.isStreamingSupported||this.onProgress?.({loaded:n.loaded})}get isStreamingSupported(){return!1}read(){var n=this;return te(function*(){if(n._storedError)throw n._storedError;if(null!==n._queuedChunk){const i=n._queuedChunk;return n._queuedChunk=null,{value:i,done:!1}}if(n._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return n._requests.push(e),e.promise})()}cancel(n){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const h_=/^[a-z][a-z0-9\-+.]+:/i;class zm{constructor(n){this.source=n,this.url=function f_(o){if(h_.test(o))return new URL(o);const n=process.getBuiltinModule("url");return new URL(n.pathToFileURL(o))}(n.url),At("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return At(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Gm(this),this._fullRequestReader}getRangeReader(n,e){if(e<=this._progressiveDataLength)return null;const i=new Qh(this,n,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(n){this._fullRequestReader?.cancel(n);for(const e of this._rangeRequestReaders.slice(0))e.cancel(n)}}class Gm{constructor(n){this._url=n.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=n.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},a=>{"ENOENT"===a.code&&(a=new qa(`Missing PDF "${this._url}".`)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var n=this;return te(function*(){if(yield n._readCapability.promise,n._done)return{value:void 0,done:!0};if(n._storedError)throw n._storedError;const e=n._readableStream.read();return null===e?(n._readCapability=Promise.withResolvers(),n.read()):(n._loaded+=e.length,n.onProgress?.({loaded:n._loaded,total:n._contentLength}),{value:new Uint8Array(e).buffer,done:!1})})()}cancel(n){this._readableStream?this._readableStream.destroy(n):this._error(n)}_error(n){this._storedError=n,this._readCapability.resolve()}_setReadableStream(n){this._readableStream=n,n.on("readable",()=>{this._readCapability.resolve()}),n.on("end",()=>{n.destroy(),this._done=!0,this._readCapability.resolve()}),n.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ri("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Qh{constructor(n,e,i){this._url=n.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.source.disableStream;const c=process.getBuiltinModule("fs");this._setReadableStream(c.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}read(){var n=this;return te(function*(){if(yield n._readCapability.promise,n._done)return{value:void 0,done:!0};if(n._storedError)throw n._storedError;const e=n._readableStream.read();return null===e?(n._readCapability=Promise.withResolvers(),n.read()):(n._loaded+=e.length,n.onProgress?.({loaded:n._loaded}),{value:new Uint8Array(e).buffer,done:!1})})()}cancel(n){this._readableStream?this._readableStream.destroy(n):this._error(n)}_error(n){this._storedError=n,this._readCapability.resolve()}_setReadableStream(n){this._readableStream=n,n.on("readable",()=>{this._readCapability.resolve()}),n.on("end",()=>{n.destroy(),this._done=!0,this._readCapability.resolve()}),n.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class tn{#e=Promise.withResolvers();#t=null;#n=!1;#r=!!globalThis.FontInspector?.enabled;#s=null;#i=null;#c=0;#a=0;#u=null;#l=null;#d=0;#o=0;#h=Object.create(null);#f=[];#p=null;#m=[];#g=new WeakMap;#v=null;static#y=new Map;static#w=new Map;static#_=new WeakMap;static#C=null;static#A=new Set;constructor({textContentSource:n,container:e,viewport:i}){if(n instanceof ReadableStream)this.#p=n;else{if("object"!=typeof n)throw new Error('No "textContentSource" parameter specified.');this.#p=new ReadableStream({start(g){g.enqueue(n),g.close()}})}this.#t=this.#l=e,this.#o=i.scale*(globalThis.devicePixelRatio||1),this.#d=i.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:c,pageX:d,pageY:f}=i.rawDims;this.#v=[1,0,0,-1,-d,f+c],this.#a=a,this.#c=c,tn.#R(),Fr(e,i),this.#e.promise.finally(()=>{tn.#A.delete(this),this.#i=null,this.#h=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:n,isFirefox:e}=Vt.platform;return je(this,"fontFamilyMap",new Map([["sans-serif",(n&&e?"Calibri, ":"")+"sans-serif"],["monospace",(n&&e?"Lucida Console, ":"")+"monospace"]]))}render(){const n=()=>{this.#u.read().then(({value:e,done:i})=>{i?this.#e.resolve():(this.#s??=e.lang,Object.assign(this.#h,e.styles),this.#S(e.items),n())},this.#e.reject)};return this.#u=this.#p.getReader(),tn.#A.add(this),n(),this.#e.promise}update({viewport:n,onBefore:e=null}){const i=n.scale*(globalThis.devicePixelRatio||1),a=n.rotation;if(a!==this.#d&&(e?.(),this.#d=a,Fr(this.#l,{rotation:a})),i!==this.#o){e?.(),this.#o=i;const c={div:null,properties:null,ctx:tn.#M(this.#s)};for(const d of this.#m)c.properties=this.#g.get(d),c.div=d,this.#E(c)}}cancel(){const n=new Ri("TextLayer task cancelled.");this.#u?.cancel(n).catch(()=>{}),this.#u=null,this.#e.reject(n)}get textDivs(){return this.#m}get textContentItemsStr(){return this.#f}#S(n){if(this.#n)return;this.#i.ctx??=tn.#M(this.#s);const e=this.#m,i=this.#f;for(const a of n){if(e.length>1e5)return Te("Ignoring additional textDivs for performance reasons."),void(this.#n=!0);if(void 0!==a.str)i.push(a.str),this.#T(a);else if("beginMarkedContentProps"===a.type||"beginMarkedContent"===a.type){const c=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),null!==a.id&&this.#t.setAttribute("id",`${a.id}`),c.append(this.#t)}else"endMarkedContent"===a.type&&(this.#t=this.#t.parentNode)}}#T(n){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:""!==n.str,hasEOL:n.hasEOL,fontSize:0};this.#m.push(e);const a=se.transform(this.#v,n.transform);let c=Math.atan2(a[1],a[0]);const d=this.#h[n.fontName];d.vertical&&(c+=Math.PI/2);let f=this.#r&&d.fontSubstitution||d.fontFamily;f=tn.fontFamilyMap.get(f)||f;const g=Math.hypot(a[2],a[3]),v=g*tn.#O(f,this.#s);let y,w;0===c?(y=a[4],w=a[5]-v):(y=a[4]+v*Math.sin(c),w=a[5]-v*Math.cos(c));const D="calc(var(--scale-factor)*",A=e.style;this.#t===this.#l?(A.left=`${(100*y/this.#a).toFixed(2)}%`,A.top=`${(100*w/this.#c).toFixed(2)}%`):(A.left=`${D}${y.toFixed(2)}px)`,A.top=`${D}${w.toFixed(2)}px)`),A.fontSize=`${D}${(tn.#C*g).toFixed(2)}px)`,A.fontFamily=f,i.fontSize=g,e.setAttribute("role","presentation"),e.textContent=n.str,e.dir=n.dir,this.#r&&(e.dataset.fontName=d.fontSubstitutionLoadedName||n.fontName),0!==c&&(i.angle=c*(180/Math.PI));let S=!1;if(n.str.length>1)S=!0;else if(" "!==n.str&&n.transform[0]!==n.transform[3]){const T=Math.abs(n.transform[0]),x=Math.abs(n.transform[3]);T!==x&&Math.max(T,x)/Math.min(T,x)>1.5&&(S=!0)}if(S&&(i.canvasWidth=d.vertical?n.height:n.width),this.#g.set(e,i),this.#i.div=e,this.#i.properties=i,this.#E(this.#i),i.hasText&&this.#t.append(e),i.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),this.#t.append(T)}}#E(n){const{div:e,properties:i,ctx:a}=n,{style:c}=e;let d="";if(tn.#C>1&&(d=`scale(${1/tn.#C})`),0!==i.canvasWidth&&i.hasText){const{fontFamily:f}=c,{canvasWidth:g,fontSize:v}=i;tn.#I(a,v*this.#o,f);const{width:y}=a.measureText(e.textContent);y>0&&(d=`scaleX(${g*this.#o/y}) ${d}`)}0!==i.angle&&(d=`rotate(${i.angle}deg) ${d}`),d.length>0&&(c.transform=d)}static cleanup(){if(!(this.#A.size>0)){this.#y.clear();for(const{canvas:n}of this.#w.values())n.remove();this.#w.clear()}}static#M(n=null){let e=this.#w.get(n||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=n,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#w.set(n,e),this.#_.set(e,{size:0,family:""})}return e}static#I(n,e,i){const a=this.#_.get(n);e===a.size&&i===a.family||(n.font=`${e}px ${i}`,a.size=e,a.family=i)}static#R(){if(null!==this.#C)return;const n=document.createElement("div");n.style.opacity=0,n.style.lineHeight=1,n.style.fontSize="1px",n.style.position="absolute",n.textContent="X",document.body.append(n),this.#C=n.getBoundingClientRect().height,n.remove()}static#O(n,e){const i=this.#y.get(n);if(i)return i;const a=this.#M(e);a.canvas.width=a.canvas.height=30,this.#I(a,30,n);const c=a.measureText("");let d=c.fontBoundingBoxAscent,f=Math.abs(c.fontBoundingBoxDescent);if(d){const y=d/(d+f);return this.#y.set(n,y),a.canvas.width=a.canvas.height=0,y}a.strokeStyle="red",a.clearRect(0,0,30,30),a.strokeText("g",0,0);let g=a.getImageData(0,0,30,30).data;f=0;for(let y=g.length-1-3;y>=0;y-=4)if(g[y]>0){f=Math.ceil(y/4/30);break}a.clearRect(0,0,30,30),a.strokeText("A",0,30),g=a.getImageData(0,0,30,30).data,d=0;for(let y=0,w=g.length;y<w;y+=4)if(g[y]>0){d=30-Math.floor(y/4/30);break}a.canvas.width=a.canvas.height=0;const v=d?d/(d+f):.8;return this.#y.set(n,v),v}}class To{static textContent(n){const e=[],i={items:e,styles:Object.create(null)};return function a(c){if(!c)return;let d=null;const f=c.name;if("#text"===f)d=c.value;else{if(!To.shouldBuildText(f))return;c?.attributes?.textContent?d=c.attributes.textContent:c.value&&(d=c.value)}if(null!==d&&e.push({str:d}),c.children)for(const g of c.children)a(g)}(n),i}static shouldBuildText(n){return!("textarea"===n||"input"===n||"option"===n||"select"===n)}}const Xm=65536,m_=en?class Ww extends Lc{_createCanvas(n,e){return process.getBuiltinModule("module").createRequire("file:///home/diego/Documents/repositoryGitHub/scriptagher/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(n,e)}}:class zw extends Lc{constructor({ownerDocument:n=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=n}_createCanvas(n,e){const i=this._document.createElement("canvas");return i.width=n,i.height=e,i}},Zh=en?class qw extends Ph{_fetch(n){return te(function*(){return km(n)})()}}:Pm,Jh=en?class Gw extends Oh{}:class Om extends Oh{#e;#t;#n;#r;#s;#i;#c=0;constructor({docId:n,ownerDocument:e=globalThis.document}){super(),this.#r=n,this.#s=e}get#a(){return this.#t||=new Map}get#u(){return this.#i||=new Map}get#l(){if(!this.#n){const n=this.#s.createElement("div"),{style:e}=n;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#s.createElementNS(ti,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#s.createElementNS(ti,"defs"),n.append(i),i.append(this.#n),this.#s.body.append(n)}return this.#n}#d(n){if(1===n.length){const g=n[0],v=new Array(256);for(let w=0;w<256;w++)v[w]=g[w]/255;const y=v.join(",");return[y,y,y]}const[e,i,a]=n,c=new Array(256),d=new Array(256),f=new Array(256);for(let g=0;g<256;g++)c[g]=e[g]/255,d[g]=i[g]/255,f[g]=a[g]/255;return[c.join(","),d.join(","),f.join(",")]}#o(n){if(void 0===this.#e){this.#e="";const e=this.#s.URL;e!==this.#s.baseURI&&(ki(e)?Te('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=e.split("#",1)[0])}return`url(${this.#e}#${n})`}addFilter(n){if(!n)return"none";let e=this.#a.get(n);if(e)return e;const[i,a,c]=this.#d(n),d=1===n.length?i:`${i}${a}${c}`;if(e=this.#a.get(d),e)return this.#a.set(n,e),e;const f=`g_${this.#r}_transfer_map_${this.#c++}`,g=this.#o(f);this.#a.set(n,g),this.#a.set(d,g);const v=this.#p(f);return this.#g(i,a,c,v),g}addHCMFilter(n,e){const i=`${n}-${e}`,a="base";let c=this.#u.get(a);if(c?.key===i||(c?(c.filter?.remove(),c.key=i,c.url="none",c.filter=null):(c={key:i,url:"none",filter:null},this.#u.set(a,c)),!n||!e))return c.url;const d=this.#y(n);n=se.makeHexColor(...d);const f=this.#y(e);if(e=se.makeHexColor(...f),this.#l.style.color="","#000000"===n&&"#ffffff"===e||n===e)return c.url;const g=new Array(256);for(let A=0;A<=255;A++){const S=A/255;g[A]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const v=g.join(","),y=`g_${this.#r}_hcm_filter`,w=c.filter=this.#p(y);this.#g(v,v,v,w),this.#f(w);const D=(A,S)=>{const T=d[A]/255,x=f[A]/255,M=new Array(S+1);for(let k=0;k<=S;k++)M[k]=T+k/S*(x-T);return M.join(",")};return this.#g(D(0,5),D(1,5),D(2,5),w),c.url=this.#o(y),c.url}addAlphaFilter(n){let e=this.#a.get(n);if(e)return e;const[i]=this.#d([n]),a=`alpha_${i}`;if(e=this.#a.get(a),e)return this.#a.set(n,e),e;const c=`g_${this.#r}_alpha_map_${this.#c++}`,d=this.#o(c);this.#a.set(n,d),this.#a.set(a,d);const f=this.#p(c);return this.#v(i,f),d}addLuminosityFilter(n){let i,a,e=this.#a.get(n||"luminosity");if(e)return e;if(n?([i]=this.#d([n]),a=`luminosity_${i}`):a="luminosity",e=this.#a.get(a),e)return this.#a.set(n,e),e;const c=`g_${this.#r}_luminosity_map_${this.#c++}`,d=this.#o(c);this.#a.set(n,d),this.#a.set(a,d);const f=this.#p(c);return this.#h(f),n&&this.#v(i,f),d}addHighlightHCMFilter(n,e,i,a,c){const d=`${e}-${i}-${a}-${c}`;let f=this.#u.get(n);if(f?.key===d||(f?(f.filter?.remove(),f.key=d,f.url="none",f.filter=null):(f={key:d,url:"none",filter:null},this.#u.set(n,f)),!e||!i))return f.url;const[g,v]=[e,i].map(this.#y.bind(this));let y=Math.round(.2126*g[0]+.7152*g[1]+.0722*g[2]),w=Math.round(.2126*v[0]+.7152*v[1]+.0722*v[2]),[D,A]=[a,c].map(this.#y.bind(this));w<y&&([y,w,D,A]=[w,y,A,D]),this.#l.style.color="";const S=(M,k,O)=>{const j=new Array(256),B=(w-y)/O,z=M/255,W=(k-M)/(255*O);let oe=0;for(let ge=0;ge<=O;ge++){const Ke=Math.round(y+ge*B),Be=z+ge*W;for(let yt=oe;yt<=Ke;yt++)j[yt]=Be;oe=Ke+1}for(let ge=oe;ge<256;ge++)j[ge]=j[oe-1];return j.join(",")},T=`g_${this.#r}_hcm_${n}_filter`,x=f.filter=this.#p(T);return this.#f(x),this.#g(S(D[0],A[0],5),S(D[1],A[1],5),S(D[2],A[2],5),x),f.url=this.#o(T),f.url}destroy(n=!1){n&&this.#i?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#c=0)}#h(n){const e=this.#s.createElementNS(ti,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),n.append(e)}#f(n){const e=this.#s.createElementNS(ti,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),n.append(e)}#p(n){const e=this.#s.createElementNS(ti,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",n),this.#l.append(e),e}#m(n,e,i){const a=this.#s.createElementNS(ti,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),n.append(a)}#g(n,e,i,a){const c=this.#s.createElementNS(ti,"feComponentTransfer");a.append(c),this.#m(c,"feFuncR",n),this.#m(c,"feFuncG",e),this.#m(c,"feFuncB",i)}#v(n,e){const i=this.#s.createElementNS(ti,"feComponentTransfer");e.append(i),this.#m(i,"feFuncA",n)}#y(n){return this.#l.style.color=n,gs(getComputedStyle(this.#l).getPropertyValue("color"))}},Km=en?class Xw extends kh{_fetch(n){return te(function*(){return km(n)})()}}:jc;function ef(o={}){"string"==typeof o||o instanceof URL?o={url:o}:(o instanceof ArrayBuffer||ArrayBuffer.isView(o))&&(o={data:o});const n=new nf,{docId:e}=n,i=o.url?function tf(o){if(o instanceof URL)return o.href;try{return new URL(o,window.location).href}catch{if(en&&"string"==typeof o)return o}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(o.url):null,a=o.data?function v_(o){if(en&&typeof Buffer<"u"&&o instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength)return o;if("string"==typeof o)return ps(o);if(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||"object"==typeof o&&!isNaN(o?.length))return new Uint8Array(o);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(o.data):null,c=o.httpHeaders||null,d=!0===o.withCredentials,f=o.password??null,g=o.range instanceof Qm?o.range:null,v=Number.isInteger(o.rangeChunkSize)&&o.rangeChunkSize>0?o.rangeChunkSize:Xm;let y=o.worker instanceof Ht?o.worker:null;const w=o.verbosity,D="string"!=typeof o.docBaseUrl||ki(o.docBaseUrl)?null:o.docBaseUrl,A="string"==typeof o.cMapUrl?o.cMapUrl:null,S=!1!==o.cMapPacked,T=o.CMapReaderFactory||Zh,x="string"==typeof o.standardFontDataUrl?o.standardFontDataUrl:null,M=o.StandardFontDataFactory||Km,k=!0!==o.stopAtErrors,O=Number.isInteger(o.maxImageSize)&&o.maxImageSize>-1?o.maxImageSize:-1,j=!1!==o.isEvalSupported,B="boolean"==typeof o.isOffscreenCanvasSupported?o.isOffscreenCanvasSupported:!en,z="boolean"==typeof o.isImageDecoderSupported?o.isImageDecoderSupported:!en&&(Vt.platform.isFirefox||!globalThis.chrome),W=Number.isInteger(o.canvasMaxAreaInBytes)?o.canvasMaxAreaInBytes:-1,oe="boolean"==typeof o.disableFontFace?o.disableFontFace:en,ge=!0===o.fontExtraProperties,Ke=!0===o.enableXfa,Be=o.ownerDocument||globalThis.document,yt=!0===o.disableRange,zt=!0===o.disableStream,We=!0===o.disableAutoFetch,un=!0===o.pdfBug,st=o.CanvasFactory||m_,ee=o.FilterFactory||Jh,we=!0===o.enableHWA,Dr=g?g.length:o.length??NaN,Mn="boolean"==typeof o.useSystemFonts?o.useSystemFonts:!en&&!oe,Rn="boolean"==typeof o.useWorkerFetch?o.useWorkerFetch:T===Pm&&M===jc&&A&&x&&_o(A,document.baseURI)&&_o(x,document.baseURI);o.canvasFactory&&Im("`canvasFactory`-instance option, please use `CanvasFactory` instead."),o.filterFactory&&Im("`filterFactory`-instance option, please use `FilterFactory` instead."),function hs(o){Number.isInteger(o)&&(Wa=o)}(w);const It={canvasFactory:new st({ownerDocument:Be,enableHWA:we}),filterFactory:new ee({docId:e,ownerDocument:Be}),cMapReaderFactory:Rn?null:new T({baseUrl:A,isCompressed:S}),standardFontDataFactory:Rn?null:new M({baseUrl:x})};if(!y){const or={verbosity:w,port:nl.workerPort};y=or.port?Ht.fromPort(or):new Ht(or),n._worker=y}const Ds={docId:e,apiVersion:"4.9.155",data:a,password:f,disableAutoFetch:We,rangeChunkSize:v,length:Dr,docBaseUrl:D,enableXfa:Ke,evaluatorOptions:{maxImageSize:O,disableFontFace:oe,ignoreErrors:k,isEvalSupported:j,isOffscreenCanvasSupported:B,isImageDecoderSupported:z,canvasMaxAreaInBytes:W,fontExtraProperties:ge,useSystemFonts:Mn,cMapUrl:Rn?A:null,standardFontDataUrl:Rn?x:null}},Fo={disableFontFace:oe,fontExtraProperties:ge,ownerDocument:Be,pdfBug:un,styleElement:null,loadingParams:{disableAutoFetch:We,enableXfa:Ke}};return y.promise.then(function(){if(n.destroyed)throw new Error("Loading aborted");if(y.destroyed)throw new Error("Worker was destroyed");const or=y.messageHandler.sendWithPromise("GetDocRequest",Ds,a?[a.buffer]:null);let bt;if(g)bt=new il(g,{disableRange:yt,disableStream:zt});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");let bn;if(en)if(_o(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");bn=Io}else bn=zm;else bn=_o(i)?Io:u_;bt=new bn({url:i,length:Dr,httpHeaders:c,withCredentials:d,rangeChunkSize:v,disableRange:yt,disableStream:zt})}return or.then(bn=>{if(n.destroyed)throw new Error("Loading aborted");if(y.destroyed)throw new Error("Worker was destroyed");const mf=new rl(e,bn,y.port),F_=new Jm(mf,n,bt,Fo,It);n._transport=F_,mf.send("Ready",null)})}).catch(n._capability.reject),n}function Ym(o){return"object"==typeof o&&Number.isInteger(o?.num)&&o.num>=0&&Number.isInteger(o?.gen)&&o.gen>=0}class nf{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d"+nf.#e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){var n=this;return te(function*(){n.destroyed=!0;try{n._worker?.port&&(n._worker._pendingDestroy=!0),yield n._transport?.destroy()}catch(e){throw n._worker?.port&&delete n._worker._pendingDestroy,e}n._transport=null,n._worker?.destroy(),n._worker=null})()}}class Qm{constructor(n,e,i=!1,a=null){this.length=n,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(n){this._rangeListeners.push(n)}addProgressListener(n){this._progressListeners.push(n)}addProgressiveReadListener(n){this._progressiveReadListeners.push(n)}addProgressiveDoneListener(n){this._progressiveDoneListeners.push(n)}onDataRange(n,e){for(const i of this._rangeListeners)i(n,e)}onDataProgress(n,e){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(n,e)})}onDataProgressiveRead(n){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(n)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const n of this._progressiveDoneListeners)n()})}transportReady(){this._readyCapability.resolve()}requestDataRange(n,e){Je("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Zm{constructor(n,e){this._pdfInfo=n,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return je(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(n){return this._transport.getPage(n)}getPageIndex(n){return this._transport.getPageIndex(n)}getDestinations(){return this._transport.getDestinations()}getDestination(n){return this._transport.getDestination(n)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:n="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(n);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(n=!1){return this._transport.startCleanup(n||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(n){return this._transport.cachedPageNumber(n)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class rf{#e=null;#t=!1;constructor(n,e,i,a=!1){this._pageIndex=n,this._pageInfo=e,this._transport=i,this._stats=a?new Mh:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new ev,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:n,rotation:e=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:c=!1}={}){return new Oi({viewBox:this.view,scale:n,rotation:e,offsetX:i,offsetY:a,dontFlip:c})}getAnnotations({intent:n="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(n);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return je(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){var n=this;return te(function*(){return n._transport._htmlForXfa?.children[n._pageIndex]||null})()}render({canvasContext:n,viewport:e,intent:i="display",annotationMode:a=Ii.ENABLE,transform:c=null,background:d=null,optionalContentConfigPromise:f=null,annotationCanvasMap:g=null,pageColors:v=null,printAnnotationStorage:y=null,isEditing:w=!1}){this._stats?.time("Overall");const D=this._transport.getRenderingIntent(i,a,y,w),{renderingIntent:A,cacheKey:S}=D;this.#t=!1,this.#r(),f||=this._transport.getOptionalContentConfig(A);let T=this._intentStates.get(S);T||(T=Object.create(null),this._intentStates.set(S,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const x=!!(4&A);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(D));const M=j=>{T.renderTasks.delete(k),(this._maybeCleanupAfterRender||x)&&(this.#t=!0),this.#n(!x),j?(k.capability.reject(j),this._abortOperatorList({intentState:T,reason:j instanceof Error?j:new Error(j)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new Mo({callback:M,params:{canvasContext:n,viewport:e,transform:c,background:d},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:g,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:v});(T.renderTasks||=new Set).add(k);const O=k.task;return Promise.all([T.displayReadyCapability.promise,f]).then(([j,B])=>{if(this.destroyed)M();else{if(this._stats?.time("Rendering"),!(B.renderingIntent&A))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:j,optionalContentConfig:B}),k.operatorListChanged()}}).catch(M),O}getOperatorList({intent:n="display",annotationMode:e=Ii.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){const d=this._transport.getRenderingIntent(n,e,i,a,!0);let g,f=this._intentStates.get(d.cacheKey);return f||(f=Object.create(null),this._intentStates.set(d.cacheKey,f)),f.opListReadCapability||(g=Object.create(null),g.operatorListChanged=function c(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(g))},f.opListReadCapability=Promise.withResolvers(),(f.renderTasks||=new Set).add(g),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d)),f.opListReadCapability.promise}streamTextContent({includeMarkedContent:n=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===n,disableNormalization:!0===e},{highWaterMark:100,size:a=>a.items.length})}getTextContent(n={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>To.textContent(i));const e=this.streamTextContent(n);return new Promise(function(i,a){const d=e.getReader(),f={items:[],styles:Object.create(null),lang:null};!function c(){d.read().then(function({value:g,done:v}){v?i(f):(f.lang??=g.lang,Object.assign(f.styles,g.styles),f.items.push(...g.items),c())},a)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const n=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)n.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,this.#r(),Promise.all(n)}cleanup(n=!1){this.#t=!0;const e=this.#n(!1);return n&&e&&(this._stats&&=new Mh),e}#n(n=!1){if(this.#r(),!this.#t||this.destroyed)return!1;if(n)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},5e3),!1;for(const{renderTasks:e,operatorList:i}of this._intentStates.values())if(e.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#r(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(n,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(n))}_renderPageChunk(n,e){for(let i=0,a=n.length;i<a;i++)e.operatorList.fnArray.push(n.fnArray[i]),e.operatorList.argsArray.push(n.argsArray[i]);e.operatorList.lastChunk=n.lastChunk,e.operatorList.separateAnnots=n.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();n.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:n,cacheKey:e,annotationStorageSerializable:i,modifiedIds:a}){const{map:c,transfer:d}=i,g=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:n,cacheKey:e,annotationStorage:c,modifiedIds:a},d).getReader(),v=this._intentStates.get(e);v.streamReader=g;const y=()=>{g.read().then(({value:w,done:D})=>{D?v.streamReader=null:this._transport.destroyed||(this._renderPageChunk(w,v),y())},w=>{if(v.streamReader=null,!this._transport.destroyed){if(v.operatorList){v.operatorList.lastChunk=!0;for(const D of v.renderTasks)D.operatorListChanged();this.#n(!0)}if(v.displayReadyCapability)v.displayReadyCapability.reject(w);else{if(!v.opListReadCapability)throw w;v.opListReadCapability.reject(w)}}})};y()}_abortOperatorList({intentState:n,reason:e,force:i=!1}){if(n.streamReader){if(n.streamReaderCancelTimeout&&(clearTimeout(n.streamReaderCancelTimeout),n.streamReaderCancelTimeout=null),!i){if(n.renderTasks.size>0)return;if(e instanceof Pc){let a=100;return e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),void(n.streamReaderCancelTimeout=setTimeout(()=>{n.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:n,reason:e,force:!0})},a))}}if(n.streamReader.cancel(new Ri(e.message)).catch(()=>{}),n.streamReader=null,!this._transport.destroyed){for(const[a,c]of this._intentStates)if(c===n){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}class sf{#e=new Map;#t=Promise.resolve();postMessage(n,e){const i={data:structuredClone(n,e?{transfer:e}:null)};this.#t.then(()=>{for(const[a]of this.#e)a.call(this,i)})}addEventListener(n,e,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:c}=i;if(c.aborted)return void Te("LoopbackPort - cannot use an `aborted` signal.");const d=()=>this.removeEventListener(n,e);a=()=>c.removeEventListener("abort",d),c.addEventListener("abort",d)}this.#e.set(e,a)}removeEventListener(n,e){this.#e.get(e)?.(),this.#e.delete(e)}terminate(){for(const[,n]of this.#e)n?.();this.#e.clear()}}class Ht{static#e=0;static#t=!1;static#n;static{en&&(this.#t=!0,nl.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(n,e)=>{let i;try{if(i=new URL(n),!i.origin||"null"===i.origin)return!1}catch{return!1}const a=new URL(e,i);return i.origin===a.origin},this._createCDNWrapper=n=>URL.createObjectURL(new Blob([`await import("${n}");`],{type:"text/javascript"}))}constructor({name:n=null,port:e=null,verbosity:i=bo()}={}){if(this.name=n,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if(Ht.#n?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");return(Ht.#n||=new WeakMap).set(e,this),void this._initializeFromPort(e)}this._initialize()}get promise(){return this._readyCapability.promise}#r(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(n){this._port=n,this._messageHandler=new rl("main","worker",n),this._messageHandler.on("ready",function(){}),this.#r()}_initialize(){if(Ht.#t||Ht.#s)return void this._setupFakeWorker();let{workerSrc:n}=Ht;try{Ht._isSameOrigin(window.location.href,n)||(n=Ht._createCDNWrapper(new URL(n,window.location).href));const e=new Worker(n,{type:"module"}),i=new rl("main","worker",e),a=()=>{c.abort(),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},c=new AbortController;e.addEventListener("error",()=>{this._webWorker||a()},{signal:c.signal}),i.on("test",f=>{c.abort(),!this.destroyed&&f?(this._messageHandler=i,this._port=e,this._webWorker=e,this.#r()):a()}),i.on("ready",f=>{if(c.abort(),this.destroyed)a();else try{d()}catch{this._setupFakeWorker()}});const d=()=>{const f=new Uint8Array;i.send("test",f,[f.buffer])};return void d()}catch{wo("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Ht.#t||(Te("Setting up fake worker."),Ht.#t=!0),Ht._setupFakeWorkerGlobal.then(n=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new sf;this._port=e;const i="fake"+Ht.#e++,a=new rl(i+"_worker",i,e);n.setup(a,e),this._messageHandler=new rl(i,i+"_worker",e),this.#r()}).catch(n=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${n.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,Ht.#n?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(n){if(!n?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#n?.get(n.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ht(n)}static get workerSrc(){if(nl.workerSrc)return nl.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#s(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var n=this;return je(this,"_setupFakeWorkerGlobal",function(){var i=te(function*(){return n.#s?n.#s:(yield import(n.workerSrc)).WorkerMessageHandler});return function(){return i.apply(this,arguments)}}()())}}class Jm{#e=new Map;#t=new Map;#n=new Map;#r=new Map;#s=null;constructor(n,e,i,a,c){this.messageHandler=n,this.loadingTask=e,this.commonObjs=new ev,this.fontLoader=new $w({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=c.canvasFactory,this.filterFactory=c.filterFactory,this.cMapReaderFactory=c.cMapReaderFactory,this.standardFontDataFactory=c.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#i(n,e=null){const i=this.#e.get(n);if(i)return i;const a=this.messageHandler.sendWithPromise(n,e);return this.#e.set(n,a),a}get annotationStorage(){return je(this,"annotationStorage",new Ao)}getRenderingIntent(n,e=Ii.ENABLE,i=null,a=!1,c=!1){let d=2,f=ms;switch(n){case"any":d=1;break;case"display":break;case"print":d=4;break;default:Te(`getRenderingIntent - invalid intent: ${n}`)}const g=4&d&&i instanceof Hw?i:this.annotationStorage;switch(e){case Ii.DISABLE:d+=64;break;case Ii.ENABLE:break;case Ii.ENABLE_FORMS:d+=16;break;case Ii.ENABLE_STORAGE:d+=32,f=g.serializable;break;default:Te(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(d+=128),c&&(d+=256);const{ids:v,hash:y}=g.modifiedIds;return{renderingIntent:d,cacheKey:[d,f.hash,y].join("_"),annotationStorageSerializable:f,modifiedIds:v}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const n=[];for(const i of this.#t.values())n.push(i._destroy());this.#t.clear(),this.#n.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return n.push(e),Promise.all(n).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),tn.cleanup(),this._networkStream?.cancelAllRequests(new Ri("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){var n=this;const{messageHandler:e,loadingTask:i}=this;e.on("GetReader",(a,c)=>{At(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=d=>{this._lastProgress={loaded:d.loaded,total:d.total}},c.onPull=()=>{this._fullReader.read().then(function({value:d,done:f}){f?c.close():(At(d instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(d),1,[d]))}).catch(d=>{c.error(d)})},c.onCancel=d=>{this._fullReader.cancel(d),c.ready.catch(f=>{if(!this.destroyed)throw f})}}),e.on("ReaderHeadersReady",function(){var a=te(function*(c){yield n._fullReader.headersReady;const{isStreamingSupported:d,isRangeSupported:f,contentLength:g}=n._fullReader;return(!d||!f)&&(n._lastProgress&&i.onProgress?.(n._lastProgress),n._fullReader.onProgress=v=>{i.onProgress?.({loaded:v.loaded,total:v.total})}),{isStreamingSupported:d,isRangeSupported:f,contentLength:g}});return function(c){return a.apply(this,arguments)}}()),e.on("GetRangeReader",(a,c)=>{At(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const d=this._networkStream.getRangeReader(a.begin,a.end);d?(c.onPull=()=>{d.read().then(function({value:f,done:g}){g?c.close():(At(f instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(f),1,[f]))}).catch(f=>{c.error(f)})},c.onCancel=f=>{d.cancel(f),c.ready.catch(g=>{if(!this.destroyed)throw g})}):c.close()}),e.on("GetDoc",({pdfInfo:a})=>{this._numPages=a.numPages,this._htmlForXfa=a.htmlForXfa,delete a.htmlForXfa,i._capability.resolve(new Zm(a,this))}),e.on("DocException",function(a){let c;switch(a.name){case"PasswordException":c=new Ch(a.message,a.code);break;case"InvalidPDFException":c=new Sh(a.message);break;case"MissingPDFException":c=new qa(a.message);break;case"UnexpectedResponseException":c=new fs(a.message,a.status);break;case"UnknownErrorException":c=new Ah(a.message,a.details);break;default:Je("DocException - expected a valid Error.")}i._capability.reject(c)}),e.on("PasswordRequest",a=>{if(this.#s=Promise.withResolvers(),i.onPassword){const c=d=>{d instanceof Error?this.#s.reject(d):this.#s.resolve({password:d})};try{i.onPassword(c,a.code)}catch(d){this.#s.reject(d)}}else this.#s.reject(new Ch(a.message,a.code));return this.#s.promise}),e.on("DataLoaded",a=>{i.onProgress?.({loaded:a.length,total:a.length}),this.downloadInfoCapability.resolve(a)}),e.on("StartRenderPage",a=>{this.destroyed||this.#t.get(a.pageIndex)._startRenderPage(a.transparency,a.cacheKey)}),e.on("commonobj",([a,c,d])=>{if(this.destroyed||this.commonObjs.has(a))return null;switch(c){case"Font":const{disableFontFace:f,fontExtraProperties:g,pdfBug:v}=this._params;if("error"in d){const A=d.error;Te(`Error during font loading: ${A}`),this.commonObjs.resolve(a,A);break}const y=v&&globalThis.FontInspector?.enabled?(A,S)=>globalThis.FontInspector.fontAdded(A,S):null,w=new Nm(d,{disableFontFace:f,inspectFont:y});this.fontLoader.bind(w).catch(()=>e.sendWithPromise("FontFallback",{id:a})).finally(()=>{!g&&w.data&&(w.data=null),this.commonObjs.resolve(a,w)});break;case"CopyLocalImage":const{imageRef:D}=d;At(D,"The imageRef must be defined.");for(const A of this.#t.values())for(const[,S]of A.objs)if(S?.ref===D)return S.dataLen?(this.commonObjs.resolve(a,structuredClone(S)),S.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(a,d);break;default:throw new Error(`Got unknown common object type ${c}`)}return null}),e.on("obj",([a,c,d,f])=>{if(this.destroyed)return;const g=this.#t.get(c);if(!g.objs.has(a)){if(0===g._intentStates.size)return void f?.bitmap?.close();switch(d){case"Image":g.objs.resolve(a,f),f?.dataLen>1e7&&(g._maybeCleanupAfterRender=!0);break;case"Pattern":g.objs.resolve(a,f);break;default:throw new Error(`Got unknown object type ${d}`)}}}),e.on("DocProgress",a=>{this.destroyed||i.onProgress?.({loaded:a.loaded,total:a.total})}),e.on("FetchBuiltInCMap",function(){var a=te(function*(c){if(n.destroyed)throw new Error("Worker was destroyed.");if(!n.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return n.cMapReaderFactory.fetch(c)});return function(c){return a.apply(this,arguments)}}()),e.on("FetchStandardFontData",function(){var a=te(function*(c){if(n.destroyed)throw new Error("Worker was destroyed.");if(!n.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return n.standardFontDataFactory.fetch(c)});return function(c){return a.apply(this,arguments)}}())}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Te("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(n){if(!Number.isInteger(n)||n<=0||n>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=n-1,i=this.#n.get(e);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(c=>{if(this.destroyed)throw new Error("Transport destroyed");c.refStr&&this.#r.set(c.refStr,n);const d=new rf(e,c,this,this._params.pdfBug);return this.#t.set(e,d),d});return this.#n.set(e,a),a}getPageIndex(n){return Ym(n)?this.messageHandler.sendWithPromise("GetPageIndex",{num:n.num,gen:n.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(n,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:n,intent:e})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(n){return"string"!=typeof n?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:n})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(n){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:n})}getStructTree(n){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:n})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(n){return this.#i("GetOptionalContentConfig").then(e=>new Hm(e,n))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const n="GetMetadata",e=this.#e.get(n);if(e)return e;const i=this.messageHandler.sendWithPromise(n,null).then(a=>({info:a[0],metadata:a[1]?new zh(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(n,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(n=!1){var e=this;return te(function*(){if(!e.destroyed){yield e.messageHandler.sendWithPromise("Cleanup",null);for(const i of e.#t.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);e.commonObjs.clear(),n||e.fontLoader.clear(),e.#e.clear(),e.filterFactory.destroy(!0),tn.cleanup()}})()}cachedPageNumber(n){return Ym(n)?this.#r.get(0===n.gen?`${n.num}R`:`${n.num}R${n.gen}`)??null:null}}const sl=Symbol("INITIAL_DATA");class ev{#e=Object.create(null);#t(n){return this.#e[n]||={...Promise.withResolvers(),data:sl}}get(n,e=null){if(e){const a=this.#t(n);return a.promise.then(()=>e(a.data)),null}const i=this.#e[n];if(!i||i.data===sl)throw new Error(`Requesting object that isn't resolved yet ${n}.`);return i.data}has(n){const e=this.#e[n];return!!e&&e.data!==sl}resolve(n,e=null){const i=this.#t(n);i.data=e,i.resolve()}clear(){for(const n in this.#e){const{data:e}=this.#e[n];e?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const n in this.#e){const{data:e}=this.#e[n];e!==sl&&(yield[n,e])}}}class tv{#e=null;constructor(n){this.#e=n,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(n=0){this.#e.cancel(null,n)}get separateAnnots(){const{separateAnnots:n}=this.#e.operatorList;if(!n)return!1;const{annotationCanvasMap:e}=this.#e;return n.form||n.canvas&&e?.size>0}}class Mo{#e=null;static#t=new WeakSet;constructor({callback:n,params:e,objs:i,commonObjs:a,annotationCanvasMap:c,operatorList:d,pageIndex:f,canvasFactory:g,filterFactory:v,useRequestAnimationFrame:y=!1,pdfBug:w=!1,pageColors:D=null}){this.callback=n,this.params=e,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=c,this.operatorListIdx=null,this.operatorList=d,this._pageIndex=f,this.canvasFactory=g,this.filterFactory=v,this._pdfBug=w,this.pageColors=D,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===y&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new tv(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:n=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Mo.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Mo.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:a,transform:c,background:d}=this.params;this.gfx=new tl(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:c,viewport:a,transparency:n,background:d}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(n=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Mo.#t.delete(this._canvas),this.callback(n||new Pc(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var n=this;return te(function*(){n.cancelled||(n.operatorListIdx=n.gfx.executeOperatorList(n.operatorList,n.operatorListIdx,n._continueBound,n.stepper),n.operatorListIdx===n.operatorList.argsArray.length&&(n.running=!1,n.operatorList.lastChunk&&(n.gfx.endDrawing(),Mo.#t.delete(n._canvas),n.callback())))})()}}const af="4.9.155",nv="a4eb8407c";function lf(o){return Math.floor(255*Math.max(0,Math.min(1,o))).toString(16).padStart(2,"0")}function Nt(o){return Math.max(0,Math.min(255,255*o))}class cf{static CMYK_G([n,e,i,a]){return["G",1-Math.min(1,.3*n+.59*i+.11*e+a)]}static G_CMYK([n]){return["CMYK",0,0,0,1-n]}static G_RGB([n]){return["RGB",n,n,n]}static G_rgb([n]){return[n=Nt(n),n,n]}static G_HTML([n]){const e=lf(n);return`#${e}${e}${e}`}static RGB_G([n,e,i]){return["G",.3*n+.59*e+.11*i]}static RGB_rgb(n){return n.map(Nt)}static RGB_HTML(n){return`#${n.map(lf).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([n,e,i,a]){return["RGB",1-Math.min(1,n+a),1-Math.min(1,i+a),1-Math.min(1,e+a)]}static CMYK_rgb([n,e,i,a]){return[Nt(1-Math.min(1,n+a)),Nt(1-Math.min(1,i+a)),Nt(1-Math.min(1,e+a))]}static CMYK_HTML(n){const e=this.CMYK_RGB(n).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([n,e,i]){const a=1-n,c=1-e,d=1-i;return["CMYK",a,c,d,Math.min(a,c,d)]}}class RC{create(n,e,i=!1){if(n<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${n}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${n} ${e}`),a}createElement(n){if("string"!=typeof n)throw new Error("Invalid SVG element type");return this._createSVG(n)}_createSVG(n){Je("Abstract method `_createSVG` called.")}}class rv extends RC{_createSVG(n){return document.createElementNS(ti,n)}}class iv{static setupStorage(n,e,i,a,c){const d=a.getValue(e,{value:null});switch(i.name){case"textarea":if(null!==d.value&&(n.textContent=d.value),"print"===c)break;n.addEventListener("input",f=>{a.setValue(e,{value:f.target.value})});break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(d.value===i.attributes.xfaOn?n.setAttribute("checked",!0):d.value===i.attributes.xfaOff&&n.removeAttribute("checked"),"print"===c)break;n.addEventListener("change",f=>{a.setValue(e,{value:f.target.getAttribute(f.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==d.value&&n.setAttribute("value",d.value),"print"===c)break;n.addEventListener("input",f=>{a.setValue(e,{value:f.target.value})})}break;case"select":if(null!==d.value){n.setAttribute("value",d.value);for(const f of i.children)f.attributes.value===d.value?f.attributes.selected=!0:f.attributes.hasOwnProperty("selected")&&delete f.attributes.selected}n.addEventListener("input",f=>{const g=f.target.options;a.setValue(e,{value:-1===g.selectedIndex?"":g[g.selectedIndex].value})})}}static setAttributes({html:n,element:e,storage:i=null,intent:a,linkService:c}){const{attributes:d}=e,f=n instanceof HTMLAnchorElement;"radio"===d.type&&(d.name=`${d.name}-${a}`);for(const[g,v]of Object.entries(d))if(null!=v)switch(g){case"class":v.length&&n.setAttribute(g,v.join(" "));break;case"dataId":break;case"id":n.setAttribute("data-element-id",v);break;case"style":Object.assign(n.style,v);break;case"textContent":n.textContent=v;break;default:(!f||"href"!==g&&"newWindow"!==g)&&n.setAttribute(g,v)}f&&c.addLinkAttributes(n,d.href,d.newWindow),i&&d.dataId&&this.setupStorage(n,d.dataId,e,i)}static render(n){const e=n.annotationStorage,i=n.linkService,a=n.xfaHtml,c=n.intent||"display",d=document.createElement(a.name);a.attributes&&this.setAttributes({html:d,element:a,intent:c,linkService:i});const f="richText"!==c,g=n.div;if(g.append(d),n.viewport){const w=`matrix(${n.viewport.transform.join(",")})`;g.style.transform=w}f&&g.setAttribute("class","xfaLayer xfaFont");const v=[];if(0===a.children.length){if(a.value){const w=document.createTextNode(a.value);d.append(w),f&&To.shouldBuildText(a.name)&&v.push(w)}return{textDivs:v}}const y=[[a,-1,d]];for(;y.length>0;){const[w,D,A]=y.at(-1);if(D+1===w.children.length){y.pop();continue}const S=w.children[++y.at(-1)[1]];if(null===S)continue;const{name:T}=S;if("#text"===T){const M=document.createTextNode(S.value);v.push(M),A.append(M);continue}const x=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,T):document.createElement(T);if(A.append(x),S.attributes&&this.setAttributes({html:x,element:S,storage:e,intent:c,linkService:i}),S.children?.length>0)y.push([S,-1,x]);else if(S.value){const M=document.createTextNode(S.value);f&&To.shouldBuildText(T)&&v.push(M),x.append(M)}}for(const w of g.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))w.setAttribute("readOnly",!0);return{textDivs:v}}static update(n){const e=`matrix(${n.viewport.transform.join(",")})`;n.div.style.transform=e,n.div.hidden=!1}}const Ro=1e3,ri=new WeakSet;function ii(o){return{width:o[2]-o[0],height:o[3]-o[1]}}class ov{static create(n){switch(n.data.annotationType){case 2:return new uf(n);case 1:return new y_(n);case 20:switch(n.data.fieldType){case"Tx":return new xC(n);case"Btn":return n.data.radioButton?new b_(n):n.data.checkBox?new PC(n):new OC(n);case"Ch":return new kC(n);case"Sig":return new NC(n)}return new xo(n);case 16:return new av(n);case 3:return new df(n);case 4:return new FC(n);case 5:return new LC(n);case 6:return new jC(n);case 8:return new w_(n);case 14:return new UC(n);case 15:return new cv(n);case 7:return new BC(n);case 9:return new __(n);case 10:return new VC(n);case 11:return new E_(n);case 12:return new No(n);case 13:return new Po(n);case 17:return new D_(n);default:return new Dt(n)}}}class Dt{#e=null;#t=!1;#n=null;constructor(n,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=n.data,this.layer=n.layer,this.linkService=n.linkService,this.downloadManager=n.downloadManager,this.imageResourcesPath=n.imageResourcesPath,this.renderForms=n.renderForms,this.svgFactory=n.svgFactory,this.annotationStorage=n.annotationStorage,this.enableScripting=n.enableScripting,this.hasJSActions=n.hasJSActions,this._fieldObjects=n.fieldObjects,this.parent=n.parent,e&&(this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({titleObj:n,contentsObj:e,richText:i}){return!!(n?.str||e?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Dt._hasPopupData(this.data)}updateEdited(n){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:e}=n;e&&this.#r(e),this.#n?.popup.updateEdited(n)}resetEdited(){this.#e&&(this.#r(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#r(n){const{container:{style:e},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:c,pageHeight:d,pageX:f,pageY:g}}}}=this;i?.splice(0,4,...n);const{width:v,height:y}=ii(n);e.left=100*(n[0]-f)/c+"%",e.top=100*(d-n[3]+g)/d+"%",0===a?(e.width=100*v/c+"%",e.height=100*y/d+"%"):this.setRotation(a)}_createContainer(n){const{data:e,parent:{page:i,viewport:a}}=this,c=document.createElement("section");c.setAttribute("data-annotation-id",e.id),this instanceof xo||(c.tabIndex=Ro);const{style:d}=c;if(d.zIndex=this.parent.zIndex++,e.alternativeText&&(c.title=e.alternativeText),e.noRotate&&c.classList.add("norotate"),!e.rect||this instanceof av){const{rotation:T}=e;return!e.hasOwnCanvas&&0!==T&&this.setRotation(T,c),c}const{width:f,height:g}=ii(e.rect);if(!n&&e.borderStyle.width>0){d.borderWidth=`${e.borderStyle.width}px`;const T=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;switch(T>0||x>0?d.borderRadius=`calc(${T}px * var(--scale-factor)) / calc(${x}px * var(--scale-factor))`:this instanceof b_&&(d.borderRadius=`calc(${f}px * var(--scale-factor)) / calc(${g}px * var(--scale-factor))`),e.borderStyle.style){case 1:d.borderStyle="solid";break;case 2:d.borderStyle="dashed";break;case 3:Te("Unimplemented border style: beveled");break;case 4:Te("Unimplemented border style: inset");break;case 5:d.borderBottomStyle="solid"}const M=e.borderColor||null;M?(this.#t=!0,d.borderColor=se.makeHexColor(0|M[0],0|M[1],0|M[2])):d.borderWidth=0}const v=se.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:y,pageHeight:w,pageX:D,pageY:A}=a.rawDims;d.left=100*(v[0]-D)/y+"%",d.top=100*(v[1]-A)/w+"%";const{rotation:S}=e;return e.hasOwnCanvas||0===S?(d.width=100*f/y+"%",d.height=100*g/w+"%"):this.setRotation(S,c),c}setRotation(n,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims,{width:c,height:d}=ii(this.data.rect);let f,g;n%180==0?(f=100*c/i,g=100*d/a):(f=100*d/i,g=100*c/a),e.style.width=`${f}%`,e.style.height=`${g}%`,e.setAttribute("data-main-rotation",(360-n)%360)}get _commonActions(){const n=(e,i,a)=>{const c=a.detail[e],d=c[0],f=c.slice(1);a.target.style[i]=cf[`${d}_HTML`](f),this.annotationStorage.setValue(this.data.id,{[i]:cf[`${d}_rgb`](f)})};return je(this,"_commonActions",{display:e=>{const{display:i}=e.detail,a=i%2==1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:1===i||2===i})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{n("bgColor","backgroundColor",e)},fillColor:e=>{n("fillColor","backgroundColor",e)},fgColor:e=>{n("fgColor","color",e)},textColor:e=>{n("textColor","color",e)},borderColor:e=>{n("borderColor","borderColor",e)},strokeColor:e=>{n("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(n,e){const i=this._commonActions;for(const a of Object.keys(e.detail))(n[a]||i[a])?.(e)}_setDefaultPropertiesFromJS(n){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[a,c]of Object.entries(e)){const d=i[a];d&&(d({detail:{[a]:c},target:n}),delete e[a])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:n}=this.data;if(!n)return;const[e,i,a,c]=this.data.rect.map(T=>Math.fround(T));if(8===n.length){const[T,x,M,k]=n.subarray(2,6);if(a===T&&c===x&&e===M&&i===k)return}const{style:d}=this.container;let f;if(this.#t){const{borderColor:T,borderWidth:x}=d;d.borderWidth=0,f=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${T}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const g=a-e,v=c-i,{svgFactory:y}=this,w=y.createElement("svg");w.classList.add("quadrilateralsContainer"),w.setAttribute("width",0),w.setAttribute("height",0);const D=y.createElement("defs");w.append(D);const A=y.createElement("clipPath"),S=`clippath_${this.data.id}`;A.setAttribute("id",S),A.setAttribute("clipPathUnits","objectBoundingBox"),D.append(A);for(let T=2,x=n.length;T<x;T+=8){const M=n[T],k=n[T+1],O=n[T+2],j=n[T+3],B=y.createElement("rect"),z=(O-e)/g,W=(c-k)/v,oe=(M-O)/g,ge=(k-j)/v;B.setAttribute("x",z),B.setAttribute("y",W),B.setAttribute("width",oe),B.setAttribute("height",ge),A.append(B),f?.push(`<rect vector-effect="non-scaling-stroke" x="${z}" y="${W}" width="${oe}" height="${ge}"/>`)}this.#t&&(f.push("</g></svg>')"),d.backgroundImage=f.join("")),this.container.append(w),this.container.style.clipPath=`url(#${S})`}_createPopup(){const{data:n}=this,e=this.#n=new av({data:{color:n.color,titleObj:n.titleObj,modificationDate:n.modificationDate,contentsObj:n.contentsObj,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation},parent:this.parent,elements:[this]});this.parent.div.append(e.render())}render(){Je("Abstract method `AnnotationElement.render` called")}_getElementsByName(n,e=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[n];if(a)for(const{page:c,id:d,exportValues:f}of a){if(-1===c||d===e)continue;const g="string"==typeof f?f:null,v=document.querySelector(`[data-element-id="${d}"]`);!v||ri.has(v)?i.push({id:d,exportValue:g,domElement:v}):Te(`_getElementsByName - element not allowed: ${d}`)}return i}for(const a of document.getElementsByName(n)){const{exportValue:c}=a,d=a.getAttribute("data-element-id");d!==e&&ri.has(a)&&i.push({id:d,exportValue:c,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const n=this.getElementsToTriggerPopup();if(Array.isArray(n))for(const e of n)e.classList.add("highlightArea");else n.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:n,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:n,editId:e})})}}class uf extends Dt{constructor(n,e=null){super(n,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",n.id);let a=!1;return n.url?(e.addLinkAttributes(i,n.url,n.newWindow),a=!0):n.action?(this._bindNamedAction(i,n.action),a=!0):n.attachment?(this.#t(i,n.attachment,n.attachmentDest),a=!0):n.setOCGState?(this.#n(i,n.setOCGState),a=!0):n.dest?(this._bindLink(i,n.dest),a=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,n),a=!0),n.resetForm?(this._bindResetFormAction(i,n.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(n,e){n.href=this.linkService.getDestinationHash(e),n.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&this.#e()}_bindNamedAction(n,e){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#e()}#t(n,e,i=null){n.href=this.linkService.getAnchorUrl(""),e.description&&(n.title=e.description),n.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#e()}#n(n,e){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#e()}_bindJSAction(n,e){n.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const c=i.get(a);c&&(n[c]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}n.onclick||(n.onclick=()=>!1),this.#e()}_bindResetFormAction(n,e){const i=n.onclick;if(i||(n.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects)return Te('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(i||(n.onclick=()=>!1));n.onclick=()=>{i?.();const{fields:a,refs:c,include:d}=e,f=[];if(0!==a.length||0!==c.length){const y=new Set(c);for(const w of a){const D=this._fieldObjects[w]||[];for(const{id:A}of D)y.add(A)}for(const w of Object.values(this._fieldObjects))for(const D of w)y.has(D.id)===d&&f.push(D)}else for(const y of Object.values(this._fieldObjects))f.push(...y);const g=this.annotationStorage,v=[];for(const y of f){const{id:w}=y;switch(v.push(w),y.type){case"text":case"combobox":case"listbox":g.setValue(w,{value:y.defaultValue||""});break;case"checkbox":case"radiobutton":g.setValue(w,{value:y.defaultValue===y.exportValues});break;default:continue}const D=document.querySelector(`[data-element-id="${w}"]`);D&&(ri.has(D)?D.dispatchEvent(new Event("resetform")):Te(`_bindResetFormAction - element not allowed: ${w}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:v,name:"ResetForm"}}),!1}}}class y_ extends Dt{constructor(n){super(n,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const n=document.createElement("img");return n.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",n.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),n.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(n),this.container}}class xo extends Dt{render(){return this.container}showElementAndHideCanvas(n){this.data.hasOwnCanvas&&("CANVAS"===n.previousSibling?.nodeName&&(n.previousSibling.hidden=!0),n.hidden=!1)}_getKeyModifier(n){return Vt.platform.isMac?n.metaKey:n.ctrlKey}_setEventListener(n,e,i,a,c){i.includes("mouse")?n.addEventListener(i,d=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:c(d),shift:d.shiftKey,modifier:this._getKeyModifier(d)}})}):n.addEventListener(i,d=>{if("blur"===i){if(!e.focused||!d.relatedTarget)return;e.focused=!1}else if("focus"===i){if(e.focused)return;e.focused=!0}c&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:c(d)}})})}_setEventListeners(n,e,i,a){for(const[c,d]of i)("Action"===d||this.data.actions?.[d])&&(("Focus"===d||"Blur"===d)&&(e||={focused:!1}),this._setEventListener(n,e,c,d,a),"Focus"!==d||this.data.actions?.Blur?"Blur"===d&&!this.data.actions?.Focus&&this._setEventListener(n,e,"focus","Focus",null):this._setEventListener(n,e,"blur","Blur",null))}_setBackgroundColor(n){const e=this.data.backgroundColor||null;n.style.backgroundColor=null===e?"transparent":se.makeHexColor(e[0],e[1],e[2])}_setTextStyle(n){const{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||9,c=n.style;let d;const g=v=>Math.round(10*v)/10;if(this.data.multiLine){const v=Math.abs(this.data.rect[3]-this.data.rect[1]-2),y=Math.round(v/(1.35*a))||1;d=Math.min(a,g(v/y/1.35))}else{const v=Math.abs(this.data.rect[3]-this.data.rect[1]-2);d=Math.min(a,g(v/1.35))}c.fontSize=`calc(${d}px * var(--scale-factor))`,c.color=se.makeHexColor(i[0],i[1],i[2]),null!==this.data.textAlignment&&(c.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(n,e){e?n.setAttribute("required",!0):n.removeAttribute("required"),n.setAttribute("aria-required",e)}}class xC extends xo{constructor(n){super(n,{isRenderable:n.renderForms||n.data.hasOwnCanvas||!n.data.hasAppearance&&!!n.data.fieldValue})}setPropertyOnSiblings(n,e,i,a){const c=this.annotationStorage;for(const d of this._getElementsByName(n.name,n.id))d.domElement&&(d.domElement[e]=i),c.setValue(d.id,{[a]:i})}render(){const n=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=n.getValue(e,{value:this.data.fieldValue});let c=a.value||"";const d=n.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&c.length>d&&(c=c.slice(0,d));let f=a.formattedValue||this.data.textContent?.join("\n")||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const g={userValue:c,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=f??c,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",f??c),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),ri.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=Ro,this._setRequired(i,this.data.required),d&&(i.maxLength=d),i.addEventListener("input",y=>{n.setValue(e,{value:y.target.value}),this.setPropertyOnSiblings(i,"value",y.target.value,"value"),g.formattedValue=null}),i.addEventListener("resetform",y=>{i.value=g.userValue=this.data.defaultFieldValue??"",g.formattedValue=null});let v=y=>{const{formattedValue:w}=g;null!=w&&(y.target.value=w),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",w=>{if(g.focused)return;const{target:D}=w;g.userValue&&(D.value=g.userValue),g.lastCommittedValue=D.value,g.commitKey=1,this.data.actions?.Focus||(g.focused=!0)}),i.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target),this._dispatchEventFromSandbox({value(A){g.userValue=A.detail.value??"",n.setValue(e,{value:g.userValue.toString()}),A.target.value=g.userValue},formattedValue(A){const{formattedValue:S}=A.detail;g.formattedValue=S,null!=S&&A.target!==document.activeElement&&(A.target.value=S),n.setValue(e,{formattedValue:S})},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{const{charLimit:S}=A.detail,{target:T}=A;if(0===S)return void T.removeAttribute("maxLength");T.setAttribute("maxLength",S);let x=g.userValue;!x||x.length<=S||(x=x.slice(0,S),T.value=g.userValue=x,n.setValue(e,{value:x}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}},w)}),i.addEventListener("keydown",w=>{g.commitKey=1;let D=-1;if("Escape"===w.key?D=0:"Enter"!==w.key||this.data.multiLine?"Tab"===w.key&&(g.commitKey=3):D=2,-1===D)return;const{value:A}=w.target;g.lastCommittedValue!==A&&(g.lastCommittedValue=A,g.userValue=A,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:D,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const y=v;v=null,i.addEventListener("blur",w=>{if(!g.focused||!w.relatedTarget)return;this.data.actions?.Blur||(g.focused=!1);const{value:D}=w.target;g.userValue=D,g.lastCommittedValue!==D&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:g.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),y(w)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",w=>{g.lastCommittedValue=null;const{data:D,target:A}=w,{value:S,selectionStart:T,selectionEnd:x}=A;let M=T,k=x;switch(w.inputType){case"deleteWordBackward":{const O=S.substring(0,T).match(/\w*[^\w]*$/);O&&(M-=O[0].length);break}case"deleteWordForward":{const O=S.substring(T).match(/^[^\w]*\w*/);O&&(k+=O[0].length);break}case"deleteContentBackward":T===x&&(M-=1);break;case"deleteContentForward":T===x&&(k+=1)}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,change:D||"",willCommit:!1,selStart:M,selEnd:k}})}),this._setEventListeners(i,g,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(v&&i.addEventListener("blur",v),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/d;i.classList.add("comb"),i.style.letterSpacing=`calc(${w}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class NC extends xo{constructor(n){super(n,{isRenderable:!!n.data.hasOwnCanvas})}}class PC extends xo{constructor(n){super(n,{isRenderable:n.renderForms})}render(){const n=this.annotationStorage,e=this.data,i=e.id;let a=n.getValue(i,{value:e.exportValue===e.fieldValue}).value;"string"==typeof a&&(a="Off"!==a,n.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const c=document.createElement("input");return ri.add(c),c.setAttribute("data-element-id",i),c.disabled=e.readOnly,this._setRequired(c,this.data.required),c.type="checkbox",c.name=e.fieldName,a&&c.setAttribute("checked",!0),c.setAttribute("exportValue",e.exportValue),c.tabIndex=Ro,c.addEventListener("change",d=>{const{name:f,checked:g}=d.target;for(const v of this._getElementsByName(f,i)){const y=g&&v.exportValue===e.exportValue;v.domElement&&(v.domElement.checked=y),n.setValue(v.id,{value:y})}n.setValue(i,{value:g})}),c.addEventListener("resetform",d=>{d.target.checked=(e.defaultFieldValue||"Off")===e.exportValue}),this.enableScripting&&this.hasJSActions&&(c.addEventListener("updatefromsandbox",d=>{this._dispatchEventFromSandbox({value(g){g.target.checked="Off"!==g.detail.value,n.setValue(i,{value:g.target.checked})}},d)}),this._setEventListeners(c,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)),this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.append(c),this.container}}class b_ extends xo{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const n=this.annotationStorage,e=this.data,i=e.id;let a=n.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if("string"==typeof a&&(a=a!==e.buttonValue,n.setValue(i,{value:a})),a)for(const d of this._getElementsByName(e.fieldName,i))n.setValue(d.id,{value:!1});const c=document.createElement("input");if(ri.add(c),c.setAttribute("data-element-id",i),c.disabled=e.readOnly,this._setRequired(c,this.data.required),c.type="radio",c.name=e.fieldName,a&&c.setAttribute("checked",!0),c.tabIndex=Ro,c.addEventListener("change",d=>{const{name:f,checked:g}=d.target;for(const v of this._getElementsByName(f,i))n.setValue(v.id,{value:!1});n.setValue(i,{value:g})}),c.addEventListener("resetform",d=>{const f=e.defaultFieldValue;d.target.checked=null!=f&&f===e.buttonValue}),this.enableScripting&&this.hasJSActions){const d=e.buttonValue;c.addEventListener("updatefromsandbox",f=>{this._dispatchEventFromSandbox({value:v=>{const y=d===v.detail.value;for(const w of this._getElementsByName(v.target.name)){const D=y&&w.id===i;w.domElement&&(w.domElement.checked=D),n.setValue(w.id,{value:D})}}},f)}),this._setEventListeners(c,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.checked)}return this._setBackgroundColor(c),this._setDefaultPropertiesFromJS(c),this.container.append(c),this.container}}class OC extends uf{constructor(n){super(n,{ignoreBorder:n.data.hasAppearance})}render(){const n=super.render();n.classList.add("buttonWidgetAnnotation","pushButton");const e=n.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),n}}class kC extends xo{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const n=this.annotationStorage,e=this.data.id,i=n.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");ri.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=Ro;let c=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",y=>{const w=this.data.defaultFieldValue;for(const D of a.options)D.selected=D.value===w});for(const y of this.data.options){const w=document.createElement("option");w.textContent=y.displayValue,w.value=y.exportValue,i.value.includes(y.exportValue)&&(w.setAttribute("selected",!0),c=!1),a.append(w)}let d=null;if(c){const y=document.createElement("option");y.value=" ",y.setAttribute("hidden",!0),y.setAttribute("selected",!0),a.prepend(y),d=()=>{y.remove(),a.removeEventListener("input",d),d=null},a.addEventListener("input",d)}const f=y=>{const w=y?"value":"textContent",{options:D,multiple:A}=a;return A?Array.prototype.filter.call(D,S=>S.selected).map(S=>S[w]):-1===D.selectedIndex?null:D[D.selectedIndex][w]};let g=f(!1);const v=y=>Array.prototype.map.call(y.target.options,D=>({displayValue:D.textContent,exportValue:D.value}));return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",y=>{this._dispatchEventFromSandbox({value(D){d?.();const A=D.detail.value,S=new Set(Array.isArray(A)?A:[A]);for(const T of a.options)T.selected=S.has(T.value);n.setValue(e,{value:f(!0)}),g=f(!1)},multipleSelection(D){a.multiple=!0},remove(D){const A=a.options,S=D.detail.remove;A[S].selected=!1,a.remove(S),A.length>0&&-1===Array.prototype.findIndex.call(A,x=>x.selected)&&(A[0].selected=!0),n.setValue(e,{value:f(!0),items:v(D)}),g=f(!1)},clear(D){for(;0!==a.length;)a.remove(0);n.setValue(e,{value:null,items:[]}),g=f(!1)},insert(D){const{index:A,displayValue:S,exportValue:T}=D.detail.insert,x=a.children[A],M=document.createElement("option");M.textContent=S,M.value=T,x?x.before(M):a.append(M),n.setValue(e,{value:f(!0),items:v(D)}),g=f(!1)},items(D){const{items:A}=D.detail;for(;0!==a.length;)a.remove(0);for(const S of A){const{displayValue:T,exportValue:x}=S,M=document.createElement("option");M.textContent=T,M.value=x,a.append(M)}a.options.length>0&&(a.options[0].selected=!0),n.setValue(e,{value:f(!0),items:v(D)}),g=f(!1)},indices(D){const A=new Set(D.detail.indices);for(const S of D.target.options)S.selected=A.has(S.index);n.setValue(e,{value:f(!0)}),g=f(!1)},editable(D){D.target.disabled=!D.detail.editable}},y)}),a.addEventListener("input",y=>{const w=f(!0),D=f(!1);n.setValue(e,{value:w}),y.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:g,change:D,changeEx:w,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],y=>y.target.value)):a.addEventListener("input",function(y){n.setValue(e,{value:f(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class av extends Dt{constructor(n){const{data:e,elements:i}=n;super(n,{isRenderable:Dt._hasPopupData(e)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const n=this.popup=new lv({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const i of this.elements)i.popup=n,i.container.ariaHasPopup="dialog",e.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(i=>`${Sm}${i}`).join(",")),this.container}}class lv{#e=this.#S.bind(this);#t=this.#I.bind(this);#n=this.#M.bind(this);#r=this.#E.bind(this);#s=null;#i=null;#c=null;#a=null;#u=null;#l=null;#d=null;#o=!1;#h=null;#f=null;#p=null;#m=null;#g=null;#v=null;#y=!1;constructor({container:n,color:e,elements:i,titleObj:a,modificationDate:c,contentsObj:d,richText:f,parent:g,rect:v,parentRect:y,open:w}){this.#i=n,this.#g=a,this.#c=d,this.#m=f,this.#l=g,this.#s=e,this.#p=v,this.#d=y,this.#u=i,this.#a=Tm.toDateObject(c),this.trigger=i.flatMap(D=>D.getElementsToTriggerPopup());for(const D of this.trigger)D.addEventListener("click",this.#r),D.addEventListener("mouseenter",this.#n),D.addEventListener("mouseleave",this.#t),D.classList.add("popupTriggerArea");for(const D of i)D.container?.addEventListener("keydown",this.#e);this.#i.hidden=!0,w&&this.#E()}render(){if(this.#h)return;const n=this.#h=document.createElement("div");if(n.className="popup",this.#s){const c=n.style.outlineColor=se.makeHexColor(...this.#s);n.style.backgroundColor=CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?`color-mix(in srgb, ${c} 30%, white)`:se.makeHexColor(...this.#s.map(f=>Math.floor(.7*(255-f)+f)))}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),({dir:i.dir,str:i.textContent}=this.#g),n.append(e),this.#a){const c=document.createElement("span");c.classList.add("popupDate"),c.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),c.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#a.valueOf()})),e.append(c)}const a=this.#w;if(a)iv.render({xfaHtml:a,intent:"richText",div:n}),n.lastChild.classList.add("richText","popupContent");else{const c=this._formatContents(this.#c);n.append(c)}this.#i.append(n)}get#w(){const n=this.#m,e=this.#c;return n?.str&&(!e?.str||e.str===n.str)&&this.#m.html||null}get#_(){return this.#w?.attributes?.style?.fontSize||0}get#C(){return this.#w?.attributes?.style?.color||null}#A(n){const e=[],i={str:n,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#C,fontSize:this.#_?`calc(${this.#_}px * var(--scale-factor))`:""}};for(const c of n.split("\n"))e.push({name:"span",value:c,attributes:a});return i}_formatContents({str:n,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const a=n.split(/(?:\r\n?|\n)/);for(let c=0,d=a.length;c<d;++c)i.append(document.createTextNode(a[c])),c<d-1&&i.append(document.createElement("br"));return i}#S(n){n.altKey||n.shiftKey||n.ctrlKey||n.metaKey||("Enter"===n.key||"Escape"===n.key&&this.#o)&&this.#E()}updateEdited({rect:n,popupContent:e}){this.#v||={contentsObj:this.#c,richText:this.#m},n&&(this.#f=null),e&&(this.#m=this.#A(e),this.#c=null),this.#h?.remove(),this.#h=null}resetEdited(){this.#v&&(({contentsObj:this.#c,richText:this.#m}=this.#v),this.#v=null,this.#h?.remove(),this.#h=null,this.#f=null)}#T(){if(null!==this.#f)return;const{page:{view:n},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:a,pageY:c}}}=this.#l;let d=!!this.#d,f=d?this.#d:this.#p;for(const S of this.#u)if(!f||null!==se.intersect(S.data.rect,f)){f=S.data.rect,d=!0;break}const g=se.normalizeRect([f[0],n[3]-f[1]+n[1],f[2],n[3]-f[3]+n[1]]);this.#f=[100*(g[0]+(d?f[2]-f[0]+5:0)-a)/e,100*(g[1]-c)/i];const{style:A}=this.#i;A.left=`${this.#f[0]}%`,A.top=`${this.#f[1]}%`}#E(){this.#o=!this.#o,this.#o?(this.#M(),this.#i.addEventListener("click",this.#r),this.#i.addEventListener("keydown",this.#e)):(this.#I(),this.#i.removeEventListener("click",this.#r),this.#i.removeEventListener("keydown",this.#e))}#M(){this.#h||this.render(),this.isVisible?this.#o&&this.#i.classList.add("focused"):(this.#T(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#I(){this.#i.classList.remove("focused"),!this.#o&&this.isVisible&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#i.hidden=!0)}maybeShow(){this.#y&&(this.#h||this.#M(),this.#y=!1,this.#i.hidden=!1)}get isVisible(){return!1===this.#i.hidden}}class df extends Dt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0}),this.textContent=n.data.textContent,this.textPosition=n.data.textPosition,this.annotationEditorType=Re.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const n=document.createElement("div");n.classList.add("annotationTextContent"),n.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,n.append(i)}this.container.append(n)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class FC extends Dt{#e=null;constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const n=this.data,{width:e,height:i}=ii(n.rect),a=this.svgFactory.create(e,i,!0),c=this.#e=this.svgFactory.createElement("svg:line");return c.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),c.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),c.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),c.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),c.setAttribute("stroke-width",n.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class LC extends Dt{#e=null;constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const n=this.data,{width:e,height:i}=ii(n.rect),a=this.svgFactory.create(e,i,!0),c=n.borderStyle.width,d=this.#e=this.svgFactory.createElement("svg:rect");return d.setAttribute("x",c/2),d.setAttribute("y",c/2),d.setAttribute("width",e-c),d.setAttribute("height",i-c),d.setAttribute("stroke-width",c||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),a.append(d),this.container.append(a),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class jC extends Dt{#e=null;constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const n=this.data,{width:e,height:i}=ii(n.rect),a=this.svgFactory.create(e,i,!0),c=n.borderStyle.width,d=this.#e=this.svgFactory.createElement("svg:ellipse");return d.setAttribute("cx",e/2),d.setAttribute("cy",i/2),d.setAttribute("rx",e/2-c/2),d.setAttribute("ry",i/2-c/2),d.setAttribute("stroke-width",c||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),a.append(d),this.container.append(a),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class w_ extends Dt{#e=null;constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,vertices:e,borderStyle:i,popupRef:a}}=this;if(!e)return this.container;const{width:c,height:d}=ii(n),f=this.svgFactory.create(c,d,!0);let g=[];for(let y=0,w=e.length;y<w;y+=2)g.push(`${e[y]-n[0]},${n[3]-e[y+1]}`);g=g.join(" ");const v=this.#e=this.svgFactory.createElement(this.svgElementName);return v.setAttribute("points",g),v.setAttribute("stroke-width",i.width||1),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),f.append(v),this.container.append(f),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class BC extends w_{constructor(n){super(n),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class UC extends Dt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class cv extends Dt{#e=null;#t=[];constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?Re.HIGHLIGHT:Re.INK}#n(n,e){switch(n){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,rotation:e,inkLists:i,borderStyle:a,popupRef:c}}=this,{transform:d,width:f,height:g}=this.#n(e,n),v=this.svgFactory.create(f,g,!0),y=this.#e=this.svgFactory.createElement("svg:g");v.append(y),y.setAttribute("stroke-width",a.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",d);for(let w=0,D=i.length;w<D;w++){const A=this.svgFactory.createElement(this.svgElementName);this.#t.push(A),A.setAttribute("points",i[w].join(",")),y.append(A)}return!c&&this.hasPopupData&&this._createPopup(),this.container.append(v),this._editOnDoubleClick(),this.container}updateEdited(n){super.updateEdited(n);const{thickness:e,points:i,rect:a}=n,c=this.#e;if(e>=0&&c.setAttribute("stroke-width",e||1),i)for(let d=0,f=this.#t.length;d<f;d++)this.#t[d].setAttribute("points",i[d].join(","));if(a){const{transform:d,width:f,height:g}=this.#n(this.data.rotation,a);c.parentElement.setAttribute("viewBox",`0 0 ${f} ${g}`),c.setAttribute("transform",d)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class __ extends Dt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Re.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class VC extends Dt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class E_ extends Dt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class No extends Dt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Po extends Dt{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Re.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class D_ extends Dt{#e=null;constructor(n){super(n,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:n,data:e}=this;let i;e.hasAppearance||0===e.fillAlpha?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(100*e.fillAlpha)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;const{isMac:a}=Vt.platform;return n.addEventListener("keydown",c=>{"Enter"===c.key&&(a?c.metaKey:c.ctrlKey)&&this.#t()}),!e.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),n.append(i),n}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class HC{#e=null;#t=null;#n=new Map;#r=null;constructor({div:n,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:a,page:c,viewport:d,structTreeLayer:f}){this.div=n,this.#e=e,this.#t=i,this.#r=f||null,this.page=c,this.viewport=d,this.zIndex=0,this._annotationEditorUIManager=a}hasEditableAnnotations(){return this.#n.size>0}#s(n,e){var i=this;return te(function*(){const a=n.firstChild||n,c=a.id=`${Sm}${e}`,d=yield i.#r?.getAriaAttributes(c);if(d)for(const[f,g]of d)a.setAttribute(f,g);i.div.append(n),i.#e?.moveElementInDOM(i.div,n,a,!1)})()}render(n){var e=this;return te(function*(){const{annotations:i}=n,a=e.div;Fr(a,e.viewport);const c=new Map,d={data:null,layer:a,linkService:n.linkService,downloadManager:n.downloadManager,imageResourcesPath:n.imageResourcesPath||"",renderForms:!1!==n.renderForms,svgFactory:new rv,annotationStorage:n.annotationStorage||new Ao,enableScripting:!0===n.enableScripting,hasJSActions:n.hasJSActions,fieldObjects:n.fieldObjects,parent:e,elements:null};for(const f of i){if(f.noHTML)continue;const g=16===f.annotationType;if(g){const w=c.get(f.id);if(!w)continue;d.elements=w}else{const{width:w,height:D}=ii(f.rect);if(w<=0||D<=0)continue}d.data=f;const v=ov.create(d);if(!v.isRenderable)continue;if(!g&&f.popupRef){const w=c.get(f.popupRef);w?w.push(v):c.set(f.popupRef,[v])}const y=v.render();f.hidden&&(y.style.visibility="hidden"),yield e.#s(y,f.id),v._isEditable&&(e.#n.set(v.data.id,v),e._annotationEditorUIManager?.renderAnnotationElement(v))}e.#i()})()}update({viewport:n}){const e=this.div;this.viewport=n,Fr(e,{rotation:n.rotation}),this.#i(),e.hidden=!1}#i(){if(!this.#t)return;const n=this.div;for(const[e,i]of this.#t){const a=n.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:c}=a;c?"CANVAS"===c.nodeName?c.replaceWith(i):c.classList.contains("annotationContent")?c.after(i):c.before(i):a.append(i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(n){return this.#n.get(n)}}const ol=/\r\n?|\n/g;class $t extends Oe{#e;#t="";#n=`${this.id}-editor`;#r=null;#s;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const n=$t.prototype,e=c=>c.isEmpty(),i=Qa.TRANSLATE_SMALL,a=Qa.TRANSLATE_BIG;return je(this,"_keyboardManager",new Ya([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],n.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],n._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],n._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],n._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],n._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=Re.FREETEXT;constructor(n){super({...n,name:"freeTextEditor"}),this.#e=n.color||$t._defaultColor||Oe._defaultLineColor,this.#s=n.fontSize||$t._defaultFontSize}static initialize(n,e){Oe.initialize(n,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,e){switch(n){case Ue.FREETEXT_SIZE:$t._defaultFontSize=e;break;case Ue.FREETEXT_COLOR:$t._defaultColor=e}}updateParams(n,e){switch(n){case Ue.FREETEXT_SIZE:this.#i(e);break;case Ue.FREETEXT_COLOR:this.#c(e)}}static get defaultPropertiesToUpdate(){return[[Ue.FREETEXT_SIZE,$t._defaultFontSize],[Ue.FREETEXT_COLOR,$t._defaultColor||Oe._defaultLineColor]]}get propertiesToUpdate(){return[[Ue.FREETEXT_SIZE,this.#s],[Ue.FREETEXT_COLOR,this.#e]]}#i(n){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-this.#s)*this.parentScale),this.#s=a,this.#u()},i=this.#s;this.addCommands({cmd:e.bind(this,n),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#c(n){const e=a=>{this.#e=this.editorDiv.style.color=a},i=this.#e;this.addCommands({cmd:e.bind(this,n),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(n,e){this._uiManager.translateSelectedEditors(n,e,!0)}getInitialTranslation(){const n=this.parentScale;return[-$t._internalPadding*n,-($t._internalPadding+this.#s)*n]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Re.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;const n=this._uiManager.combinedSignal(this.#r);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:n}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:n}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:n}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:n}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:n})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(n){this._focusEventsAllowed&&(super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const n=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&"BR"===i.nodeName||(n.push($t.#l(i)),e=i);return n.join("\n")}#u(){const[n,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:c}=this,d=c.style.display,f=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",a.div.append(this.div),i=c.getBoundingClientRect(),c.remove(),c.style.display=d,c.classList.toggle("hidden",f)}this.rotation%180==this.parentRotation%180?(this.width=i.width/n,this.height=i.height/e):(this.width=i.height/n,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const n=this.#t,e=this.#t=this.#a().trimEnd();if(n===e)return;const i=a=>{this.#t=a,a?(this.#d(),this._uiManager.rebuild(this),this.#u()):this.remove()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(n)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(n){this.enterInEditMode()}keydown(n){n.target===this.div&&"Enter"===n.key&&(this.enterInEditMode(),n.preventDefault())}editorDivKeydown(n){$t._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let n,e;this.width&&(n=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#s}px * var(--scale-factor))`,i.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Fc(this,this.div,["dblclick","keydown"]),this.width){const[a,c]=this.parentDimensions;if(this.annotationElementId){const{position:d}=this._initialData;let[f,g]=this.getInitialTranslation();[f,g]=this.pageTranslationToScreen(f,g);const[v,y]=this.pageDimensions,[w,D]=this.pageTranslation;let A,S;switch(this.rotation){case 0:A=n+(d[0]-w)/v,S=e+this.height-(d[1]-D)/y;break;case 90:A=n+(d[0]-w)/v,S=e-(d[1]-D)/y,[f,g]=[g,-f];break;case 180:A=n-this.width+(d[0]-w)/v,S=e-(d[1]-D)/y,[f,g]=[-f,-g];break;case 270:A=n+(d[0]-w-this.height*y)/v,S=e+(d[1]-D-this.width*v)/y,[f,g]=[-g,f]}this.setAt(A*a,S*c,f,g)}else this.setAt(n*a,e*c,this.width*a,this.height*c);this.#d(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#l(n){return(n.nodeType===Node.TEXT_NODE?n.nodeValue:n.innerText).replaceAll(ol,"")}editorDivPaste(n){const e=n.clipboardData||window.clipboardData,{types:i}=e;if(1===i.length&&"text/plain"===i[0])return;n.preventDefault();const a=$t.#h(e.getData("text")||"").replaceAll(ol,"\n");if(!a)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const d=c.getRangeAt(0);if(!a.includes("\n"))return d.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),void c.collapseToStart();const{startContainer:f,startOffset:g}=d,v=[],y=[];if(f.nodeType===Node.TEXT_NODE){const A=f.parentElement;if(y.push(f.nodeValue.slice(g).replaceAll(ol,"")),A!==this.editorDiv){let S=v;for(const T of this.editorDiv.childNodes)T!==A?S.push($t.#l(T)):S=y}v.push(f.nodeValue.slice(0,g).replaceAll(ol,""))}else if(f===this.editorDiv){let A=v,S=0;for(const T of this.editorDiv.childNodes)S++===g&&(A=y),A.push($t.#l(T))}this.#t=`${v.join("\n")}${a}${y.join("\n")}`,this.#d();const w=new Range;let D=v.reduce((A,S)=>A+S.length,0);for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const S=A.nodeValue.length;if(D<=S){w.setStart(A,D),w.setEnd(A,D);break}D-=S}c.removeAllRanges(),c.addRange(w)}#d(){if(this.editorDiv.replaceChildren(),this.#t)for(const n of this.#t.split("\n")){const e=document.createElement("div");e.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(e)}}#o(){return this.#t.replaceAll("\xa0"," ")}static#h(n){return n.replaceAll(" ","\xa0")}get contentDiv(){return this.editorDiv}static deserialize(n,e,i){var a=()=>super.deserialize,c=this;return te(function*(){let d=null;if(n instanceof df){const{data:{defaultAppearanceData:{fontSize:g,fontColor:v},rect:y,rotation:w,id:D,popupRef:A},textContent:S,textPosition:T,parent:{page:{pageNumber:x}}}=n;if(!S||0===S.length)return null;d=n={annotationType:Re.FREETEXT,color:Array.from(v),fontSize:g,value:S.join("\n"),position:T,pageIndex:x-1,rect:y.slice(0),rotation:w,id:D,deleted:!1,popupRef:A}}const f=yield a().call(c,n,e,i);return f.#s=n.fontSize,f.#e=se.makeHexColor(...n.color),f.#t=$t.#h(n.value),f.annotationElementId=n.id||null,f._initialData=d,f})()}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=$t._internalPadding*this.parentScale,i=this.getRect(e,e),a=Oe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),c={annotationType:Re.FREETEXT,color:a,fontSize:this.#s,value:this.#o(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?c:this.annotationElementId&&!this.#f(c)?null:(c.id=this.annotationElementId,c)}#f(n){const{value:e,fontSize:i,color:a,pageIndex:c}=this._initialData;return this._hasBeenMoved||n.value!==e||n.fontSize!==i||n.color.some((d,f)=>d!==a[f])||n.pageIndex!==c}renderAnnotationElement(n){const e=super.renderAnnotationElement(n);if(this.deleted)return e;const{style:i}=e;i.fontSize=`calc(${this.#s}px * var(--scale-factor))`,i.color=this.#e,e.replaceChildren();for(const c of this.#t.split("\n")){const d=document.createElement("div");d.append(c?document.createTextNode(c):document.createElement("br")),e.append(d)}const a=$t._internalPadding*this.parentScale;return n.updateEdited({rect:this.getRect(a,a),popupContent:this.#t}),e}resetAnnotationElement(n){super.resetAnnotationElement(n),n.resetEdited()}}let ne=(()=>class o{static PRECISION=1e-4;toSVGPath(){Je("Abstract method `toSVGPath` must be implemented.")}get box(){Je("Abstract getter `box` must be implemented.")}serialize(e,i){Je("Abstract method `serialize` must be implemented.")}static _rescale(e,i,a,c,d,f){f||=new Float32Array(e.length);for(let g=0,v=e.length;g<v;g+=2)f[g]=i+e[g]*c,f[g+1]=a+e[g+1]*d;return f}static _rescaleAndSwap(e,i,a,c,d,f){f||=new Float32Array(e.length);for(let g=0,v=e.length;g<v;g+=2)f[g]=i+e[g+1]*c,f[g+1]=a+e[g]*d;return f}static _translate(e,i,a,c){c||=new Float32Array(e.length);for(let d=0,f=e.length;d<f;d+=2)c[d]=i+e[d],c[d+1]=a+e[d+1];return c}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,i,a,c,d){switch(d){case 90:return[1-i/a,e/c];case 180:return[1-e/a,1-i/c];case 270:return[i/a,1-e/c];default:return[e/a,i/c]}}static _normalizePagePoint(e,i,a){switch(a){case 90:return[1-i,e];case 180:return[1-e,1-i];case 270:return[i,1-e];default:return[e,i]}}static createBezierPoints(e,i,a,c,d,f){return[(e+5*a)/6,(i+5*c)/6,(5*a+d)/6,(5*c+f)/6,(a+d)/2,(c+f)/2]}})();class Es{#e;#t=[];#n;#r;#s=[];#i=new Float32Array(18);#c;#a;#u;#l;#d;#o;#h=[];static#f=8;static#p=2;static#m=Es.#f+Es.#p;constructor({x:n,y:e},i,a,c,d,f=0){this.#e=i,this.#o=c*a,this.#r=d,this.#i.set([NaN,NaN,NaN,NaN,n,e],6),this.#n=f,this.#l=Es.#f*a,this.#u=Es.#m*a,this.#d=a,this.#h.push(n,e)}isEmpty(){return isNaN(this.#i[8])}#g(){const n=this.#i.subarray(4,6),e=this.#i.subarray(16,18),[i,a,c,d]=this.#e;return[(this.#c+(n[0]-e[0])/2-i)/c,(this.#a+(n[1]-e[1])/2-a)/d,(this.#c+(e[0]-n[0])/2-i)/c,(this.#a+(e[1]-n[1])/2-a)/d]}add({x:n,y:e}){this.#c=n,this.#a=e;const[i,a,c,d]=this.#e;let[f,g,v,y]=this.#i.subarray(8,12);const w=n-v,D=e-y,A=Math.hypot(w,D);if(A<this.#u)return!1;const S=A-this.#l,T=S/A,x=T*w,M=T*D;let k=f,O=g;f=v,g=y,v+=x,y+=M,this.#h?.push(n,e);const z=-M/S*this.#o,W=x/S*this.#o;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([v+z,y+W],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([v-z,y-W],16),isNaN(this.#i[6])?(0===this.#s.length&&(this.#i.set([f+z,g+W],2),this.#s.push(NaN,NaN,NaN,NaN,(f+z-i)/c,(g+W-a)/d),this.#i.set([f-z,g-W],14),this.#t.push(NaN,NaN,NaN,NaN,(f-z-i)/c,(g-W-a)/d)),this.#i.set([k,O,f,g,v,y],6),!this.isEmpty()):(this.#i.set([k,O,f,g,v,y],6),Math.abs(Math.atan2(O-g,k-f)-Math.atan2(M,x))<Math.PI/2?([f,g,v,y]=this.#i.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((f+v)/2-i)/c,((g+y)/2-a)/d),[f,g,k,O]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((k+f)/2-i)/c,((O+g)/2-a)/d),!0):([k,O,f,g,v,y]=this.#i.subarray(0,6),this.#s.push(((k+5*f)/6-i)/c,((O+5*g)/6-a)/d,((5*f+v)/6-i)/c,((5*g+y)/6-a)/d,((f+v)/2-i)/c,((g+y)/2-a)/d),[v,y,f,g,k,O]=this.#i.subarray(12,18),this.#t.push(((k+5*f)/6-i)/c,((O+5*g)/6-a)/d,((5*f+v)/6-i)/c,((5*g+y)/6-a)/d,((f+v)/2-i)/c,((g+y)/2-a)/d),!0))}toSVGPath(){if(this.isEmpty())return"";const n=this.#s,e=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#v();const i=[];i.push(`M${n[4]} ${n[5]}`);for(let a=6;a<n.length;a+=6)isNaN(n[a])?i.push(`L${n[a+4]} ${n[a+5]}`):i.push(`C${n[a]} ${n[a+1]} ${n[a+2]} ${n[a+3]} ${n[a+4]} ${n[a+5]}`);this.#w(i);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#y(i),i.join(" ")}#v(){const[n,e,i,a]=this.#e,[c,d,f,g]=this.#g();return`M${(this.#i[2]-n)/i} ${(this.#i[3]-e)/a} L${(this.#i[4]-n)/i} ${(this.#i[5]-e)/a} L${c} ${d} L${f} ${g} L${(this.#i[16]-n)/i} ${(this.#i[17]-e)/a} L${(this.#i[14]-n)/i} ${(this.#i[15]-e)/a} Z`}#y(n){const e=this.#t;n.push(`L${e[4]} ${e[5]} Z`)}#w(n){const[e,i,a,c]=this.#e,d=this.#i.subarray(4,6),f=this.#i.subarray(16,18),[g,v,y,w]=this.#g();n.push(`L${(d[0]-e)/a} ${(d[1]-i)/c} L${g} ${v} L${y} ${w} L${(f[0]-e)/a} ${(f[1]-i)/c}`)}newFreeDrawOutline(n,e,i,a,c,d){return new uv(n,e,i,a,c,d)}getOutlines(){const n=this.#s,e=this.#t,i=this.#i,[a,c,d,f]=this.#e,g=new Float32Array((this.#h?.length??0)+2);for(let w=0,D=g.length-2;w<D;w+=2)g[w]=(this.#h[w]-a)/d,g[w+1]=(this.#h[w+1]-c)/f;if(g[g.length-2]=(this.#c-a)/d,g[g.length-1]=(this.#a-c)/f,isNaN(i[6])&&!this.isEmpty())return this.#_(g);const v=new Float32Array(this.#s.length+24+this.#t.length);let y=n.length;for(let w=0;w<y;w+=2)isNaN(n[w])?v[w]=v[w+1]=NaN:(v[w]=n[w],v[w+1]=n[w+1]);y=this.#A(v,y);for(let w=e.length-6;w>=6;w-=6)for(let D=0;D<6;D+=2)isNaN(e[w+D])?(v[y]=v[y+1]=NaN,y+=2):(v[y]=e[w+D],v[y+1]=e[w+D+1],y+=2);return this.#C(v,y),this.newFreeDrawOutline(v,g,this.#e,this.#d,this.#n,this.#r)}#_(n){const e=this.#i,[i,a,c,d]=this.#e,[f,g,v,y]=this.#g(),w=new Float32Array(36);return w.set([NaN,NaN,NaN,NaN,(e[2]-i)/c,(e[3]-a)/d,NaN,NaN,NaN,NaN,(e[4]-i)/c,(e[5]-a)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,v,y,NaN,NaN,NaN,NaN,(e[16]-i)/c,(e[17]-a)/d,NaN,NaN,NaN,NaN,(e[14]-i)/c,(e[15]-a)/d],0),this.newFreeDrawOutline(w,n,this.#e,this.#d,this.#n,this.#r)}#C(n,e){const i=this.#t;return n.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+6}#A(n,e){const i=this.#i.subarray(4,6),a=this.#i.subarray(16,18),[c,d,f,g]=this.#e,[v,y,w,D]=this.#g();return n.set([NaN,NaN,NaN,NaN,(i[0]-c)/f,(i[1]-d)/g,NaN,NaN,NaN,NaN,v,y,NaN,NaN,NaN,NaN,w,D,NaN,NaN,NaN,NaN,(a[0]-c)/f,(a[1]-d)/g],e),e+24}}class uv extends ne{#e;#t=new Float32Array(4);#n;#r;#s;#i;#c;constructor(n,e,i,a,c,d){super(),this.#c=n,this.#s=e,this.#e=i,this.#i=a,this.#n=c,this.#r=d,this.lastPoint=[NaN,NaN],this.#a(d);const[f,g,v,y]=this.#t;for(let w=0,D=n.length;w<D;w+=2)n[w]=(n[w]-f)/v,n[w+1]=(n[w+1]-g)/y;for(let w=0,D=e.length;w<D;w+=2)e[w]=(e[w]-f)/v,e[w+1]=(e[w+1]-g)/y}toSVGPath(){const n=[`M${this.#c[4]} ${this.#c[5]}`];for(let e=6,i=this.#c.length;e<i;e+=6)isNaN(this.#c[e])?n.push(`L${this.#c[e+4]} ${this.#c[e+5]}`):n.push(`C${this.#c[e]} ${this.#c[e+1]} ${this.#c[e+2]} ${this.#c[e+3]} ${this.#c[e+4]} ${this.#c[e+5]}`);return n.push("Z"),n.join(" ")}serialize([n,e,i,a],c){const d=i-n,f=a-e;let g,v;switch(c){case 0:g=ne._rescale(this.#c,n,a,d,-f),v=ne._rescale(this.#s,n,a,d,-f);break;case 90:g=ne._rescaleAndSwap(this.#c,n,e,d,f),v=ne._rescaleAndSwap(this.#s,n,e,d,f);break;case 180:g=ne._rescale(this.#c,i,e,-d,f),v=ne._rescale(this.#s,i,e,-d,f);break;case 270:g=ne._rescaleAndSwap(this.#c,i,a,-d,-f),v=ne._rescaleAndSwap(this.#s,i,a,-d,-f)}return{outline:Array.from(g),points:[Array.from(v)]}}#a(n){const e=this.#c;let i=e[4],a=e[5],c=i,d=a,f=i,g=a,v=i,y=a;const w=n?Math.max:Math.min;for(let A=6,S=e.length;A<S;A+=6){if(isNaN(e[A]))c=Math.min(c,e[A+4]),d=Math.min(d,e[A+5]),f=Math.max(f,e[A+4]),g=Math.max(g,e[A+5]),y<e[A+5]?(v=e[A+4],y=e[A+5]):y===e[A+5]&&(v=w(v,e[A+4]));else{const T=se.bezierBoundingBox(i,a,...e.slice(A,A+6));c=Math.min(c,T[0]),d=Math.min(d,T[1]),f=Math.max(f,T[2]),g=Math.max(g,T[3]),y<T[3]?(v=T[2],y=T[3]):y===T[3]&&(v=w(v,T[2]))}i=e[A+4],a=e[A+5]}const D=this.#t;D[0]=c-this.#n,D[1]=d-this.#n,D[2]=f-c+2*this.#n,D[3]=g-d+2*this.#n,this.lastPoint=[v,y]}get box(){return this.#t}newOutliner(n,e,i,a,c,d=0){return new Es(n,e,i,a,c,d)}getNewOutline(n,e){const[i,a,c,d]=this.#t,[f,g,v,y]=this.#e,w=c*v,D=d*y,A=i*v+f,S=a*y+g,T=this.newOutliner({x:this.#s[0]*w+A,y:this.#s[1]*D+S},this.#e,this.#i,n,this.#r,e??this.#n);for(let x=2;x<this.#s.length;x+=2)T.add({x:this.#s[x]*w+A,y:this.#s[x+1]*D+S});return T.getOutlines()}}class hf{#e;#t;#n=[];#r=[];constructor(n,e=0,i=0,a=!0){let c=1/0,d=-1/0,f=1/0,g=-1/0;const y=10**-4;for(const{x:M,y:k,width:O,height:j}of n){const B=Math.floor((M-e)/y)*y,z=Math.ceil((M+O+e)/y)*y,W=Math.floor((k-e)/y)*y,oe=Math.ceil((k+j+e)/y)*y;this.#n.push([B,W,oe,!0],[z,W,oe,!1]),c=Math.min(c,B),d=Math.max(d,z),f=Math.min(f,W),g=Math.max(g,oe)}const w=d-c+2*i,D=g-f+2*i,A=c-i,S=f-i,T=this.#n.at(a?-1:-2),x=[T[0],T[2]];for(const M of this.#n){const[k,O,j]=M;M[0]=(k-A)/w,M[1]=(O-S)/D,M[2]=(j-S)/D}this.#e=new Float32Array([A,S,w,D]),this.#t=x}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const n=[];for(const e of this.#n)e[3]?(n.push(...this.#u(e)),this.#c(e)):(this.#a(e),n.push(...this.#u(e)));return this.#s(n)}#s(n){const e=[],i=new Set;for(const d of n){const[f,g,v]=d;e.push([f,g,d],[f,v,d])}e.sort((d,f)=>d[1]-f[1]||d[0]-f[0]);for(let d=0,f=e.length;d<f;d+=2){const g=e[d][2],v=e[d+1][2];g.push(v),v.push(g),i.add(g),i.add(v)}const a=[];let c;for(;i.size>0;){const d=i.values().next().value;let[f,g,v,y,w]=d;i.delete(d);let D=f,A=g;for(c=[f,v],a.push(c);;){let S;if(i.has(y))S=y;else{if(!i.has(w))break;S=w}i.delete(S),[f,g,v,y,w]=S,D!==f&&(c.push(D,A,f,A===g?g:v),D=f),A=A===g?v:g}c.push(D,A)}return new zc(a,this.#e,this.#t)}#i(n){const e=this.#r;let i=0,a=e.length-1;for(;i<=a;){const c=i+a>>1,d=e[c][0];if(d===n)return c;d<n?i=c+1:a=c-1}return a+1}#c([,n,e]){const i=this.#i(n);this.#r.splice(i,0,[n,e])}#a([,n,e]){const i=this.#i(n);for(let a=i;a<this.#r.length;a++){const[c,d]=this.#r[a];if(c!==n)break;if(c===n&&d===e)return void this.#r.splice(a,1)}for(let a=i-1;a>=0;a--){const[c,d]=this.#r[a];if(c!==n)break;if(c===n&&d===e)return void this.#r.splice(a,1)}}#u(n){const[e,i,a]=n,c=[[e,i,a]],d=this.#i(a);for(let f=0;f<d;f++){const[g,v]=this.#r[f];for(let y=0,w=c.length;y<w;y++){const[,D,A]=c[y];if(!(v<=D||A<=g)){if(D>=g){if(A>v)c[y][1]=v;else{if(1===w)return[];c.splice(y,1),y--,w--}continue}c[y][2]=g,A>v&&c.push([e,v,A])}}}return c}}class zc extends ne{#e;#t;constructor(n,e,i){super(),this.#t=n,this.#e=e,this.lastPoint=i}toSVGPath(){const n=[];for(const e of this.#t){let[i,a]=e;n.push(`M${i} ${a}`);for(let c=2;c<e.length;c+=2){const d=e[c],f=e[c+1];d===i?(n.push(`V${f}`),a=f):f===a&&(n.push(`H${d}`),i=d)}n.push("Z")}return n.join(" ")}serialize([n,e,i,a],c){const d=[],f=i-n,g=a-e;for(const v of this.#t){const y=new Array(v.length);for(let w=0;w<v.length;w+=2)y[w]=n+v[w]*f,y[w+1]=a-v[w+1]*g;d.push(y)}return d}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class Gc extends Es{newFreeDrawOutline(n,e,i,a,c,d){return new C_(n,e,i,a,c,d)}}class C_ extends uv{newOutliner(n,e,i,a,c,d=0){return new Gc(n,e,i,a,c,d)}}class Un{#e=null;#t=null;#n;#r=null;#s=!1;#i=!1;#c=null;#a;#u=null;#l=null;#d;static#o=null;static get _keyboardManager(){return je(this,"_keyboardManager",new Ya([[["Escape","mac+Escape"],Un.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Un.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Un.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Un.prototype._moveToPrevious],[["Home","mac+Home"],Un.prototype._moveToBeginning],[["End","mac+End"],Un.prototype._moveToEnd]]))}constructor({editor:n=null,uiManager:e=null}){n?(this.#i=!1,this.#d=Ue.HIGHLIGHT_COLOR,this.#c=n):(this.#i=!0,this.#d=Ue.HIGHLIGHT_DEFAULT_COLOR),this.#l=n?._uiManager||e,this.#a=this.#l._eventBus,this.#n=n?.color||this.#l?.highlightColors.values().next().value||"#FFFF98",Un.#o||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const n=this.#e=document.createElement("button");n.className="colorPicker",n.tabIndex="0",n.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),n.setAttribute("aria-haspopup",!0);const e=this.#l._signal;n.addEventListener("click",this.#m.bind(this),{signal:e}),n.addEventListener("keydown",this.#p.bind(this),{signal:e});const i=this.#t=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#n,n.append(i),n}renderMainDropdown(){const n=this.#r=this.#h();return n.setAttribute("aria-orientation","horizontal"),n.setAttribute("aria-labelledby","highlightColorPickerLabel"),n}#h(){const n=document.createElement("div"),e=this.#l._signal;n.addEventListener("contextmenu",rr,{signal:e}),n.className="dropdown",n.role="listbox",n.setAttribute("aria-multiselectable",!1),n.setAttribute("aria-orientation","vertical"),n.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,a]of this.#l.highlightColors){const c=document.createElement("button");c.tabIndex="0",c.role="option",c.setAttribute("data-color",a),c.title=i,c.setAttribute("data-l10n-id",Un.#o[i]);const d=document.createElement("span");c.append(d),d.className="swatch",d.style.backgroundColor=a,c.setAttribute("aria-selected",a===this.#n),c.addEventListener("click",this.#f.bind(this,a),{signal:e}),n.append(c)}return n.addEventListener("keydown",this.#p.bind(this),{signal:e}),n}#f(n,e){e.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:this.#d,value:n})}_colorSelectFromKeyboard(n){if(n.target===this.#e)return void this.#m(n);const e=n.target.getAttribute("data-color");e&&this.#f(e,n)}_moveToNext(n){this.#v?n.target!==this.#e?n.target.nextSibling?.focus():this.#r.firstChild?.focus():this.#m(n)}_moveToPrevious(n){n.target!==this.#r?.firstChild&&n.target!==this.#e?(this.#v||this.#m(n),n.target.previousSibling?.focus()):this.#v&&this._hideDropdownFromKeyboard()}_moveToBeginning(n){this.#v?this.#r.firstChild?.focus():this.#m(n)}_moveToEnd(n){this.#v?this.#r.lastChild?.focus():this.#m(n)}#p(n){Un._keyboardManager.exec(this,n)}#m(n){if(this.#v)return void this.hideDropdown();if(this.#s=0===n.detail,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#g.bind(this),{signal:this.#l.combinedSignal(this.#u)})),this.#r)return void this.#r.classList.remove("hidden");const e=this.#r=this.#h();this.#e.append(e)}#g(n){this.#r?.contains(n.target)||this.hideDropdown()}hideDropdown(){this.#r?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#v(){return this.#r&&!this.#r.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#v)return void this.#c?.unselect();this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(n){if(this.#t&&(this.#t.style.backgroundColor=n),!this.#r)return;const e=this.#l.highlightColors.values();for(const i of this.#r.children)i.setAttribute("aria-selected",e.next().value===n)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#r?.remove(),this.#r=null}}class Pt extends Oe{#e=null;#t=0;#n;#r=null;#s=null;#i=null;#c=null;#a=0;#u=null;#l=null;#d=null;#o=!1;#h=null;#f;#p=null;#m="";#g;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Re.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const n=Pt.prototype;return je(this,"_keyboardManager",new Ya([[["ArrowLeft","mac+ArrowLeft"],n._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],n._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],n._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],n._moveCaret,{args:[3]}]]))}constructor(n){super({...n,name:"highlightEditor"}),this.color=n.color||Pt._defaultColor,this.#g=n.thickness||Pt._defaultThickness,this.#f=n.opacity||Pt._defaultOpacity,this.#n=n.boxes||null,this.#v=n.methodOfCreation||"",this.#m=n.text||"",this._isDraggable=!1,n.highlightId>-1?(this.#o=!0,this.#w(n),this.#T()):this.#n&&(this.#e=n.anchorNode,this.#t=n.anchorOffset,this.#c=n.focusNode,this.#a=n.focusOffset,this.#y(),this.#T(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#o?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#g,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(n){return{numberOfColors:n.get("color").size}}#y(){const n=new hf(this.#n,.001);this.#l=n.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new hf(this.#n,.0025,.001,"ltr"===this._uiManager.direction);this.#i=e.getOutlines();const{lastPoint:i}=this.#i;this.#h=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#w({highlightOutlines:n,highlightId:e,clipPathId:i}){if(this.#l=n,this.#i=n.getNewOutline(this.#g/2+1.5,.0025),e>=0)this.#d=e,this.#r=i,this.parent.drawLayer.finalizeDraw(e,{bbox:n.box,path:{d:n.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:Pt.#E(this.#l.box,(y-this.rotation+360)%360),path:{d:n.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:Pt.#E(this.#i.box,y),path:{d:this.#i.toSVGPath()}})}const[c,d,f,g]=n.box;switch(this.rotation){case 0:this.x=c,this.y=d,this.width=f,this.height=g;break;case 90:{const[y,w]=this.parentDimensions;this.x=d,this.y=1-c,this.width=f*w/y,this.height=g*y/w;break}case 180:this.x=1-c,this.y=1-d,this.width=f,this.height=g;break;case 270:{const[y,w]=this.parentDimensions;this.x=1-d,this.y=c,this.width=f*w/y,this.height=g*y/w;break}}const{lastPoint:v}=this.#i;this.#h=[(v[0]-c)/f,(v[1]-d)/g]}static initialize(n,e){Oe.initialize(n,e),Pt._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(n,e){switch(n){case Ue.HIGHLIGHT_DEFAULT_COLOR:Pt._defaultColor=e;break;case Ue.HIGHLIGHT_THICKNESS:Pt._defaultThickness=e}}translateInPage(n,e){}get toolbarPosition(){return this.#h}updateParams(n,e){switch(n){case Ue.HIGHLIGHT_COLOR:this.#_(e);break;case Ue.HIGHLIGHT_THICKNESS:this.#C(e)}}static get defaultPropertiesToUpdate(){return[[Ue.HIGHLIGHT_DEFAULT_COLOR,Pt._defaultColor],[Ue.HIGHLIGHT_THICKNESS,Pt._defaultThickness]]}get propertiesToUpdate(){return[[Ue.HIGHLIGHT_COLOR,this.color||Pt._defaultColor],[Ue.HIGHLIGHT_THICKNESS,this.#g||Pt._defaultThickness],[Ue.HIGHLIGHT_FREE,this.#o]]}#_(n){const e=(c,d)=>{this.color=c,this.#f=d,this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:c,"fill-opacity":d}}),this.#s?.updateColor(c)},i=this.color,a=this.#f;this.addCommands({cmd:e.bind(this,n,Pt._defaultOpacity),undo:e.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(n)},!0)}#C(n){const e=this.#g,i=a=>{this.#g=a,this.#A(a)};this.addCommands({cmd:i.bind(this,n),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:n},!0)}addEditToolbar(){var n=()=>super.addEditToolbar,e=this;return te(function*(){const i=yield n().call(e);return i?(e._uiManager.highlightColors&&(e.#s=new Un({editor:e}),i.addColorPicker(e.#s)),i):null})()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(n,e){return super.getRect(n,e,this.#R())}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){this.#S(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#T(),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){let e=!1;this.parent&&!n?this.#S():n&&(this.#T(n),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(n),this.show(this._isVisible),e&&this.select()}#A(n){if(!this.#o)return;this.#w({highlightOutlines:this.#l.getNewOutline(n/2)}),this.fixAndSetPosition();const[e,i]=this.parentDimensions;this.setDims(this.width*e,this.height*i)}#S(){null===this.#d||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#T(n=this.parent){null===this.#d&&(({id:this.#d,clipPathId:this.#r}=n.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#f},rootClass:{highlight:!0,free:this.#o},path:{d:this.#l.toSVGPath()}},!1,!0)),this.#p=n.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#o},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#o),this.#u&&(this.#u.style.clipPath=this.#r))}static#E([n,e,i,a],c){switch(c){case 90:return[1-e-a,n,a,i];case 180:return[1-n-i,1-e-a,i,a];case 270:return[e,1-n-i,a,i]}return[n,e,i,a]}rotate(n){const{drawLayer:e}=this.parent;let i;i=this.#o?Pt.#E(this.#l.box,n=(n-this.rotation+360)%360):Pt.#E([this.x,this.y,this.width,this.height],n),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":n}}),e.updateProperties(this.#p,{bbox:Pt.#E(this.#i.box,n),root:{"data-main-rotation":n}})}render(){if(this.div)return this.div;const n=super.render();this.#m&&(n.setAttribute("aria-label",this.#m),n.setAttribute("role","mark")),this.#o?n.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const e=this.#u=document.createElement("div");n.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#r;const[i,a]=this.parentDimensions;return this.setDims(this.width*i,this.height*a),Fc(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),n}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#M(n){Pt._keyboardManager.exec(this,n)}_moveCaret(n){switch(this.parent.unselect(this),n){case 0:case 2:this.#I(!0);break;case 1:case 3:this.#I(!1)}}#I(n){if(!this.#e)return;const e=window.getSelection();n?e.setPosition(this.#e,this.#t):e.setPosition(this.#c,this.#a)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#o||this.#I(!1))}get _mustFixPosition(){return!this.#o}show(n=this._isVisible){super.show(n),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!n}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!n}}))}#R(){return this.#o?this.rotation:0}#O(){if(this.#o)return null;const[n,e]=this.pageDimensions,[i,a]=this.pageTranslation,c=this.#n,d=new Float32Array(8*c.length);let f=0;for(const{x:g,y:v,width:y,height:w}of c){const D=g*n+i,A=(1-v)*e+a;d[f]=d[f+4]=D,d[f+1]=d[f+3]=A,d[f+2]=d[f+6]=D+y*n,d[f+5]=d[f+7]=A-w*e,f+=8}return d}#j(n){return this.#l.serialize(n,this.#R())}static startHighlighting(n,e,{target:i,x:a,y:c}){const{x:d,y:f,width:g,height:v}=i.getBoundingClientRect(),y=new AbortController,w=n.combinedSignal(y),D=A=>{y.abort(),this.#b(n,A)};window.addEventListener("blur",D,{signal:w}),window.addEventListener("pointerup",D,{signal:w}),window.addEventListener("pointerdown",ir,{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",rr,{signal:w}),i.addEventListener("pointermove",this.#D.bind(this,n),{signal:w}),this._freeHighlight=new Gc({x:a,y:c},[d,f,g,v],n.scale,this._defaultThickness/2,e,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static#D(n,e){this._freeHighlight.add(e)&&n.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#b(n,e){this._freeHighlight.isEmpty()?n.drawLayer.remove(this._freeHighlightId):n.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(n,e,i){var a=()=>super.deserialize,c=this;return te(function*(){let d=null;if(n instanceof __){const{data:{quadPoints:x,rect:M,rotation:k,id:O,color:j,opacity:B,popupRef:z},parent:{page:{pageNumber:W}}}=n;d=n={annotationType:Re.HIGHLIGHT,color:Array.from(j),opacity:B,quadPoints:x,boxes:null,pageIndex:W-1,rect:M.slice(0),rotation:k,id:O,deleted:!1,popupRef:z}}else if(n instanceof cv){const{data:{inkLists:x,rect:M,rotation:k,id:O,color:j,borderStyle:{rawWidth:B},popupRef:z},parent:{page:{pageNumber:W}}}=n;d=n={annotationType:Re.HIGHLIGHT,color:Array.from(j),thickness:B,inkLists:x,boxes:null,pageIndex:W-1,rect:M.slice(0),rotation:k,id:O,deleted:!1,popupRef:z}}const{color:f,quadPoints:g,inkLists:v,opacity:y}=n,w=yield a().call(c,n,e,i);w.color=se.makeHexColor(...f),w.#f=y||1,v&&(w.#g=n.thickness),w.annotationElementId=n.id||null,w._initialData=d;const[D,A]=w.pageDimensions,[S,T]=w.pageTranslation;if(g){const x=w.#n=[];for(let M=0;M<g.length;M+=8)x.push({x:(g[M]-S)/D,y:1-(g[M+1]-T)/A,width:(g[M+2]-g[M])/D,height:(g[M+1]-g[M+5])/A});w.#y(),w.#T(),w.rotate(w.rotation)}else if(v){w.#o=!0;const x=v[0],M={x:x[0]-S,y:A-(x[1]-T)},k=new Gc(M,[0,0,D,A],1,w.#g/2,!0,.001);for(let B=0,z=x.length;B<z;B+=2)M.x=x[B]-S,M.y=A-(x[B+1]-T),k.add(M);const{id:O,clipPathId:j}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:w.color,"fill-opacity":w._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:k.toSVGPath()}},!0,!0);w.#w({highlightOutlines:k.getOutlines(),highlightId:O,clipPathId:j}),w.#T()}return w})()}serialize(n=!1){if(this.isEmpty()||n)return null;if(this.deleted)return this.serializeDeleted();const e=this.getRect(0,0),i=Oe._colorManager.convert(this.color),a={annotationType:Re.HIGHLIGHT,color:i,opacity:this.#f,thickness:this.#g,quadPoints:this.#O(),outlines:this.#j(e),pageIndex:this.pageIndex,rect:e,rotation:this.#R(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#P(a)?null:(a.id=this.annotationElementId,a)}#P(n){const{color:e}=this._initialData;return n.color.some((i,a)=>i!==e[a])}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class dv{#e=Object.create(null);updateProperty(n,e){this[n]=e,this.updateSVGProperty(n,e)}updateProperties(n){if(n)for(const[e,i]of Object.entries(n))this.updateProperty(e,i)}updateSVGProperty(n,e){this.#e[n]=e}toSVGProperties(){const n=this.#e;return this.#e=Object.create(null),{root:n}}reset(){this.#e=Object.create(null)}updateAll(n=this){this.updateProperties(n)}clone(){Je("Not implemented")}}let $C=(()=>{class o extends Oe{#e=null;#t;_drawId=null;static _currentDrawId=-1;static _currentDraw=null;static _currentDrawingOptions=null;static _currentParent=null;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,e.drawOutlines&&(this.#n(e),this.#i())}#n({drawOutlines:e,drawId:i,drawingOptions:a}){this.#e=e,this._drawingOptions||=a,i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=this.#r(e,this.parent),this.#u(e.box)}#r(e,i){const{id:a}=i.drawLayer.draw(o._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return a}static _mergeSVGProperties(e,i){const a=new Set(Object.keys(e));for(const[c,d]of Object.entries(i))a.has(c)?Object.assign(e[c],d):e[c]=d;return e}static getDefaultDrawingOptions(e){Je("Not implemented")}static get typesMap(){Je("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const a=this.typesMap.get(e);a&&this._defaultDrawingOptions.updateProperty(a,i),this._currentParent&&(this._currentDraw.updateProperty(a,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const a=this.constructor.typesMap.get(e);a&&this._updateProperty(e,a,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[a,c]of this.typesMap)e.push([a,i[c]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[a,c]of this.constructor.typesMap)e.push([a,i[c]]);return e}_updateProperty(e,i,a){const c=this._drawingOptions,d=c[i],f=g=>{c.updateProperty(i,g);const v=this.#e.updateProperty(i,g);v&&this.#u(v),this.parent?.drawLayer.updateProperties(this._drawId,c.toSVGProperties())};this.addCommands({cmd:f.bind(this,a),undo:f.bind(this,d),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,o._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#a()),{bbox:this.#l()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,o._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#a()),{bbox:this.#l()}))}_onTranslating(e,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#l(e,i)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,o._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#a(),this.parentDimensions),{bbox:this.#l()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),this.isOnScreen&&this.div.focus())}remove(){this.#s(),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.#i(),this.#u(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#s()):e&&(this._uiManager.addShouldRescale(this),this.#i(e),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),i&&this.select()}#s(){null===this._drawId||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#i(e=this.parent){if(null===this._drawId||this.parent!==e){if(null!==this._drawId)return void this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);this._drawingOptions.updateAll(),this._drawId=this.#r(this.#e,e)}}#c([e,i,a,c]){const{parentDimensions:[d,f],rotation:g}=this;switch(g){case 90:return[i,1-e,a*(f/d),c*(d/f)];case 180:return[1-e,1-i,a,c];case 270:return[1-i,e,a*(f/d),c*(d/f)];default:return[e,i,a,c]}}#a(){const{x:e,y:i,width:a,height:c,parentDimensions:[d,f],rotation:g}=this;switch(g){case 90:return[1-i,e,a*(d/f),c*(f/d)];case 180:return[1-e,1-i,a,c];case 270:return[i,1-e,a*(d/f),c*(f/d)];default:return[e,i,a,c]}}#u(e){if([this.x,this.y,this.width,this.height]=this.#c(e),this.div){this.fixAndSetPosition();const[i,a]=this.parentDimensions;this.setDims(this.width*i,this.height*a)}this._onResized()}#l(){const{x:e,y:i,width:a,height:c,rotation:d,parentRotation:f,parentDimensions:[g,v]}=this;switch((4*d+f)/90){case 1:return[1-i-c,e,c,a];case 2:return[1-e-a,1-i-c,a,c];case 3:return[i,1-e-a,c,a];case 4:return[e,i-a*(g/v),c*(v/g),a*(g/v)];case 5:return[1-i,e,a*(g/v),c*(v/g)];case 6:return[1-e-c*(v/g),1-i,c*(v/g),a*(g/v)];case 7:return[i-a*(g/v),1-e-c*(v/g),a*(g/v),c*(v/g)];case 8:return[e-a,i-c,a,c];case 9:return[1-i,e-a,c,a];case 10:return[1-e,1-i,a,c];case 11:return[i-c,1-e,c,a];case 12:return[e-c*(v/g),i,c*(v/g),a*(g/v)];case 13:return[1-i-a*(g/v),e-c*(v/g),a*(g/v),c*(v/g)];case 14:return[1-e,1-i-a*(g/v),c*(v/g),a*(g/v)];case 15:return[i,1-e,a*(g/v),c*(v/g)];default:return[e,i,a,c]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,o._mergeSVGProperties({bbox:this.#l()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const i=document.createElement("div");e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[a,c]=this.parentDimensions;return this.setDims(this.width*a,this.height*c),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,i,a,c,d){Je("Not implemented")}static startDrawing(e,i,a,{target:c,offsetX:d,offsetY:f}){const{viewport:{rotation:g}}=e,{width:v,height:y}=c.getBoundingClientRect(),w=new AbortController,D=e.combinedSignal(w);window.addEventListener("pointerup",A=>{w.abort(),e.toggleDrawing(!0),this._endDraw(A)},{signal:D}),window.addEventListener("pointerdown",ir,{capture:!0,passive:!1,signal:D}),window.addEventListener("contextmenu",rr,{signal:D}),c.addEventListener("pointermove",this._drawMove.bind(this),{signal:D}),e.toggleDrawing(),i._editorUndoBar?.hide(),this._currentDraw?e.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.startNew(d,f,v,y,g)):(i.updateUIForDefaultProperties(this),this._currentDraw=this.createDrawerInstance(d,f,v,y,g),this._currentDrawingOptions=this.getDefaultDrawingOptions(),this._currentParent=e,({id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(this._currentDrawingOptions.toSVGProperties(),this._currentDraw.defaultSVGProperties),!0,!1)))}static _drawMove({offsetX:e,offsetY:i}){this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.add(e,i))}static _endDraw({offsetX:e,offsetY:i}){const a=this._currentParent;if(a.drawLayer.updateProperties(this._currentDrawId,this._currentDraw.end(e,i)),this.supportMultipleDrawings){const c=this._currentDraw,d=this._currentDrawId,f=c.getLastElement();a.addCommands({cmd:()=>{a.drawLayer.updateProperties(d,c.setLastElement(f))},undo:()=>{a.drawLayer.updateProperties(d,c.removeLastElement())},mustExec:!1,type:Ue.DRAW_STEP})}else this.endDrawing(!1)}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(Ue.DRAW_STEP),!this._currentDraw.isEmpty()){const{pageDimensions:[a,c],scale:d}=i,f=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:this._currentDraw.getOutlines(a*d,c*d,d,this._INNER_MARGIN),drawingOptions:this._currentDrawingOptions,mustBeCommitted:!e});return this._cleanup(),f}return i.drawLayer.remove(this._currentDrawId),this._cleanup(),null}static _cleanup(){this._currentDrawId=-1,this._currentDraw=null,this._currentDrawingOptions=null,this._currentParent=null}createDrawingOptions(e){}static deserializeDraw(e,i,a,c,d,f){Je("Not implemented")}static deserialize(e,i,a){var c=()=>super.deserialize,d=this;return te(function*(){const{rawDims:{pageWidth:f,pageHeight:g,pageX:v,pageY:y}}=i.viewport,w=d.deserializeDraw(v,y,f,g,d._INNER_MARGIN,e),D=yield c().call(d,e,i,a);return D.createDrawingOptions(e),D.#n({drawOutlines:w}),D.#i(),D.onScaleChanging(),D.rotate(),D})()}serializeDraw(e){const[i,a]=this.pageTranslation,[c,d]=this.pageDimensions;return this.#e.serialize([i,a,c,d],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}return o})();class A_{#e=new Float64Array(6);#t;#n;#r;#s;#i;#c="";#a=0;#u=new al;#l;#d;constructor(n,e,i,a,c,d){this.#l=i,this.#d=a,this.#r=c,this.#s=d,[n,e]=this.#o(n,e);const f=this.#t=[NaN,NaN,NaN,NaN,n,e];this.#i=[n,e],this.#n=[{line:f,points:this.#i}],this.#e.set(f,0)}updateProperty(n,e){"stroke-width"===n&&(this.#s=e)}#o(n,e){return ne._normalizePoint(n,e,this.#l,this.#d,this.#r)}isEmpty(){return!this.#n||0===this.#n.length}add(n,e){[n,e]=this.#o(n,e);const[i,a,c,d]=this.#e.subarray(2,6);return Math.hypot(this.#l*(n-c),this.#d*(e-d))<=2?null:(this.#i.push(n,e),isNaN(i)?(this.#e.set([c,d,n,e],2),this.#t.push(NaN,NaN,NaN,NaN,n,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([i,a,c,d,n,e],0),this.#t.push(...ne.createBezierPoints(i,a,c,d,n,e)),{path:{d:this.toSVGPath()}}))}end(n,e){return this.add(n,e)||(2===this.#i.length?{path:{d:this.toSVGPath()}}:null)}startNew(n,e,i,a,c){this.#l=i,this.#d=a,this.#r=c,[n,e]=this.#o(n,e);const d=this.#t=[NaN,NaN,NaN,NaN,n,e];this.#i=[n,e];const f=this.#n.at(-1);return f&&(f.line=new Float32Array(f.line),f.points=new Float32Array(f.points)),this.#n.push({line:d,points:this.#i}),this.#e.set(d,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(n){return this.#n?(this.#n.push(n),this.#t=n.line,this.#i=n.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(n)}removeLastElement(){if(!this.#n)return this.#u.removeLastElement();this.#n.pop(),this.#c="";for(let n=0,e=this.#n.length;n<e;n++){const{line:i,points:a}=this.#n[n];this.#t=i,this.#i=a,this.#a=0,this.toSVGPath()}return{path:{d:this.#c}}}toSVGPath(){const n=ne.svgRound(this.#t[4]),e=ne.svgRound(this.#t[5]);if(2===this.#i.length)return this.#c=`${this.#c} M ${n} ${e} Z`,this.#c;if(this.#i.length<=6){const a=this.#c.lastIndexOf("M");this.#c=`${this.#c.slice(0,a)} M ${n} ${e}`,this.#a=6}if(4===this.#i.length){const a=ne.svgRound(this.#t[10]),c=ne.svgRound(this.#t[11]);return this.#c=`${this.#c} L ${a} ${c}`,this.#a=12,this.#c}const i=[];0===this.#a&&(i.push(`M ${n} ${e}`),this.#a=6);for(let a=this.#a,c=this.#t.length;a<c;a+=6){const[d,f,g,v,y,w]=this.#t.slice(a,a+6).map(ne.svgRound);i.push(`C${d} ${f} ${g} ${v} ${y} ${w}`)}return this.#c+=i.join(" "),this.#a=this.#t.length,this.#c}getOutlines(n,e,i,a){const c=this.#n.at(-1);return c.line=new Float32Array(c.line),c.points=new Float32Array(c.points),this.#u.build(this.#n,n,e,i,this.#r,this.#s,a),this.#e=null,this.#t=null,this.#n=null,this.#c=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class al extends ne{#e;#t=0;#n;#r;#s;#i;#c;#a;#u;build(n,e,i,a,c,d,f){this.#s=e,this.#i=i,this.#c=a,this.#a=c,this.#u=d,this.#n=f??0,this.#r=n,this.#o()}setLastElement(n){return this.#r.push(n),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#r.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const n=[];for(const{line:e}of this.#r)if(n.push(`M${ne.svgRound(e[4])} ${ne.svgRound(e[5])}`),6!==e.length)if(12!==e.length)for(let i=6,a=e.length;i<a;i+=6){const[c,d,f,g,v,y]=e.subarray(i,i+6).map(ne.svgRound);n.push(`C${c} ${d} ${f} ${g} ${v} ${y}`)}else n.push(`L${ne.svgRound(e[10])} ${ne.svgRound(e[11])}`);else n.push("Z");return n.join("")}serialize([n,e,i,a],c){const d=[],f=[],[g,v,y,w]=this.#d();let D,A,S,T,x,M,k,O,j;switch(this.#a){case 0:j=ne._rescale,D=n,A=e+a,S=i,T=-a,x=n+g*i,M=e+(1-v-w)*a,k=n+(g+y)*i,O=e+(1-v)*a;break;case 90:j=ne._rescaleAndSwap,D=n,A=e,S=i,T=a,x=n+v*i,M=e+g*a,k=n+(v+w)*i,O=e+(g+y)*a;break;case 180:j=ne._rescale,D=n+i,A=e,S=-i,T=a,x=n+(1-g-y)*i,M=e+v*a,k=n+(1-g)*i,O=e+(v+w)*a;break;case 270:j=ne._rescaleAndSwap,D=n+i,A=e+a,S=-i,T=-a,x=n+(1-v-w)*i,M=e+(1-g-y)*a,k=n+(1-v)*i,O=e+(1-g)*a}for(const{line:B,points:z}of this.#r)d.push(j(B,D,A,S,T,c?new Array(B.length):null)),f.push(j(z,D,A,S,T,c?new Array(z.length):null));return{lines:d,points:f,rect:[x,M,k,O]}}static deserialize(n,e,i,a,c,{paths:{lines:d,points:f},rotation:g,thickness:v}){const y=[];let w,D,A,S,T;switch(g){case 0:T=ne._rescale,w=-n/i,D=e/a+1,A=1/i,S=-1/a;break;case 90:T=ne._rescaleAndSwap,w=-e/a,D=-n/i,A=1/a,S=1/i;break;case 180:T=ne._rescale,w=n/i+1,D=-e/a,A=-1/i,S=1/a;break;case 270:T=ne._rescaleAndSwap,w=e/a+1,D=n/i+1,A=-1/a,S=-1/i}if(!d){d=[];for(const M of f){const k=M.length;if(2===k){d.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1]]));continue}if(4===k){d.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1],NaN,NaN,NaN,NaN,M[2],M[3]]));continue}const O=new Float32Array(3*(k-2));d.push(O);let[j,B,z,W]=M.subarray(0,4);O.set([NaN,NaN,NaN,NaN,j,B],0);for(let oe=4;oe<k;oe+=2){const ge=M[oe],Ke=M[oe+1];O.set(ne.createBezierPoints(j,B,z,W,ge,Ke),3*(oe-2)),[j,B,z,W]=[z,W,ge,Ke]}}}for(let M=0,k=d.length;M<k;M++)y.push({line:T(d[M].map(O=>O??NaN),w,D,A,S),points:T(f[M].map(O=>O??NaN),w,D,A,S)});const x=new al;return x.build(y,i,a,1,g,v,c),x}#l(n=this.#u){const e=this.#n+n/2*this.#c;return this.#a%180==0?[e/this.#s,e/this.#i]:[e/this.#i,e/this.#s]}#d(){const[n,e,i,a]=this.#e,[c,d]=this.#l(0);return[n+c,e+d,i-2*c,a-2*d]}#o(){const n=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#r){if(a.length<=12){for(let f=4,g=a.length;f<g;f+=6){const[v,y]=a.subarray(f,f+2);n[0]=Math.min(n[0],v),n[1]=Math.min(n[1],y),n[2]=Math.max(n[2],v),n[3]=Math.max(n[3],y)}continue}let c=a[4],d=a[5];for(let f=6,g=a.length;f<g;f+=6){const[v,y,w,D,A,S]=a.subarray(f,f+6);se.bezierBoundingBox(c,d,v,y,w,D,A,S,n),c=A,d=S}}const[e,i]=this.#l();n[0]=Math.min(1,Math.max(0,n[0]-e)),n[1]=Math.min(1,Math.max(0,n[1]-i)),n[2]=Math.min(1,Math.max(0,n[2]+e)),n[3]=Math.min(1,Math.max(0,n[3]+i)),n[2]-=n[0],n[3]-=n[1]}get box(){return this.#e}updateProperty(n,e){return"stroke-width"===n?this.#h(e):null}#h(n){const[e,i]=this.#l();this.#u=n;const[a,c]=this.#l(),[d,f]=[a-e,c-i],g=this.#e;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateParentDimensions([n,e],i){const[a,c]=this.#l();this.#s=n,this.#i=e,this.#c=i;const[d,f]=this.#l(),g=d-a,v=f-c,y=this.#e;return y[0]-=g,y[1]-=v,y[2]+=2*g,y[3]+=2*v,y}updateRotation(n){return this.#t=n,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(ne.svgRound).join(" ")}get defaultProperties(){const[n,e]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(e)}`}}}get rotationTransform(){const[,,n,e]=this.#e;let i=0,a=0,c=0,d=0,f=0,g=0;switch(this.#t){case 90:a=e/n,c=-n/e,f=n;break;case 180:i=-1,d=-1,f=n,g=e;break;case 270:a=-e/n,c=n/e,g=e;break;default:return""}return`matrix(${i} ${a} ${c} ${d} ${ne.svgRound(f)} ${ne.svgRound(g)})`}getPathResizingSVGProperties([n,e,i,a]){const[c,d]=this.#l(),[f,g,v,y]=this.#e;if(Math.abs(v-c)<=ne.PRECISION||Math.abs(y-d)<=ne.PRECISION){const T=n+i/2-(f+v/2),x=e+a/2-(g+y/2);return{path:{"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(e)}`,transform:`${this.rotationTransform} translate(${T} ${x})`}}}const w=(i-2*c)/(v-2*c),D=(a-2*d)/(y-2*d),A=v/i,S=y/a;return{path:{"transform-origin":`${ne.svgRound(f)} ${ne.svgRound(g)}`,transform:`${this.rotationTransform} scale(${A} ${S}) translate(${ne.svgRound(c)} ${ne.svgRound(d)}) scale(${w} ${D}) translate(${ne.svgRound(-c)} ${ne.svgRound(-d)})`}}}getPathResizedSVGProperties([n,e,i,a]){const[c,d]=this.#l(),f=this.#e,[g,v,y,w]=f;if(f[0]=n,f[1]=e,f[2]=i,f[3]=a,Math.abs(y-c)<=ne.PRECISION||Math.abs(w-d)<=ne.PRECISION){const x=n+i/2-(g+y/2),M=e+a/2-(v+w/2);for(const{line:k,points:O}of this.#r)ne._translate(k,x,M,k),ne._translate(O,x,M,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const D=(i-2*c)/(y-2*c),A=(a-2*d)/(w-2*d),S=-D*(g+c)+n+c,T=-A*(v+d)+e+d;if(1!==D||1!==A||0!==S||0!==T)for(const{line:x,points:M}of this.#r)ne._rescale(x,S,T,D,A,x),ne._rescale(M,S,T,D,A,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([n,e],i){const[a,c]=i,d=this.#e,f=n-d[0],g=e-d[1];if(this.#s===a&&this.#i===c)for(const{line:v,points:y}of this.#r)ne._translate(v,f,g,v),ne._translate(y,f,g,y);else{const v=this.#s/a,y=this.#i/c;this.#s=a,this.#i=c;for(const{line:w,points:D}of this.#r)ne._rescale(w,f,g,v,y,w),ne._rescale(D,f,g,v,y,D);d[2]*=v,d[3]*=y}return d[0]=n,d[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ne.svgRound(n)} ${ne.svgRound(e)}`}}}get defaultSVGProperties(){const n=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ne.svgRound(n[0])} ${ne.svgRound(n[1])}`,transform:this.rotationTransform||null},bbox:n}}}class Wc extends dv{#e;constructor(n){super(),this.#e=n,super.updateProperties({fill:"none",stroke:Oe._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(n,e){"stroke-width"===n&&(e??=this["stroke-width"],e*=this.#e.realScale),super.updateSVGProperty(n,e)}clone(){const n=new Wc(this.#e);return n.updateAll(this),n}}class ff extends $C{static _type="ink";static _editorType=Re.INK;static _defaultDrawingOptions=null;constructor(n){super({...n,name:"inkEditor"}),this._willKeepAspectRatio=!0}static initialize(n,e){Oe.initialize(n,e),this._defaultDrawingOptions=new Wc(e.viewParameters)}static getDefaultDrawingOptions(n){const e=this._defaultDrawingOptions.clone();return e.updateProperties(n),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return je(this,"typesMap",new Map([[Ue.INK_THICKNESS,"stroke-width"],[Ue.INK_COLOR,"stroke"],[Ue.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(n,e,i,a,c){return new A_(n,e,i,a,c,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(n,e,i,a,c,d){return al.deserialize(n,e,i,a,c,d)}static deserialize(n,e,i){var a=()=>super.deserialize,c=this;return te(function*(){let d=null;if(n instanceof cv){const{data:{inkLists:g,rect:v,rotation:y,id:w,color:D,opacity:A,borderStyle:{rawWidth:S},popupRef:T},parent:{page:{pageNumber:x}}}=n;d=n={annotationType:Re.INK,color:Array.from(D),thickness:S,opacity:A,paths:{points:g},boxes:null,pageIndex:x-1,rect:v.slice(0),rotation:y,id:w,deleted:!1,popupRef:T}}const f=yield a().call(c,n,e,i);return f.annotationElementId=n.id||null,f._initialData=d,f})()}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:n,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(n,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const n=this._currentParent;n&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:n,thickness:e,opacity:i}){this._drawingOptions=ff.getDefaultDrawingOptions({stroke:se.makeHexColor(...n),"stroke-width":e,"stroke-opacity":i})}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i,rect:a}=this.serializeDraw(n),{_drawingOptions:{stroke:c,"stroke-opacity":d,"stroke-width":f}}=this,g={annotationType:Re.INK,color:Oe._colorManager.convert(c),opacity:d,thickness:f,paths:{lines:e,points:i},pageIndex:this.pageIndex,rect:a,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return n?g:this.annotationElementId&&!this.#e(g)?null:(g.id=this.annotationElementId,g)}#e(n){const{color:e,thickness:i,opacity:a,pageIndex:c}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||n.color.some((d,f)=>d!==e[f])||n.thickness!==i||n.opacity!==a||n.pageIndex!==c}renderAnnotationElement(n){const{points:e,rect:i}=this.serializeDraw(!1);return n.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e}),null}}class pf extends Oe{#e=null;#t=null;#n=null;#r=null;#s=null;#i="";#c=null;#a=null;#u=null;#l=!1;#d=!1;static _type="stamp";static _editorType=Re.STAMP;constructor(n){super({...n,name:"stampEditor"}),this.#r=n.bitmapUrl,this.#s=n.bitmapFile}static initialize(n,e){Oe.initialize(n,e)}static get supportedTypes(){return je(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return je(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(n){return this.supportedTypes.includes(n)}static paste(n,e){e.pasteEditor(Re.STAMP,{bitmapFile:n.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(n){const e=n.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#o(n,e=!1){n?(this.#e=n.bitmap,e||(this.#t=n.id,this.#l=n.isSvg),n.file&&(this.#i=n.file.name),this.#p()):this.remove()}#h(){if(this.#n=null,this._uiManager.enableWaiting(!1),this.#c){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e)return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(n=null,e=!0){var i=this;return te(function*(){if(i.hasAltTextData())return null;const{mlManager:a}=i._uiManager;if(!a)throw new Error("No ML.");if(!(yield a.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");const{data:c,width:d,height:f}=n||i.copyCanvas(null,null,!0).imageData,g=yield a.guess({name:"altText",request:{data:c,width:d,height:f,channels:c.length/(d*f)}});if(!g)throw new Error("No response from the AI service.");if(g.error)throw new Error("Error from the AI service.");if(g.cancel)return null;if(!g.output)throw new Error("No valid response from the AI service.");const v=g.output;return yield i.setGuessedAltText(v),e&&!i.hasAltTextData()&&(i.altTextData={alt:v,decorative:!1}),v})()}#f(){var n=this;if(this.#t)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#t).then(a=>this.#o(a,!0)).finally(()=>this.#h());if(this.#r){const a=this.#r;return this.#r=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromUrl(a).then(c=>this.#o(c)).finally(()=>this.#h()))}if(this.#s){const a=this.#s;return this.#s=null,this._uiManager.enableWaiting(!0),void(this.#n=this._uiManager.imageManager.getFromFile(a).then(c=>this.#o(c)).finally(()=>this.#h()))}const e=document.createElement("input");e.type="file",e.accept=pf.supportedTypesStr;const i=this._uiManager._signal;this.#n=new Promise(a=>{e.addEventListener("change",te(function*(){if(e.files&&0!==e.files.length){n._uiManager.enableWaiting(!0);const c=yield n._uiManager.imageManager.getFromFile(e.files[0]);n._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:n._uiManager.useNewAltTextFlow}}),n.#o(c)}else n.remove();a()}),{signal:i}),e.addEventListener("cancel",()=>{this.remove(),a()},{signal:i})}).finally(()=>this.#h()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#c?.remove(),this.#c=null,this.#a?.disconnect(),this.#a=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#t&&null===this.#c&&this.#f(),this.isAttachedToDOM||this.parent.add(this))):this.#t&&this.#f()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#s||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let n,e;if(this.width&&(n=this.x,e=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#p():this.#f(),this.width&&!this.annotationElementId){const[i,a]=this.parentDimensions;this.setAt(n*i,e*a,this.width*i,this.height*a)}return this.div}#p(){const{div:n}=this;let{width:e,height:i}=this.#e;const[a,c]=this.pageDimensions,d=.75;if(this.width)e=this.width*a,i=this.height*c;else if(e>d*a||i>d*c){const y=Math.min(d*a/e,d*c/i);e*=y,i*=y}const[f,g]=this.parentDimensions;this.setDims(e*f/a,i*g/c),this._uiManager.enableWaiting(!1);const v=this.#c=document.createElement("canvas");v.setAttribute("role","img"),this.addContainer(v),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(n.hidden=!1),this.#v(e,i),this.#w(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&v.setAttribute("aria-label",this.#i)}copyCanvas(n,e,i=!1){n||(n=224);const{width:a,height:c}=this.#e,d=new kc;let f=this.#e,g=a,v=c,y=null;if(e){if(a>e||c>e){const z=Math.min(e/a,e/c);g=Math.floor(a*z),v=Math.floor(c*z)}y=document.createElement("canvas");const D=y.width=Math.ceil(g*d.sx),A=y.height=Math.ceil(v*d.sy);this.#l||(f=this.#g(D,A));const S=y.getContext("2d");S.filter=this._uiManager.hcmFilter;let T="white",x="#cfcfd8";"none"!==this._uiManager.hcmFilter?x="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(T="#8f8f9d",x="#42414d");const M=15,k=M*d.sx,O=M*d.sy,j=new OffscreenCanvas(2*k,2*O),B=j.getContext("2d");B.fillStyle=T,B.fillRect(0,0,2*k,2*O),B.fillStyle=x,B.fillRect(0,0,k,O),B.fillRect(k,O,k,O),S.fillStyle=S.createPattern(j,"repeat"),S.fillRect(0,0,D,A),S.drawImage(f,0,0,f.width,f.height,0,0,D,A)}let w=null;if(i){let D,A;if(d.symmetric&&f.width<n&&f.height<n)D=f.width,A=f.height;else if(f=this.#e,a>n||c>n){const x=Math.min(n/a,n/c);D=Math.floor(a*x),A=Math.floor(c*x),this.#l||(f=this.#g(D,A))}const T=new OffscreenCanvas(D,A).getContext("2d",{willReadFrequently:!0});T.drawImage(f,0,0,f.width,f.height,0,0,D,A),w={width:D,height:A,data:T.getImageData(0,0,D,A).data}}return{canvas:y,width:g,height:v,imageData:w}}#m(n,e){const[i,a]=this.parentDimensions;this.width=n/i,this.height=e/a,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#u&&clearTimeout(this.#u),this.#u=setTimeout(()=>{this.#u=null,this.#v(n,e)},200)}#g(n,e){const{width:i,height:a}=this.#e;let c=i,d=a,f=this.#e;for(;c>2*n||d>2*e;){const g=c,v=d;c>2*n&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),d>2*e&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const y=new OffscreenCanvas(c,d);y.getContext("2d").drawImage(f,0,0,g,v,0,0,c,d),f=y.transferToImageBitmap()}return f}#v(n,e){const i=new kc,a=Math.ceil(n*i.sx),c=Math.ceil(e*i.sy),d=this.#c;if(!d||d.width===a&&d.height===c)return;d.width=a,d.height=c;const f=this.#l?this.#e:this.#g(a,c),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,a,c)}getImageForAltText(){return this.#c}#y(n){if(n){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#t);if(a)return a}const e=document.createElement("canvas");return({width:e.width,height:e.height}=this.#e),e.getContext("2d").drawImage(this.#e,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,a=Math.round(this.width*e*Ni.PDF_TO_CSS_UNITS),c=Math.round(this.height*i*Ni.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(a,c);return d.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,a,c),d.transferToImageBitmap()}return structuredClone(this.#e)}#w(){this._uiManager._signal&&(this.#a=new ResizeObserver(n=>{const e=n[0].contentRect;e.width&&e.height&&this.#m(e.width,e.height)}),this.#a.observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{this.#a?.disconnect(),this.#a=null},{once:!0}))}static deserialize(n,e,i){var a=()=>super.deserialize,c=this;return te(function*(){let d=null;if(n instanceof Po){const{data:{rect:x,rotation:M,id:k,structParent:O,popupRef:j},container:B,parent:{page:{pageNumber:z}}}=n,W=B.querySelector("canvas"),oe=i.imageManager.getFromCanvas(B.id,W);W.remove();const ge=(yield e._structTree.getAriaAttributes(`${Sm}${k}`))?.get("aria-label")||"";d=n={annotationType:Re.STAMP,bitmapId:oe.id,bitmap:oe.bitmap,pageIndex:z-1,rect:x.slice(0),rotation:M,id:k,deleted:!1,accessibilityData:{decorative:!1,altText:ge},isSvg:!1,structParent:O,popupRef:j}}const f=yield a().call(c,n,e,i),{rect:g,bitmap:v,bitmapUrl:y,bitmapId:w,isSvg:D,accessibilityData:A}=n;w&&i.imageManager.isValidId(w)?(f.#t=w,v&&(f.#e=v)):f.#r=y,f.#l=D;const[S,T]=f.pageDimensions;return f.width=(g[2]-g[0])/S,f.height=(g[3]-g[1])/T,f.annotationElementId=n.id||null,A&&(f.altTextData=A),f._initialData=d,f.#d=!!d,f})()}serialize(n=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:Re.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#l,structTreeParentId:this._structTreeParentId};if(n)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:a,altText:c}=this.serializeAltText(!1);if(!a&&c&&(i.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const f=this.#_(i);if(f.isSame)return null;f.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,null===e)return i;e.stamps||=new Map;const d=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(e.stamps.has(this.#t)){if(this.#l){const f=e.stamps.get(this.#t);d>f.area&&(f.area=d,f.serialized.bitmap.close(),f.serialized.bitmap=this.#y(!1))}}else e.stamps.set(this.#t,{area:d,serialized:i}),i.bitmap=this.#y(!1);return i}#_(n){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,a=n.pageIndex===e,c=(n.accessibilityData?.alt||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&a&&c,isSameAltText:c}}renderAnnotationElement(n){return n.updateEdited({rect:this.getRect(0,0)}),null}}let qc=(()=>{class o{#e;#t=!1;#n=null;#r=null;#s=null;#i=new Map;#c=!1;#a=!1;#u=null;#l=null;#d=null;#o;static _initialized=!1;static#h=new Map([$t,ff,pf,Pt].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:i,div:a,structTreeLayer:c,accessibilityManager:d,annotationLayer:f,drawLayer:g,textLayer:v,viewport:y,l10n:w}){const D=[...o.#h.values()];if(!o._initialized){o._initialized=!0;for(const A of D)A.initialize(w,e)}e.registerEditorTypes(D),this.#o=e,this.pageIndex=i,this.div=a,this.#e=d,this.#n=f,this.viewport=y,this.#l=v,this.drawLayer=g,this._structTree=c,this.#o.addLayer(this)}get isEmpty(){return 0===this.#i.size}get isInvisible(){return this.isEmpty&&this.#o.getMode()===Re.NONE}updateToolbar(e){this.#o.updateToolbar(e)}updateMode(e=this.#o.getMode()){switch(this.#v(),e){case Re.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case Re.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Re.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;for(const a of o.#h.values())i.toggle(`${a._type}Editing`,e===a._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#l?.div}setEditingState(e){this.#o.setEditingState(e)}addCommands(e){this.#o.addCommands(e)}cleanUndoStack(e){this.#o.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}enable(){var e=this;return te(function*(){e.div.tabIndex=0,e.togglePointerEvents(!0);const i=new Set;for(const c of e.#i.values())c.enableEditing(),c.show(!0),c.annotationElementId&&(e.#o.removeChangedExistingAnnotation(c),i.add(c.annotationElementId));if(!e.#n)return;const a=e.#n.getEditableAnnotations();for(const c of a){if(c.hide(),e.#o.isDeletedAnnotationElement(c.data.id)||i.has(c.data.id))continue;const d=yield e.deserialize(c);d&&(e.addOrRebuild(d),d.enableEditing())}})()}disable(){this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,i=new Map;for(const c of this.#i.values())if(c.disableEditing(),c.annotationElementId){if(null!==c.serialize()){e.set(c.annotationElementId,c);continue}i.set(c.annotationElementId,c),this.getEditableAnnotation(c.annotationElementId)?.show(),c.remove()}if(this.#n){const c=this.#n.getEditableAnnotations();for(const d of c){const{id:f}=d.data;if(this.#o.isDeletedAnnotationElement(f))continue;let g=i.get(f);g?(g.resetAnnotationElement(d),g.show(!1),d.show()):(g=e.get(f),g&&(this.#o.addChangedExistingAnnotation(g),g.renderAnnotationElement(d)&&g.show(!1)),d.show())}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:a}=this.div;for(const c of o.#h.values())a.remove(`${c._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#a=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#o.getActive()!==e&&this.#o.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#l?.div&&!this.#d){this.#d=new AbortController;const e=this.#o.combinedSignal(this.#d);this.#l.div.addEventListener("pointerdown",this.#f.bind(this),{signal:e}),this.#l.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#l?.div&&this.#d&&(this.#d.abort(),this.#d=null,this.#l.div.classList.remove("highlighting"))}#f(e){this.#o.unselectAll();const{target:i}=e;if(i===this.#l.div||("img"===i.getAttribute("role")||i.classList.contains("endOfContent"))&&this.#l.div.contains(i)){const{isMac:a}=Vt.platform;if(0!==e.button||e.ctrlKey&&a)return;this.#o.showAllEditors("highlight",!0,!0),this.#l.div.classList.add("free"),this.toggleDrawing(),Pt.startHighlighting(this,"ltr"===this.#o.direction,{target:this.#l.div,x:e.x,y:e.y}),this.#l.div.addEventListener("pointerup",()=>{this.#l.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),e.preventDefault()}}enableClick(){if(this.#r)return;this.#r=new AbortController;const e=this.#o.combinedSignal(this.#r);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){this.#r?.abort(),this.#r=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:i}=e;i&&this.#o.isDeletedAnnotationElement(i)&&this.#o.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#a&&e.annotationElementId&&this.#o.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#o.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#o.addDeletedAnnotationElement(e.annotationElementId),Oe.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),this.#o.addEditor(e),this.attach(e),!e.isAttachedToDOM){const i=e.render();this.div.append(i),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),this.#o.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:i}=document;e.div.contains(i)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),i.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return this.#o.getId()}get#p(){return o.#h.get(this.#o.getMode())}combinedSignal(e){return this.#o.combinedSignal(e)}#m(e){const i=this.#p;return i?new i.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#p?.canCreateNewEmptyEditor()}pasteEditor(e,i){this.#o.updateToolbar(e),this.#o.updateMode(e);const{offsetX:a,offsetY:c}=this.#g(),d=this.getNextId(),f=this.#m({parent:this,id:d,x:a,y:c,uiManager:this.#o,isCentered:!0,...i});f&&this.add(f)}deserialize(e){var i=this;return te(function*(){return(yield o.#h.get(e.annotationType??e.annotationEditorType)?.deserialize(e,i,i.#o))||null})()}createAndAddNewEditor(e,i,a={}){const c=this.getNextId(),d=this.#m({parent:this,id:c,x:e.offsetX,y:e.offsetY,uiManager:this.#o,isCentered:i,...a});return d&&this.add(d),d}#g(){const{x:e,y:i,width:a,height:c}=this.div.getBoundingClientRect(),d=Math.max(0,e),f=Math.max(0,i),y=(d+Math.min(window.innerWidth,e+a))/2-e,w=(f+Math.min(window.innerHeight,i+c))/2-i,[D,A]=this.viewport.rotation%180==0?[y,w]:[w,y];return{offsetX:D,offsetY:A}}addNewEditor(){this.createAndAddNewEditor(this.#g(),!0)}setSelected(e){this.#o.setSelected(e)}toggleSelected(e){this.#o.toggleSelected(e)}unselect(e){this.#o.unselect(e)}pointerup(e){const{isMac:i}=Vt.platform;if(!(0!==e.button||e.ctrlKey&&i)&&e.target===this.div&&this.#c&&(this.#c=!1,!this.#p?.isDrawer||!this.#p.supportMultipleDrawings)){if(!this.#t)return void(this.#t=!0);if(this.#o.getMode()===Re.STAMP)return void this.#o.unselectAll();this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(this.#o.getMode()===Re.HIGHLIGHT&&this.enableTextSelection(),this.#c)return void(this.#c=!1);const{isMac:i}=Vt.platform;if(0!==e.button||e.ctrlKey&&i||e.target!==this.div)return;if(this.#c=!0,this.#p?.isDrawer)return void this.startDrawingSession(e);const a=this.#o.getActive();this.#t=!a||a.isEmpty()}startDrawingSession(e){if(this.div.focus(),this.#u)return void this.#p.startDrawing(this,this.#o,!1,e);this.#o.setCurrentDrawingSession(this),this.#u=new AbortController;const i=this.#o.combinedSignal(this.#u);this.div.addEventListener("blur",({relatedTarget:a})=>{a&&!this.div.contains(a)&&this.commitOrRemove()},{signal:i}),this.#p.startDrawing(this,this.#o,!1,e)}endDrawingSession(e=!1){return this.#u?(this.#o.setCurrentDrawingSession(null),this.#u.abort(),this.#u=null,this.#p.endDrawing(e)):null}findNewParent(e,i,a){const c=this.#o.findParent(i,a);return null!==c&&c!==this&&(c.changeParent(e),!0)}commitOrRemove(){return!!this.#u&&(this.endDrawingSession(),!0)}onScaleChanging(){this.#u&&this.#p.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#o.removeLayer(this)}#v(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Fr(this.div,e);for(const i of this.#o.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:e}){this.#o.commitOrRemove(),this.#v();const i=this.viewport.rotation,a=e.rotation;if(this.viewport=e,Fr(this.div,{rotation:a}),i!==a)for(const c of this.#i.values())c.rotate(a)}get pageDimensions(){const{pageWidth:e,pageHeight:i}=this.viewport.rawDims;return[e,i]}get scale(){return this.#o.viewParameters.realScale}}return o})();class yn{#e=null;#t=0;#n=new Map;#r=new Map;constructor({pageIndex:n}){this.pageIndex=n}setParent(n){if(this.#e){if(this.#e!==n){if(this.#n.size>0)for(const e of this.#n.values())e.remove(),n.append(e);this.#e=n}}else this.#e=n}static get _svgFactory(){return je(this,"_svgFactory",new rv)}static#s(n,[e,i,a,c]){const{style:d}=n;d.top=100*i+"%",d.left=100*e+"%",d.width=100*a+"%",d.height=100*c+"%"}#i(){const n=yn._svgFactory.create(1,1,!0);return this.#e.append(n),n.setAttribute("aria-hidden",!0),n}#c(n,e){const i=yn._svgFactory.createElement("clipPath");n.append(i);const a=`clip_${e}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const c=yn._svgFactory.createElement("use");return i.append(c),c.setAttribute("href",`#${e}`),c.classList.add("clip"),a}#a(n,e){for(const[i,a]of Object.entries(e))null===a?n.removeAttribute(i):n.setAttribute(i,a)}draw(n,e=!1,i=!1){const a=this.#t++,c=this.#i(),d=yn._svgFactory.createElement("defs");c.append(d);const f=yn._svgFactory.createElement("path");d.append(f);const g=`path_p${this.pageIndex}_${a}`;f.setAttribute("id",g),f.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#r.set(a,f);const v=i?this.#c(d,g):null,y=yn._svgFactory.createElement("use");return c.append(y),y.setAttribute("href",`#${g}`),this.updateProperties(c,n),this.#n.set(a,c),{id:a,clipPathId:`url(#${v})`}}drawOutline(n,e){const i=this.#t++,a=this.#i(),c=yn._svgFactory.createElement("defs");a.append(c);const d=yn._svgFactory.createElement("path");c.append(d);const f=`path_p${this.pageIndex}_${i}`;let g;if(d.setAttribute("id",f),d.setAttribute("vector-effect","non-scaling-stroke"),e){const w=yn._svgFactory.createElement("mask");c.append(w),g=`mask_p${this.pageIndex}_${i}`,w.setAttribute("id",g),w.setAttribute("maskUnits","objectBoundingBox");const D=yn._svgFactory.createElement("rect");w.append(D),D.setAttribute("width","1"),D.setAttribute("height","1"),D.setAttribute("fill","white");const A=yn._svgFactory.createElement("use");w.append(A),A.setAttribute("href",`#${f}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const v=yn._svgFactory.createElement("use");a.append(v),v.setAttribute("href",`#${f}`),g&&v.setAttribute("mask",`url(#${g})`);const y=v.cloneNode();return a.append(y),v.classList.add("mainOutline"),y.classList.add("secondaryOutline"),this.updateProperties(a,n),this.#n.set(i,a),i}finalizeDraw(n,e){this.#r.delete(n),this.updateProperties(n,e)}updateProperties(n,e){if(!e)return;const{root:i,bbox:a,rootClass:c,path:d}=e,f="number"==typeof n?this.#n.get(n):n;if(f){if(i&&this.#a(f,i),a&&yn.#s(f,a),c){const{classList:g}=f;for(const[v,y]of Object.entries(c))g.toggle(v,y)}d&&this.#a(f.firstChild.firstChild,d)}}updateParent(n,e){if(e===this)return;const i=this.#n.get(n);i&&(e.#e.append(i),this.#n.delete(n),e.#n.set(n,i))}remove(n){this.#r.delete(n),null!==this.#e&&(this.#n.get(n).remove(),this.#n.delete(n))}destroy(){this.#e=null;for(const n of this.#n.values())n.remove();this.#n.clear(),this.#r.clear()}}globalThis.pdfjsTestingUtils={HighlightOutliner:hf};var Kc=Ee.getDocument;function k_(o,n){if(1&o&&(_.j41(0,"p"),_.EFF(1),_.k0s()),2&o){const e=_.XpG();_.R7$(),_.JRh(e.uploadedFile.name)}}function St(o,n){if(1&o&&(_.j41(0,"div",7)(1,"div",8)(2,"h3"),_.EFF(3,"Risultato Conversione:"),_.k0s(),_.j41(4,"pre"),_.EFF(5),_.k0s()()()),2&o){const e=_.XpG();_.R7$(5),_.JRh(e.qcmContent)}}Ee.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.9.359/pdf.worker.min.js",function Ut(o,n){return(0,_.TL3)({rootComponent:o,...vd(n)})}(ym,{providers:[function gh(o,...n){return(0,_.EmA)([{provide:ls,multi:!0,useValue:o},[],{provide:so,useFactory:go,deps:[vr]},{provide:_.iLQ,multi:!0,useFactory:lm},n.map(e=>e.\u0275providers)])}([{path:"",component:wm},{path:"pdf-to-qcm",component:(()=>{class o{uploadedFile=null;qcmContent="";onFileSelected(e){const i=e.target;i.files?.length&&(this.uploadedFile=i.files[0],this.processPDF())}processPDF(){var e=this;return te(function*(){if(!e.uploadedFile)return;const i=new FileReader;i.onload=function(){var a=te(function*(c){const d=new Uint8Array(c.target?.result);try{const f=yield Kc(d).promise,g=f.numPages;let v="";for(let w=1;w<=g;w++)(yield(yield f.getPage(w)).getTextContent()).items.map(T=>T.str).join(" ");const y=e.extractQCM(v);e.downloadQCMFile(y)}catch(f){console.error("Errore nell\u2019elaborazione del PDF:",f)}});return function(c){return a.apply(this,arguments)}}(),i.readAsArrayBuffer(e.uploadedFile)})()}extractQCM(e){return"\n      1. La fase di problem finding corrisponde a: \n      A. Definire il problema \n      B. Rendersi conto del disagio \n      C. Passare all'azione \n      D. Adottare una soluzione \n\n      Answer: B \n      Section: Problem solving\n\n      2. La fase di decision making: \n      A. Corrisponde alla fase di problem solving \n      B. Precede la fase di problem finding \n      C. Segue la fase di problem solving \n      D. Segue la fase di decision taking \n\n      Answer: C \n      Section: Problem solving"}downloadQCMFile(e){const i=new Blob([e],{type:"text/plain"}),a=document.createElement("a");a.href=URL.createObjectURL(i),a.download=this.uploadedFile?.name?this.uploadedFile.name.replace(".pdf",".qcm"):"default.qcm",a.click(),URL.revokeObjectURL(a.href)}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=_.VBU({type:o,selectors:[["app-pdf-to-qcm"]],standalone:!0,features:[_.aNF],decls:13,vars:2,consts:[[1,"container"],[1,"hero-section"],[1,"upload-section"],["type","file","id","fileInput","accept",".pdf",1,"hidden-input",3,"change"],["for","fileInput",1,"custom-button"],[4,"ngIf"],["class","output-section",4,"ngIf"],[1,"output-section"],[1,"output-card"]],template:function(i,a){1&i&&(_.nrm(0,"app-header"),_.j41(1,"div",0)(2,"div",1)(3,"h1"),_.EFF(4,"PDF to QCM Converter"),_.k0s(),_.j41(5,"p"),_.EFF(6,"Carica un file PDF per convertirlo in un formato QCM innovativo."),_.k0s()(),_.j41(7,"div",2)(8,"input",3),_.bIt("change",function(d){return a.onFileSelected(d)}),_.k0s(),_.j41(9,"label",4),_.EFF(10,"Choose File"),_.k0s(),_.DNE(11,k_,2,1,"p",5),_.k0s(),_.DNE(12,St,6,1,"div",6),_.k0s()),2&i&&(_.R7$(11),_.Y8G("ngIf",a.uploadedFile),_.R7$(),_.Y8G("ngIf",a.qcmContent))},dependencies:[re,zo,Mc],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:2rem;background:var(--container-bg, #1f1f1f);border-radius:12px;box-shadow:0 4px 6px #00000080}.hero-section[_ngcontent-%COMP%]{text-align:center;color:#f0f0f0;margin-bottom:2rem}.hero-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.5rem}.hero-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.8}.upload-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.upload-section[_ngcontent-%COMP%]   .file-upload-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.upload-section[_ngcontent-%COMP%]   .hidden-input[_ngcontent-%COMP%]{display:none}.upload-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;font-size:.9rem;color:#ddd}.output-section[_ngcontent-%COMP%]{background:var(--output-bg, #333);color:#ddd;padding:1rem;border-radius:8px;box-shadow:0 3px 5px #00000080;text-align:center}.output-section[_ngcontent-%COMP%]   .output-card[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;background:var(--output-card-bg, #555)}"]})}return o})()},{path:"**",loadComponent:()=>L.e(633).then(L.bind(L,633)).then(o=>o.NotFoundComponent)}]),function sg(...o){const n=[],e=new Set,i=e.has(Zi.HttpTransferCacheOptions);for(const{\u0275providers:a,\u0275kind:c}of o)e.add(c),a.length&&n.push(a);return(0,_.EmA)([[],(0,_.M8M)(),e.has(Zi.NoHttpTransferCache)||i?[]:Hp({}),n])}(),function Lp(...o){const n=[Mp,cd,Vl,{provide:sa,useExisting:Vl},{provide:oa,useFactory:()=>(0,_.WQX)(zr,{optional:!0})??(0,_.WQX)(cd)},{provide:Ls,useValue:kp,multi:!0},{provide:ud,useValue:!0},{provide:da,useClass:qy}];for(const e of o)n.push(...e.\u0275providers);return(0,_.EmA)(n)}()]}).catch(o=>console.error(o))},412:(et,de,L)=>{L.d(de,{t:()=>K});var _=L(413);class K extends _.B{constructor(Z){super(),this._value=Z}get value(){return this.getValue()}_subscribe(Z){const Y=super._subscribe(Z);return!Y.closed&&Z.next(this._value),Y}getValue(){const{hasError:Z,thrownError:Y,_value:X}=this;if(Z)throw Y;return this._throwIfClosed(),X}next(Z){super.next(this._value=Z)}}},985:(et,de,L)=>{L.d(de,{c:()=>ke});var _=L(707),K=L(359),le=L(494),Z=L(203),Y=L(26),X=L(71),me=L(786);let ke=(()=>{class ae{constructor(De){De&&(this._subscribe=De)}lift(De){const ot=new ae;return ot.source=this,ot.operator=De,ot}subscribe(De,ot,cr){const Lt=function H(ae){return ae&&ae instanceof _.vU||function J(ae){return ae&&(0,X.T)(ae.next)&&(0,X.T)(ae.error)&&(0,X.T)(ae.complete)}(ae)&&(0,K.Uv)(ae)}(De)?De:new _.Ms(De,ot,cr);return(0,me.Y)(()=>{const{operator:Wt,source:Hn}=this;Lt.add(Wt?Wt.call(Lt,Hn):Hn?this._subscribe(Lt):this._trySubscribe(Lt))}),Lt}_trySubscribe(De){try{return this._subscribe(De)}catch(ot){De.error(ot)}}forEach(De,ot){return new(ot=Me(ot))((cr,Lt)=>{const Wt=new _.Ms({next:Hn=>{try{De(Hn)}catch(Ui){Lt(Ui),Wt.unsubscribe()}},error:Lt,complete:cr});this.subscribe(Wt)})}_subscribe(De){var ot;return null===(ot=this.source)||void 0===ot?void 0:ot.subscribe(De)}[le.s](){return this}pipe(...De){return(0,Z.m)(De)(this)}toPromise(De){return new(De=Me(De))((ot,cr)=>{let Lt;this.subscribe(Wt=>Lt=Wt,Wt=>cr(Wt),()=>ot(Lt))})}}return ae.create=rt=>new ae(rt),ae})();function Me(ae){var rt;return null!==(rt=ae??Y.$.Promise)&&void 0!==rt?rt:Promise}},413:(et,de,L)=>{L.d(de,{B:()=>me});var _=L(985),K=L(359);const Z=(0,L(853).L)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Y=L(908),X=L(786);let me=(()=>{class Me extends _.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const ae=new ke(this,this);return ae.operator=H,ae}_throwIfClosed(){if(this.closed)throw new Z}next(H){(0,X.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ae of this.currentObservers)ae.next(H)}})}error(H){(0,X.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:ae}=this;for(;ae.length;)ae.shift().error(H)}})}complete(){(0,X.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:ae,isStopped:rt,observers:De}=this;return ae||rt?K.Kn:(this.currentObservers=null,De.push(H),new K.yU(()=>{this.currentObservers=null,(0,Y.o)(De,H)}))}_checkFinalizedStatuses(H){const{hasError:ae,thrownError:rt,isStopped:De}=this;ae?H.error(rt):De&&H.complete()}asObservable(){const H=new _.c;return H.source=this,H}}return Me.create=(J,H)=>new ke(J,H),Me})();class ke extends me{constructor(J,H){super(),this.destination=J,this.source=H}next(J){var H,ae;null===(ae=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===ae||ae.call(H,J)}error(J){var H,ae;null===(ae=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===ae||ae.call(H,J)}complete(){var J,H;null===(H=null===(J=this.destination)||void 0===J?void 0:J.complete)||void 0===H||H.call(J)}_subscribe(J){var H,ae;return null!==(ae=null===(H=this.source)||void 0===H?void 0:H.subscribe(J))&&void 0!==ae?ae:K.Kn}}},707:(et,de,L)=>{L.d(de,{Ms:()=>cr,vU:()=>ae});var _=L(71),K=L(359),le=L(26),Z=L(334),Y=L(343);const X=Me("C",void 0,void 0);function Me(Ct,pe,ut){return{kind:Ct,value:pe,error:ut}}var J=L(270),H=L(786);class ae extends K.yU{constructor(pe){super(),this.isStopped=!1,pe?(this.destination=pe,(0,K.Uv)(pe)&&pe.add(this)):this.destination=Ui}static create(pe,ut,Zt){return new cr(pe,ut,Zt)}next(pe){this.isStopped?Hn(function ke(Ct){return Me("N",Ct,void 0)}(pe),this):this._next(pe)}error(pe){this.isStopped?Hn(function me(Ct){return Me("E",void 0,Ct)}(pe),this):(this.isStopped=!0,this._error(pe))}complete(){this.isStopped?Hn(X,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(pe){this.destination.next(pe)}_error(pe){try{this.destination.error(pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const rt=Function.prototype.bind;function De(Ct,pe){return rt.call(Ct,pe)}class ot{constructor(pe){this.partialObserver=pe}next(pe){const{partialObserver:ut}=this;if(ut.next)try{ut.next(pe)}catch(Zt){Lt(Zt)}}error(pe){const{partialObserver:ut}=this;if(ut.error)try{ut.error(pe)}catch(Zt){Lt(Zt)}else Lt(pe)}complete(){const{partialObserver:pe}=this;if(pe.complete)try{pe.complete()}catch(ut){Lt(ut)}}}class cr extends ae{constructor(pe,ut,Zt){let $n;if(super(),(0,_.T)(pe)||!pe)$n={next:pe??void 0,error:ut??void 0,complete:Zt??void 0};else{let wt;this&&le.$.useDeprecatedNextContext?(wt=Object.create(pe),wt.unsubscribe=()=>this.unsubscribe(),$n={next:pe.next&&De(pe.next,wt),error:pe.error&&De(pe.error,wt),complete:pe.complete&&De(pe.complete,wt)}):$n=pe}this.destination=new ot($n)}}function Lt(Ct){le.$.useDeprecatedSynchronousErrorHandling?(0,H.l)(Ct):(0,Z.m)(Ct)}function Hn(Ct,pe){const{onStoppedNotification:ut}=le.$;ut&&J.f.setTimeout(()=>ut(Ct,pe))}const Ui={closed:!0,next:Y.l,error:function Wt(Ct){throw Ct},complete:Y.l}},359:(et,de,L)=>{L.d(de,{Kn:()=>X,yU:()=>Y,Uv:()=>me});var _=L(71);const le=(0,L(853).L)(Me=>function(H){Me(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((ae,rt)=>`${rt+1}) ${ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var Z=L(908);class Y{constructor(J){this.initialTeardown=J,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let J;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const De of H)De.remove(this);else H.remove(this);const{initialTeardown:ae}=this;if((0,_.T)(ae))try{ae()}catch(De){J=De instanceof le?De.errors:[De]}const{_finalizers:rt}=this;if(rt){this._finalizers=null;for(const De of rt)try{ke(De)}catch(ot){J=J??[],ot instanceof le?J=[...J,...ot.errors]:J.push(ot)}}if(J)throw new le(J)}}add(J){var H;if(J&&J!==this)if(this.closed)ke(J);else{if(J instanceof Y){if(J.closed||J._hasParent(this))return;J._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(J)}}_hasParent(J){const{_parentage:H}=this;return H===J||Array.isArray(H)&&H.includes(J)}_addParent(J){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(J),H):H?[H,J]:J}_removeParent(J){const{_parentage:H}=this;H===J?this._parentage=null:Array.isArray(H)&&(0,Z.o)(H,J)}remove(J){const{_finalizers:H}=this;H&&(0,Z.o)(H,J),J instanceof Y&&J._removeParent(this)}}Y.EMPTY=(()=>{const Me=new Y;return Me.closed=!0,Me})();const X=Y.EMPTY;function me(Me){return Me instanceof Y||Me&&"closed"in Me&&(0,_.T)(Me.remove)&&(0,_.T)(Me.add)&&(0,_.T)(Me.unsubscribe)}function ke(Me){(0,_.T)(Me)?Me():Me.unsubscribe()}},26:(et,de,L)=>{L.d(de,{$:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},983:(et,de,L)=>{L.d(de,{w:()=>K});const K=new(L(985).c)(Y=>Y.complete())},360:(et,de,L)=>{L.d(de,{_:()=>K});var _=L(707);function K(Z,Y,X,me,ke){return new le(Z,Y,X,me,ke)}class le extends _.vU{constructor(Y,X,me,ke,Me,J){super(Y),this.onFinalize=Me,this.shouldUnsubscribe=J,this._next=X?function(H){try{X(H)}catch(ae){Y.error(ae)}}:super._next,this._error=ke?function(H){try{ke(H)}catch(ae){Y.error(ae)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(H){Y.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Y;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:X}=this;super.unsubscribe(),!X&&(null===(Y=this.onFinalize)||void 0===Y||Y.call(this))}}}},901:(et,de,L)=>{L.d(de,{U:()=>le});var _=L(974),K=L(360);function le(Z){return(0,_.N)((Y,X)=>{let me=!1;Y.subscribe((0,K._)(X,ke=>{me=!0,X.next(ke)},()=>{me||X.next(Z),X.complete()}))})}},964:(et,de,L)=>{L.d(de,{p:()=>le});var _=L(974),K=L(360);function le(Z,Y){return(0,_.N)((X,me)=>{let ke=0;X.subscribe((0,K._)(me,Me=>Z.call(Y,Me,ke++)&&me.next(Me)))})}},594:(et,de,L)=>{L.d(de,{$:()=>me});var _=L(350),K=L(964),le=L(697),Z=L(901),Y=L(774),X=L(669);function me(ke,Me){const J=arguments.length>=2;return H=>H.pipe(ke?(0,K.p)((ae,rt)=>ke(ae,rt,H)):X.D,(0,le.s)(1),J?(0,Z.U)(Me):(0,Y.v)(()=>new _.G))}},354:(et,de,L)=>{L.d(de,{T:()=>le});var _=L(974),K=L(360);function le(Z,Y){return(0,_.N)((X,me)=>{let ke=0;X.subscribe((0,K._)(me,Me=>{me.next(Z.call(Y,Me,ke++))}))})}},697:(et,de,L)=>{L.d(de,{s:()=>Z});var _=L(983),K=L(974),le=L(360);function Z(Y){return Y<=0?()=>_.w:(0,K.N)((X,me)=>{let ke=0;X.subscribe((0,le._)(me,Me=>{++ke<=Y&&(me.next(Me),Y<=ke&&me.complete())}))})}},774:(et,de,L)=>{L.d(de,{v:()=>Z});var _=L(350),K=L(974),le=L(360);function Z(X=Y){return(0,K.N)((me,ke)=>{let Me=!1;me.subscribe((0,le._)(ke,J=>{Me=!0,ke.next(J)},()=>Me?ke.complete():ke.error(X())))})}function Y(){return new _.G}},270:(et,de,L)=>{L.d(de,{f:()=>_});const _={setTimeout(K,le,...Z){const{delegate:Y}=_;return Y?.setTimeout?Y.setTimeout(K,le,...Z):setTimeout(K,le,...Z)},clearTimeout(K){const{delegate:le}=_;return(le?.clearTimeout||clearTimeout)(K)},delegate:void 0}},494:(et,de,L)=>{L.d(de,{s:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},350:(et,de,L)=>{L.d(de,{G:()=>K});const K=(0,L(853).L)(le=>function(){le(this),this.name="EmptyError",this.message="no elements in sequence"})},908:(et,de,L)=>{function _(K,le){if(K){const Z=K.indexOf(le);0<=Z&&K.splice(Z,1)}}L.d(de,{o:()=>_})},853:(et,de,L)=>{function _(K){const Z=K(Y=>{Error.call(Y),Y.stack=(new Error).stack});return Z.prototype=Object.create(Error.prototype),Z.prototype.constructor=Z,Z}L.d(de,{L:()=>_})},786:(et,de,L)=>{L.d(de,{Y:()=>le,l:()=>Z});var _=L(26);let K=null;function le(Y){if(_.$.useDeprecatedSynchronousErrorHandling){const X=!K;if(X&&(K={errorThrown:!1,error:null}),Y(),X){const{errorThrown:me,error:ke}=K;if(K=null,me)throw ke}}else Y()}function Z(Y){_.$.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=Y)}},669:(et,de,L)=>{function _(K){return K}L.d(de,{D:()=>_})},71:(et,de,L)=>{function _(K){return"function"==typeof K}L.d(de,{T:()=>_})},974:(et,de,L)=>{L.d(de,{N:()=>le,S:()=>K});var _=L(71);function K(Z){return(0,_.T)(Z?.lift)}function le(Z){return Y=>{if(K(Y))return Y.lift(function(X){try{return Z(X,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},343:(et,de,L)=>{function _(){}L.d(de,{l:()=>_})},203:(et,de,L)=>{L.d(de,{F:()=>K,m:()=>le});var _=L(669);function K(...Z){return le(Z)}function le(Z){return 0===Z.length?_.D:1===Z.length?Z[0]:function(X){return Z.reduce((me,ke)=>ke(me),X)}}},334:(et,de,L)=>{L.d(de,{m:()=>le});var _=L(26),K=L(270);function le(Z){K.f.setTimeout(()=>{const{onUnhandledError:Y}=_.$;if(!Y)throw Z;Y(Z)})}},438:(et,de,L)=>{L.d(de,{iLQ:()=>Pv,sZ2:()=>ac,o8S:()=>Bi,BIS:()=>Cg,gRc:()=>KS,Ql9:()=>qx,Ocv:()=>eN,Z63:()=>Ar,aKT:()=>Kr,uvJ:()=>dr,zcH:()=>Xr,bkB:()=>qr,$GK:()=>Fe,nKC:()=>Ae,zZn:()=>ln,_q3:()=>RE,MKu:()=>xE,xe9:()=>CE,Co$:()=>R_,Vns:()=>Oo,SKi:()=>mt,Agw:()=>lc,PLl:()=>kd,sFG:()=>Vm,_9s:()=>Et,czy:()=>ls,C4Q:()=>se,NYb:()=>Bx,giA:()=>OS,pJN:()=>Ys,RxE:()=>SS,c1b:()=>$c,gXe:()=>di,L39:()=>eP,Ol2:()=>mv,w6W:()=>QC,WQX:()=>re,QuC:()=>Gi,EmA:()=>Rl,zw6:()=>Ia,N4e:()=>vp,O8t:()=>nP,H3F:()=>IS,H8p:()=>fp,KH2:()=>hu,TgB:()=>qs,wOt:()=>Q,WHO:()=>NS,e01:()=>PS,PpM:()=>bs,H5H:()=>tE,Zy3:()=>Vi,mq5:()=>q0,JZv:()=>Ce,TL3:()=>PN,LfX:()=>Uf,plB:()=>Bn,jNT:()=>bE,zjR:()=>kS,ngT:()=>Nt,TL$:()=>Ib,Tbb:()=>Bt,zUL:()=>Du,zuW:()=>wE,M8M:()=>ZN,GFd:()=>fv,OA$:()=>be,aNF:()=>nS,R7$:()=>bh,BMQ:()=>V_,AVh:()=>q_,wni:()=>TA,VBU:()=>ap,FsC:()=>_y,jDH:()=>tt,G2t:()=>Cs,$C:()=>zi,EJ8:()=>Hu,rXU:()=>za,nrm:()=>Z_,k0s:()=>Dv,j41:()=>Ev,RV6:()=>z0,xGo:()=>vd,KVO:()=>dn,kS0:()=>Zl,bIt:()=>iE,lsd:()=>RA,XpG:()=>yA,Y8G:()=>G_,mGM:()=>MA,sdS:()=>xA,Njj:()=>ld,eBV:()=>Ls,n$t:()=>zg,DNE:()=>yv,C5r:()=>uS,EFF:()=>VA,JRh:()=>lE,SpI:()=>Tv});let K=null,Z=1;const Y=Symbol("SIGNAL");function X(t){const r=K;return K=t,r}const J={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function rt(t){if((!ut(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Z)){if(!t.producerMustRecompute(t)&&!Hn(t))return t.dirty=!1,void(t.lastCleanEpoch=Z);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Z}}function Lt(t){return t&&(t.nextProducerIndex=0),X(t)}function Hn(t){Zt(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],l=t.producerLastReadVersion[r];if(l!==s.version||(rt(s),l!==s.version))return!0}return!1}function Ui(t){if(Zt(t),ut(t))for(let r=0;r<t.producerNode.length;r++)pe(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function pe(t,r){if(function $n(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),1===t.liveConsumerNode.length&&function wt(t){return void 0!==t.producerNode}(t))for(let l=0;l<t.producerNode.length;l++)pe(t.producerNode[l],t.producerIndexOfThis[l]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const l=t.liveConsumerIndexOfThis[r],u=t.liveConsumerNode[r];Zt(u),u.producerIndexOfThis[l]=r}}function ut(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Zt(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Nf=null;var Qv=L(412),bu=L(413),Ff=L(359),Gn=L(354),wu=L(594);const Lf="https://g.co/ng/security#xss";class Q extends Error{constructor(r,s){super(Vi(r,s)),this.code=r}}function Vi(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}function Lr(t){return{toString:t}.toString()}const wn="__parameters__";function dt(t,r,s){return Lr(()=>{const l=function _u(t){return function(...s){if(t){const l=t(...s);for(const u in l)this[u]=l[u]}}}(r);function u(...h){if(this instanceof u)return l.apply(this,h),this;const p=new u(...h);return m.annotation=p,m;function m(b,E,C){const I=b.hasOwnProperty(wn)?b[wn]:Object.defineProperty(b,wn,{value:[]})[wn];for(;I.length<=C;)I.push(null);return(I[C]=I[C]||[]).push(p),b}}return s&&(u.prototype=Object.create(s.prototype)),u.prototype.ngMetadataName=t,u.annotationCls=u,u})}const Ce=globalThis;function Ze(t){for(let r in t)if(t[r]===Ze)return r;throw Error("Could not find renamed property on target object.")}function Bt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Bt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function gl(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}function Du(t,r=100){if(!t||r<1||t.length<=r)return t;if(1==r)return t.substring(0,1)+"...";const s=Math.round(r/2);return t.substring(0,s)+"..."+t.substring(t.length-s)}const ml=Ze({__forward_ref__:Ze});function Uo(t){return t.__forward_ref__=Uo,t.toString=function(){return Bt(this())},t}function ve(t){return Vo(t)?t():t}function Vo(t){return"function"==typeof t&&t.hasOwnProperty(ml)&&t.__forward_ref__===Uo}function tt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Cs(t){return{providers:t.providers||[],imports:t.imports||[]}}function As(t){return Vf(t,Ss)||Vf(t,Hf)}function Uf(t){return null!==As(t)}function Vf(t,r){return t.hasOwnProperty(r)?t[r]:null}function Ho(t){return t&&(t.hasOwnProperty(yl)||t.hasOwnProperty(ny))?t[yl]:null}const Ss=Ze({\u0275prov:Ze}),yl=Ze({\u0275inj:Ze}),Hf=Ze({ngInjectableDef:Ze}),ny=Ze({ngInjectorDef:Ze});class Ae{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=tt({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Mu(t){return t&&!!t.\u0275providers}const bl=Ze({\u0275cmp:Ze}),Wf=Ze({\u0275dir:Ze}),wl=Ze({\u0275pipe:Ze}),iy=Ze({\u0275mod:Ze}),ci=Ze({\u0275fac:Ze}),_l=Ze({__NG_ELEMENT_ID__:Ze}),sy=Ze({__NG_ENV_ID__:Ze});function ce(t){return"string"==typeof t?t:null==t?"":String(t)}function Ru(t,r){throw new Q(-201,!1)}var Fe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Fe||{});let xu;function qf(){return xu}function _n(t){const r=xu;return xu=t,r}function Xf(t,r,s){const l=As(t);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&Fe.Optional?null:void 0!==r?r:void Ru()}const Go={},Nu="__NG_DI_FLAG__",El="ngTempTokenPath",uy=/\n/gm,Yf="__source";let Is;function Cr(t){const r=Is;return Is=t,r}function Pu(t,r=Fe.Default){if(void 0===Is)throw new Q(-203,!1);return null===Is?Xf(t,void 0,r):Is.get(t,r&Fe.Optional?null:void 0,r)}function dn(t,r=Fe.Default){return(qf()||Pu)(ve(t),r)}function re(t,r=Fe.Default){return dn(t,Wo(r))}function Wo(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ou(t){const r=[];for(let s=0;s<t.length;s++){const l=ve(t[s]);if(Array.isArray(l)){if(0===l.length)throw new Q(900,!1);let u,h=Fe.Default;for(let p=0;p<l.length;p++){const m=l[p],b=ku(m);"number"==typeof b?-1===b?u=m.token:h|=b:u=m}r.push(dn(u,h))}else r.push(dn(l))}return r}function Dl(t,r){return t[Nu]=r,t.prototype[Nu]=r,t}function ku(t){return t[Nu]}const Fu=Dl(dt("Optional"),8),Cl=Dl(dt("SkipSelf"),4);function Ts(t,r){return t.hasOwnProperty(ci)?t[ci]:null}function $i(t,r){t.forEach(s=>Array.isArray(s)?$i(s,r):r(s))}function Qf(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function Il(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function qn(t,r,s){let l=Ms(t,r);return l>=0?t[1|l]=s:(l=~l,function Zf(t,r,s,l){let u=t.length;if(u==r)t.push(s,l);else if(1===u)t.push(l,t[0]),t[0]=s;else{for(u--,t.push(t[u-1],t[u]);u>r;)t[u]=t[u-2],u--;t[r]=s,t[r+1]=l}}(t,l,r,s)),l}function Jf(t,r){const s=Ms(t,r);if(s>=0)return t[1|s]}function Ms(t,r){return function ep(t,r,s){let l=0,u=t.length>>s;for(;u!==l;){const h=l+(u-l>>1),p=t[h<<s];if(r===p)return h<<s;p>r?u=h:l=h+1}return~(u<<s)}(t,r,1)}const Vr={},Ge=[],Ar=new Ae(""),tp=new Ae("",-1),Lu=new Ae("");class ju{get(r,s=Go){if(s===Go){const l=new Error(`NullInjectorError: No provider for ${Bt(r)}!`);throw l.name="NullInjectorError",l}return s}}var Bu=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Bu||{}),di=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(di||{}),hi=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(hi||{});function fy(t,r,s){let l=t.length;for(;;){const u=t.indexOf(r,s);if(-1===u)return u;if(0===u||t.charCodeAt(u-1)<=32){const h=r.length;if(u+h===l||t.charCodeAt(u+h)<=32)return u}s=u+1}}function np(t,r,s){let l=0;for(;l<s.length;){const u=s[l];if("number"==typeof u){if(0!==u)break;l++;const h=s[l++],p=s[l++],m=s[l++];t.setAttribute(r,p,m,h)}else{const h=u,p=s[++l];rp(h)?t.setProperty(r,h,p):t.setAttribute(r,h,p),l++}}return l}function py(t){return 3===t||4===t||6===t}function rp(t){return 64===t.charCodeAt(0)}function qo(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let l=0;l<r.length;l++){const u=r[l];"number"==typeof u?s=u:0===s||ip(t,s,u,null,-1===s||2===s?r[++l]:null)}}return t}function ip(t,r,s,l,u){let h=0,p=t.length;if(-1===r)p=-1;else for(;h<t.length;){const m=t[h++];if("number"==typeof m){if(m===r){p=-1;break}if(m>r){p=h-1;break}}}for(;h<t.length;){const m=t[h];if("number"==typeof m)break;if(m===s){if(null===l)return void(null!==u&&(t[h+1]=u));if(l===t[h+1])return void(t[h+2]=u)}h++,null!==l&&h++,null!==u&&h++}-1!==p&&(t.splice(p,0,r),h=p+1),t.splice(h++,0,s),null!==l&&t.splice(h++,0,l),null!==u&&t.splice(h++,0,u)}const gy="ng-template";function sp(t,r,s,l){let u=0;if(l){for(;u<r.length&&"string"==typeof r[u];u+=2)if("class"===r[u]&&-1!==fy(r[u+1].toLowerCase(),s,0))return!0}else if(Uu(t))return!1;if(u=r.indexOf(1,u),u>-1){let h;for(;++u<r.length&&"string"==typeof(h=r[u]);)if(h.toLowerCase()===s)return!0}return!1}function Uu(t){return 4===t.type&&t.value!==gy}function it(t,r,s){return r===(4!==t.type||s?t.value:gy)}function aD(t,r,s){let l=4;const u=t.attrs,h=null!==u?function uD(t){for(let r=0;r<t.length;r++)if(py(t[r]))return r;return t.length}(u):0;let p=!1;for(let m=0;m<r.length;m++){const b=r[m];if("number"!=typeof b){if(!p)if(4&l){if(l=2|1&l,""!==b&&!it(t,b,s)||""===b&&1===r.length){if(Sr(l))return!1;p=!0}}else if(8&l){if(null===u||!sp(t,u,b,s)){if(Sr(l))return!1;p=!0}}else{const E=r[++m],C=lD(b,u,Uu(t),s);if(-1===C){if(Sr(l))return!1;p=!0;continue}if(""!==E){let I;if(I=C>h?"":u[C+1].toLowerCase(),2&l&&E!==I){if(Sr(l))return!1;p=!0}}}}else{if(!p&&!Sr(l)&&!Sr(b))return!1;if(p&&Sr(b))continue;p=!1,l=b|1&l}}return Sr(l)||p}function Sr(t){return!(1&t)}function lD(t,r,s,l){if(null===r)return-1;let u=0;if(l||!s){let h=!1;for(;u<r.length;){const p=r[u];if(p===t)return u;if(3===p||6===p)h=!0;else{if(1===p||2===p){let m=r[++u];for(;"string"==typeof m;)m=r[++u];continue}if(4===p)break;if(0===p){u+=4;continue}}u+=h?1:2}return-1}return function dD(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const l=t[s];if("number"==typeof l)return-1;if(l===r)return s;s++}return-1}(r,t)}function my(t,r,s=!1){for(let l=0;l<r.length;l++)if(aD(t,r[l],s))return!0;return!1}function yy(t,r){return t?":not("+r.trim()+")":r}function hD(t){let r=t[0],s=1,l=2,u="",h=!1;for(;s<t.length;){let p=t[s];if("string"==typeof p)if(2&l){const m=t[++s];u+="["+p+(m.length>0?'="'+m+'"':"")+"]"}else 8&l?u+="."+p:4&l&&(u+=" "+p);else""!==u&&!Sr(p)&&(r+=yy(h,u),u=""),l=p,h=h||!Sr(l);s++}return""!==u&&(r+=yy(h,u)),r}function ap(t){return Lr(()=>{const r=$u(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Bu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||di.Emulated,styles:t.styles||Ge,_:null,schemas:t.schemas||null,tView:null,id:""};zu(s);const l=t.dependencies;return s.directiveDefs=Ml(l,!1),s.pipeDefs=Ml(l,!0),s.id=function Rs(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const u of s)r=Math.imul(31,r)+u.charCodeAt(0)|0;return r+=2147483648,"c"+r}(s),s})}function by(t){return Ne(t)||qt(t)}function Vu(t){return null!==t}function zi(t){return Lr(()=>({type:t.type,bootstrap:t.bootstrap||Ge,declarations:t.declarations||Ge,imports:t.imports||Ge,exports:t.exports||Ge,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function wy(t,r){if(null==t)return Vr;const s={};for(const l in t)if(t.hasOwnProperty(l)){const u=t[l];let h,p,m=hi.None;Array.isArray(u)?(m=u[0],h=u[1],p=u[2]??h):(h=u,p=u),r?(s[h]=m!==hi.None?[l,m]:l,r[h]=p):s[h]=l}return s}function _y(t){return Lr(()=>{const r=$u(t);return zu(r),r})}function Hu(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ne(t){return t[bl]||null}function qt(t){return t[Wf]||null}function sn(t){return t[wl]||null}function Gi(t){const r=Ne(t)||qt(t)||sn(t);return null!==r&&r.standalone}function Xt(t,r){const s=t[iy]||null;if(!s&&!0===r)throw new Error(`Type ${Bt(t)} does not have '\u0275mod' property.`);return s}function $u(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||Vr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Ge,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:wy(t.inputs,r),outputs:wy(t.outputs),debugInfo:null}}function zu(t){t.features?.forEach(r=>r(t))}function Ml(t,r){if(!t)return null;const s=r?sn:by;return()=>("function"==typeof t?t():t).map(l=>s(l)).filter(Vu)}function Rl(t){return{\u0275providers:t}}function pD(...t){return{\u0275providers:cp(0,t),\u0275fromNgModule:!0}}function cp(t,...r){const s=[],l=new Set;let u;const h=p=>{s.push(p)};return $i(r,p=>{const m=p;Gu(m,h,[],l)&&(u||=[],u.push(m))}),void 0!==u&&Ey(u,h),s}function Ey(t,r){for(let s=0;s<t.length;s++){const{ngModule:l,providers:u}=t[s];up(u,h=>{r(h,l)})}}function Gu(t,r,s,l){if(!(t=ve(t)))return!1;let u=null,h=Ho(t);const p=!h&&Ne(t);if(h||p){if(p&&!p.standalone)return!1;u=t}else{const b=t.ngModule;if(h=Ho(b),!h)return!1;u=b}const m=l.has(u);if(p){if(m)return!1;if(l.add(u),p.dependencies){const b="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const E of b)Gu(E,r,s,l)}}else{if(!h)return!1;{if(null!=h.imports&&!m){let E;l.add(u);try{$i(h.imports,C=>{Gu(C,r,s,l)&&(E||=[],E.push(C))})}finally{}void 0!==E&&Ey(E,r)}if(!m){const E=Ts(u)||(()=>new u);r({provide:u,useFactory:E,deps:Ge},u),r({provide:Lu,useValue:u,multi:!0},u),r({provide:Ar,useValue:()=>dn(u),multi:!0},u)}const b=h.providers;if(null!=b&&!m){const E=t;up(b,C=>{r(C,E)})}}}return u!==t&&void 0!==t.providers}function up(t,r){for(let s of t)Mu(s)&&(s=s.\u0275providers),Array.isArray(s)?up(s,r):r(s)}const gD=Ze({provide:String,useValue:Ze});function Wu(t){return null!==t&&"object"==typeof t&&gD in t}function xs(t){return"function"==typeof t}const fp=new Ae(""),xl={},Cy={};let pp;function qu(){return void 0===pp&&(pp=new ju),pp}class dr{}class Xo extends dr{get destroyed(){return this._destroyed}constructor(r,s,l,u){super(),this.parent=s,this.source=l,this.scopes=u,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mp(r,p=>this.processProvider(p)),this.records.set(tp,Ko(void 0,this)),u.has("environment")&&this.records.set(dr,Ko(void 0,this));const h=this.records.get(fp);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Lu,Ge,Fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const r=X(null);try{for(const l of this._ngOnDestroyHooks)l.ngOnDestroy();const s=this._onDestroyHooks;this._onDestroyHooks=[];for(const l of s)l()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),X(r)}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=Cr(this),l=_n(void 0);try{return r()}finally{Cr(s),_n(l)}}get(r,s=Go,l=Fe.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(sy))return r[sy](this);l=Wo(l);const h=Cr(this),p=_n(void 0);try{if(!(l&Fe.SkipSelf)){let b=this.records.get(r);if(void 0===b){const E=function Xu(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ae}(r)&&As(r);b=E&&this.injectableDefInScope(E)?Ko(gp(r),xl):null,this.records.set(r,b)}if(null!=b)return this.hydrate(r,b)}return(l&Fe.Self?qu():this.parent).get(r,s=l&Fe.Optional&&s===Go?null:s)}catch(m){if("NullInjectorError"===m.name){if((m[El]=m[El]||[]).unshift(Bt(r)),h)throw m;return function tD(t,r,s,l){const u=t[El];throw r[Yf]&&u.unshift(r[Yf]),t.message=function nD(t,r,s,l=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let u=Bt(r);if(Array.isArray(r))u=r.map(Bt).join(" -> ");else if("object"==typeof r){let h=[];for(let p in r)if(r.hasOwnProperty(p)){let m=r[p];h.push(p+":"+("string"==typeof m?JSON.stringify(m):Bt(m)))}u=`{${h.join(", ")}}`}return`${s}${l?"("+l+")":""}[${u}]: ${t.replace(uy,"\n  ")}`}("\n"+t.message,u,s,l),t.ngTokenPath=u,t[El]=null,t}(m,r,"R3InjectorError",this.source)}throw m}finally{_n(p),Cr(h)}}resolveInjectorInitializers(){const r=X(null),s=Cr(this),l=_n(void 0);try{const h=this.get(Ar,Ge,Fe.Self);for(const p of h)p()}finally{Cr(s),_n(l),X(r)}}toString(){const r=[],s=this.records;for(const l of s.keys())r.push(Bt(l));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(r){let s=xs(r=ve(r))?r:ve(r&&r.provide);const l=function vD(t){return Wu(t)?Ko(void 0,t.useValue):Ko(function Ay(t,r,s){let l;if(xs(t)){const u=ve(t);return Ts(u)||gp(u)}if(Wu(t))l=()=>ve(t.useValue);else if(function hp(t){return!(!t||!t.useFactory)}(t))l=()=>t.useFactory(...Ou(t.deps||[]));else if(function dp(t){return!(!t||!t.useExisting)}(t))l=()=>dn(ve(t.useExisting));else{const u=ve(t&&(t.useClass||t.provide));if(!function yD(t){return!!t.deps}(t))return Ts(u)||gp(u);l=()=>new u(...Ou(t.deps))}return l}(t),xl)}(r);if(!xs(r)&&!0===r.multi){let u=this.records.get(s);u||(u=Ko(void 0,xl,!0),u.factory=()=>Ou(u.multi),this.records.set(s,u)),s=r,u.multi.push(r)}this.records.set(s,l)}hydrate(r,s){const l=X(null);try{return s.value===xl&&(s.value=Cy,s.value=s.factory()),"object"==typeof s.value&&s.value&&function bD(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}finally{X(l)}}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ve(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function gp(t){const r=As(t),s=null!==r?r.factory:Ts(t);if(null!==s)return s;if(t instanceof Ae)throw new Q(204,!1);if(t instanceof Function)return function mD(t){if(t.length>0)throw new Q(204,!1);const s=function KE(t){return t&&(t[Ss]||t[Hf])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new Q(204,!1)}function Ko(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function mp(t,r){for(const s of t)Array.isArray(s)?mp(s,r):s&&Mu(s)?mp(s.\u0275providers,r):r(s)}function vp(t,r){t instanceof Xo&&t.assertNotDestroyed();const l=Cr(t),u=_n(void 0);try{return r()}finally{Cr(l),_n(u)}}const gt=0,$=1,ue=2,Tt=3,hr=4,Kt=5,hn=6,fi=7,lt=8,_t=9,fr=10,ye=11,Jo=12,_p=13,On=14,ht=15,Wi=16,qi=17,Hr=18,Ns=19,Ol=20,pi=21,kl=22,Xn=23,ie=25,Ju=1,ea=6,Ir=7,Ps=9,Mt=10;var ta=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ta||{});function Rt(t){return Array.isArray(t)&&"object"==typeof t[Ju]}function Xe(t){return Array.isArray(t)&&!0===t[Ju]}function Ll(t){return!!(4&t.flags)}function gi(t){return t.componentOffset>-1}function na(t){return!(1&~t.flags)}function Kn(t){return!!t.template}function ra(t){return!!(512&t[ue])}class Py{constructor(r,s,l){this.previousValue=r,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function Jt(t,r,s,l){null!==r?r.applyValueToInputSignal(r,l):t[s]=l}function be(){return $e}function $e(t){return t.type.prototype.ngOnChanges&&(t.setInput=fn),Oy}function Oy(){const t=$r(this),r=t?.current;if(r){const s=t.previous;if(s===Vr)t.previous=r;else for(let l in r)s[l]=r[l];t.current=null,this.ngOnChanges(r)}}function fn(t,r,s,l,u){const h=this.declaredInputs[l],p=$r(t)||function Bl(t,r){return t[Os]=r}(t,{previous:Vr,current:null}),m=p.current||(p.current={}),b=p.previous,E=b[h];m[h]=new Py(E&&E.currentValue,s,b===Vr),Jt(t,r,u,s)}be.ngInherit=!0;const Os="__ngSimpleChanges__";function $r(t){return t[Os]||null}const ft=function(t,r,s){};function Se(t){for(;Array.isArray(t);)t=t[gt];return t}function aa(t,r){return Se(r[t])}function pn(t,r){return Se(r[t.index])}function la(t,r){return t.data[r]}function on(t,r){const s=r[t];return Rt(s)?s:s[gt]}function Sp(t){return!(128&~t[ue])}function Jn(t,r){return null==r?null:t[r]}function nd(t){t[qi]=0}function rd(t){1024&t[ue]||(t[ue]|=1024,Sp(t)&&gr(t))}function Ul(t){return!!(9216&t[ue]||t[Xn]?.dirty)}function Xi(t){t[fr].changeDetectionScheduler?.notify(8),64&t[ue]&&(t[ue]|=1024),Ul(t)&&gr(t)}function gr(t){t[fr].changeDetectionScheduler?.notify(0);let r=gn(t);for(;null!==r&&!(8192&r[ue])&&(r[ue]|=8192,Sp(r));)r=gn(r)}function ks(t,r){if(!(256&~t[ue]))throw new Q(911,!1);null===t[pi]&&(t[pi]=[]),t[pi].push(r)}function gn(t){const r=t[Tt];return Xe(r)?r[Tt]:r}const fe={lFrame:bi(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Ip=!1;function od(){return fe.bindingsEnabled}function zr(){return null!==fe.skipHydrationRootTNode}function F(){return fe.lFrame.lView}function Pe(){return fe.lFrame.tView}function Ls(t){return fe.lFrame.contextLView=t,t[lt]}function ld(t){return fe.lFrame.contextLView=null,t}function Qe(){let t=xp();for(;null!==t&&64===t.type;)t=t.parent;return t}function xp(){return fe.lFrame.currentTNode}function Tr(t,r){const s=fe.lFrame;s.currentTNode=t,s.isParent=r}function Vl(){return fe.lFrame.isParent}function zy(){return Ip}function Pp(t){Ip=t}function Rr(){return fe.lFrame.bindingIndex++}function ud(t,r){const s=fe.lFrame;s.bindingIndex=s.bindingRootIndex=t,Hl(r)}function Hl(t){fe.lFrame.currentDirectiveIndex=t}function $l(){return fe.lFrame.currentQueryIndex}function da(t){fe.lFrame.currentQueryIndex=t}function qy(t){const r=t[$];return 2===r.type?r.declTNode:1===r.type?t[Kt]:null}function kp(t,r,s){if(s&Fe.SkipSelf){let u=r,h=t;for(;!(u=u.parent,null!==u||s&Fe.Host||(u=qy(h),null===u||(h=h[On],10&u.type))););if(null===u)return!1;r=u,t=h}const l=fe.lFrame=Wr();return l.currentTNode=r,l.lView=t,!0}function Fp(t){const r=Wr(),s=t[$];fe.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Wr(){const t=fe.lFrame,r=null===t?null:t.child;return null===r?bi(t):r}function bi(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Lp(){const t=fe.lFrame;return fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Xy=Lp;function zl(){const t=Lp();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function an(){return fe.lFrame.selectedIndex}function js(t){fe.lFrame.selectedIndex=t}function pt(){const t=fe.lFrame;return la(t.tView,t.selectedIndex)}function Ky(){return fe.lFrame.currentNamespace}let jp=!0;function Bs(){return jp}function mr(t){jp=t}function ha(t,r){for(let s=r.directiveStart,l=r.directiveEnd;s<l;s++){const h=t.data[s].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:m,ngAfterViewInit:b,ngAfterViewChecked:E,ngOnDestroy:C}=h;p&&(t.contentHooks??=[]).push(-s,p),m&&((t.contentHooks??=[]).push(s,m),(t.contentCheckHooks??=[]).push(s,m)),b&&(t.viewHooks??=[]).push(-s,b),E&&((t.viewHooks??=[]).push(s,E),(t.viewCheckHooks??=[]).push(s,E)),null!=C&&(t.destroyHooks??=[]).push(s,C)}}function fa(t,r,s){Up(t,r,3,s)}function pa(t,r,s,l){(3&t[ue])===s&&Up(t,r,s,l)}function Us(t,r){let s=t[ue];(3&s)===r&&(s&=16383,s+=1,t[ue]=s)}function Up(t,r,s,l){const h=l??-1,p=r.length-1;let m=0;for(let b=void 0!==l?65535&t[qi]:0;b<p;b++)if("number"==typeof r[b+1]){if(m=r[b],null!=l&&m>=l)break}else r[b]<0&&(t[qi]+=65536),(m<h||-1==h)&&(Yy(t,s,r,b),t[qi]=(4294901760&t[qi])+b+2),b++}function Vp(t,r){ft(4,t,r);const s=X(null);try{r.call(t)}finally{X(s),ft(5,t,r)}}function Yy(t,r,s,l){const u=s[l]<0,h=s[l+1],m=t[u?-s[l]:s[l]];u?t[ue]>>14<t[qi]>>16&&(3&t[ue])===r&&(t[ue]+=16384,Vp(m,h)):Vp(m,h)}const Vs=-1;class Hs{constructor(r,s,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}const Ki={};class Yi{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,l){l=Wo(l);const u=this.injector.get(r,Ki,l);return u!==Ki||s===Ki?u:this.parentInjector.get(r,s,l)}}function fd(t){return t!==Vs}function ga(t){return 32767&t}function Qi(t,r){let s=function Jy(t){return t>>16}(t),l=r;for(;s>0;)l=l[On],s--;return l}let Gl=!0;function $s(t){const r=Gl;return Gl=t,r}const Wl=255,ql=5;let Gp=0;const xr={};function Xl(t,r){const s=Wp(t,r);if(-1!==s)return s;const l=r[$];l.firstCreatePass&&(t.injectorIndex=r.length,pd(l.data,t),pd(r,null),pd(l.blueprint,null));const u=Kl(t,r),h=t.injectorIndex;if(fd(u)){const p=ga(u),m=Qi(u,r),b=m[$].data;for(let E=0;E<8;E++)r[h+E]=m[p+E]|b[p+E]}return r[h+8]=u,h}function pd(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Wp(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Kl(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,l=null,u=r;for(;null!==u;){if(l=Qp(u),null===l)return Vs;if(s++,u=u[On],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return Vs}function Yl(t,r,s){!function tb(t,r,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(_l)&&(l=s[_l]),null==l&&(l=s[_l]=Gp++);const u=l&Wl;r.data[t+(u>>ql)]|=1<<u}(t,r,s)}function Ql(t,r,s){if(s&Fe.Optional||void 0!==t)return t;Ru()}function Xp(t,r,s,l){if(s&Fe.Optional&&void 0===l&&(l=null),!(s&(Fe.Self|Fe.Host))){const u=t[_t],h=_n(void 0);try{return u?u.get(r,l,s&Fe.Optional):Xf(r,l,s&Fe.Optional)}finally{_n(h)}}return Ql(l,0,s)}function nb(t,r,s,l=Fe.Default,u){if(null!==t){if(2048&r[ue]&&!(l&Fe.Self)){const p=function sb(t,r,s,l,u){let h=t,p=r;for(;null!==h&&null!==p&&2048&p[ue]&&!(512&p[ue]);){const m=gd(h,p,s,l|Fe.Self,xr);if(m!==xr)return m;let b=h.parent;if(!b){const E=p[Ol];if(E){const C=E.get(s,xr,l);if(C!==xr)return C}b=Qp(p),p=p[On]}h=b}return u}(t,r,s,l,xr);if(p!==xr)return p}const h=gd(t,r,s,l,xr);if(h!==xr)return h}return Xp(r,s,l,u)}function gd(t,r,s,l,u){const h=function ib(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(_l)?t[_l]:void 0;return"number"==typeof r?r>=0?r&Wl:jD:r}(s);if("function"==typeof h){if(!kp(r,t,l))return l&Fe.Host?Ql(u,0,l):Xp(r,s,l,u);try{let p;if(p=h(l),null!=p||l&Fe.Optional)return p;Ru()}finally{Xy()}}else if("number"==typeof h){let p=null,m=Wp(t,r),b=Vs,E=l&Fe.Host?r[ht][Kt]:null;for((-1===m||l&Fe.SkipSelf)&&(b=-1===m?Kl(t,r):r[m+8],b!==Vs&&Kp(l,!1)?(p=r[$],m=ga(b),r=Qi(b,r)):m=-1);-1!==m;){const C=r[$];if(md(h,m,C.data)){const I=rb(m,r,s,p,l,E);if(I!==xr)return I}b=r[m+8],b!==Vs&&Kp(l,r[$].data[m+8]===E)&&md(h,m,r)?(p=C,m=ga(b),r=Qi(b,r)):m=-1}}return u}function rb(t,r,s,l,u,h){const p=r[$],m=p.data[t+8],C=zs(m,p,s,null==l?gi(m)&&Gl:l!=p&&!!(3&m.type),u&Fe.Host&&h===m);return null!==C?wi(r,p,C,m):xr}function zs(t,r,s,l,u){const h=t.providerIndexes,p=r.data,m=1048575&h,b=t.directiveStart,C=h>>20,R=u?m+C:t.directiveEnd;for(let N=l?m:m+C;N<R;N++){const P=p[N];if(N<b&&s===P||N>=b&&P.type===s)return N}if(u){const N=p[b];if(N&&Kn(N)&&N.type===s)return b}return null}function wi(t,r,s,l){let u=t[s];const h=r.data;if(function Qy(t){return t instanceof Hs}(u)){const p=u;p.resolving&&function ay(t,r){throw r&&r.join(" > "),new Q(-200,t)}(function qe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ce(t)}(h[s]));const m=$s(p.canSeeViewProviders);p.resolving=!0;const E=p.injectImpl?_n(p.injectImpl):null;kp(t,l,Fe.Default);try{u=t[s]=p.factory(void 0,h,t,l),r.firstCreatePass&&s>=l.directiveStart&&function Bp(t,r,s){const{ngOnChanges:l,ngOnInit:u,ngDoCheck:h}=r.type.prototype;if(l){const p=$e(r);(s.preOrderHooks??=[]).push(t,p),(s.preOrderCheckHooks??=[]).push(t,p)}u&&(s.preOrderHooks??=[]).push(0-t,u),h&&((s.preOrderHooks??=[]).push(t,h),(s.preOrderCheckHooks??=[]).push(t,h))}(s,h[s],r)}finally{null!==E&&_n(E),$s(m),p.resolving=!1,Xy()}}return u}function md(t,r,s){return!!(s[r+(t>>ql)]&1<<t)}function Kp(t,r){return!(t&Fe.Self||t&Fe.Host&&r)}class Ut{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,l){return nb(this._tNode,this._lView,r,Wo(l),s)}}function jD(){return new Ut(Qe(),F())}function vd(t){return Lr(()=>{const r=t.prototype.constructor,s=r[ci]||Yp(r),l=Object.prototype;let u=Object.getPrototypeOf(t.prototype).constructor;for(;u&&u!==l;){const h=u[ci]||Yp(u);if(h&&h!==s)return h;u=Object.getPrototypeOf(u)}return h=>new h})}function Yp(t){return Vo(t)?()=>{const r=Yp(ve(t));return r&&r()}:Ts(t)}function Qp(t){const r=t[$],s=r.type;return 2===s?r.declTNode:1===s?t[Kt]:null}function Zl(t){return function qp(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const l=s.length;let u=0;for(;u<l;){const h=s[u];if(py(h))break;if(0===h)u+=2;else if("number"==typeof h)for(u++;u<l&&"string"==typeof s[u];)u++;else{if(h===r)return s[u+1];u+=2}}}return null}(Qe(),t)}function cb(t,r=null,s=null,l){const u=ub(t,r,s,l);return u.resolveInjectorInitializers(),u}function ub(t,r=null,s=null,l,u=new Set){const h=[s||Ge,pD(t)];return l=l||("object"==typeof t?void 0:Bt(t)),new Xo(h,r||qu(),l||null,u)}class ln{static{this.THROW_IF_NOT_FOUND=Go}static{this.NULL=new ju}static create(r,s){if(Array.isArray(r))return cb({name:""},s,r,"");{const l=r.name??"";return cb({name:l},r.parent,r.providers,l)}}static{this.\u0275prov=tt({token:ln,providedIn:"any",factory:()=>dn(tp)})}static{this.__NG_ELEMENT_ID__=-1}}new Ae("").__NG_ELEMENT_ID__=t=>{const r=Qe();if(null===r)throw new Q(204,!1);if(2&r.type)return r.value;if(t&Fe.Optional)return null;throw new Q(204,!1)};function ig(t){return t.ngOriginalError}const hb=!0;let ec=(()=>{class t{static{this.__NG_ELEMENT_ID__=tc}static{this.__NG_ENV_ID__=s=>s}}return t})();class Zi extends ec{constructor(r){super(),this._lView=r}onDestroy(r){return ks(this._lView,r),()=>function Fs(t,r){if(null===t[pi])return;const s=t[pi].indexOf(r);-1!==s&&t[pi].splice(s,1)}(this._lView,r)}}function tc(){return new Zi(F())}let qs=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Qv.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=tt({token:t,providedIn:"root",factory:()=>new t})}}return t})();const qr=class $D extends bu.B{constructor(r=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=r,function Yo(){return void 0!==qf()||null!=function dy(){return Is}()}()&&(this.destroyRef=re(ec,{optional:!0})??void 0,this.pendingTasks=re(qs,{optional:!0})??void 0)}emit(r){const s=X(null);try{super.next(r)}finally{X(s)}}subscribe(r,s,l){let u=r,h=s||(()=>null),p=l;if(r&&"object"==typeof r){const b=r;u=b.next?.bind(b),h=b.error?.bind(b),p=b.complete?.bind(b)}this.__isAsync&&(h=this.wrapInTimeout(h),u&&(u=this.wrapInTimeout(u)),p&&(p=this.wrapInTimeout(p)));const m=super.subscribe({next:u,error:h,complete:p});return r instanceof Ff.yU&&r.add(m),m}wrapInTimeout(r){return s=>{const l=this.pendingTasks?.add();setTimeout(()=>{r(s),void 0!==l&&this.pendingTasks?.remove(l)})}}};function yd(...t){}function sg(t){let r,s;function l(){t=yd;try{void 0!==s&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(s),void 0!==r&&clearTimeout(r)}catch{}}return r=setTimeout(()=>{t(),l()}),"function"==typeof requestAnimationFrame&&(s=requestAnimationFrame(()=>{t(),l()})),()=>l()}function fb(t){return queueMicrotask(()=>t()),()=>{t=yd}}const kn="isAngularZone",ma=kn+"_ID";let pb=0;class mt{constructor(r){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qr(!1),this.onMicrotaskEmpty=new qr(!1),this.onStable=new qr(!1),this.onError=new qr(!1);const{enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:u=!1,scheduleInRootZone:h=hb}=r;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!u&&l,p.shouldCoalesceRunChangeDetection=u,p.callbackScheduled=!1,p.scheduleInRootZone=h,function vb(t){const r=()=>{!function mb(t){function r(){sg(()=>{t.callbackScheduled=!1,wd(t),t.isCheckStableRunning=!0,bd(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{r()}):t._outer.run(()=>{r()}),wd(t))}(t)},s=pb++;t._inner=t._inner.fork({name:"angular",properties:{[kn]:!0,[ma]:s,[ma+s]:!0},onInvokeTask:(l,u,h,p,m,b)=>{if(function lg(t){return Ed(t,"__ignore_ng_zone__")}(b))return l.invokeTask(h,p,m,b);try{return og(t),l.invokeTask(h,p,m,b)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||t.shouldCoalesceRunChangeDetection)&&r(),ag(t)}},onInvoke:(l,u,h,p,m,b,E)=>{try{return og(t),l.invoke(h,p,m,b,E)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function yb(t){return Ed(t,"__scheduler_tick__")}(b)&&r(),ag(t)}},onHasTask:(l,u,h,p)=>{l.hasTask(h,p),u===h&&("microTask"==p.change?(t._hasPendingMicrotasks=p.microTask,wd(t),bd(t)):"macroTask"==p.change&&(t.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,u,h,p)=>(l.handleError(h,p),t.runOutsideAngular(()=>t.onError.emit(p)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(kn)}static assertInAngularZone(){if(!mt.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(mt.isInAngularZone())throw new Q(909,!1)}run(r,s,l){return this._inner.run(r,s,l)}runTask(r,s,l,u){const h=this._inner,p=h.scheduleEventTask("NgZoneEvent: "+u,r,gb,yd,yd);try{return h.runTask(p,s,l)}finally{h.cancelTask(p)}}runGuarded(r,s,l){return this._inner.runGuarded(r,s,l)}runOutsideAngular(r){return this._outer.run(r)}}const gb={};function bd(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function wd(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function og(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ag(t){t._nesting--,bd(t)}class _d{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qr,this.onMicrotaskEmpty=new qr,this.onStable=new qr,this.onError=new qr}run(r,s,l){return r.apply(s,l)}runGuarded(r,s,l){return r.apply(s,l)}runOutsideAngular(r){return r()}runTask(r,s,l,u){return r.apply(s,l)}}function Ed(t,r){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[r]}class Xr{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&ig(r);for(;s&&ig(s);)s=ig(s);return s||null}}const Cd=new Ae("",{providedIn:"root",factory:()=>{const t=re(mt),r=re(Xr);return s=>t.runOutsideAngular(()=>r.handleError(s))}});function dg(){return er(Qe(),F())}function er(t,r){return new Kr(pn(t,r))}let Kr=(()=>{class t{constructor(s){this.nativeElement=s}static{this.__NG_ELEMENT_ID__=dg}}return t})();function hg(t){return t instanceof Kr?t.nativeElement:t}function es(){return this._results[Symbol.iterator]()}class _i{get changes(){return this._changes??=new qr}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const s=_i.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=es)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){this.dirty=!1;const l=function Pn(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Sl(t,r,s){if(t.length!==r.length)return!1;for(let l=0;l<t.length;l++){let u=t[l],h=r[l];if(s&&(u=s(u),h=s(h)),h!==u)return!1}return!0}(this._results,l,s))&&(this._results=l,this.length=l.length,this.last=l[this.length-1],this.first=l[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(r){this._onDirty=r}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}const va="ngSkipHydration",bb="ngskiphydration";function ya(t){const r=t.mergedAttrs;if(null===r)return!1;for(let s=0;s<r.length;s+=2){const l=r[s];if("number"==typeof l)return!1;if("string"==typeof l&&l.toLowerCase()===bb)return!0}return!1}function nc(t){return t.hasAttribute(va)}function ba(t){return!(128&~t.flags)}const Id=new Map;let wb=0;function Ei(t){Id.delete(t[Ns])}const Ea="__ngContext__";function cn(t,r){Rt(r)?(t[Ea]=r[Ns],function _a(t){Id.set(t[Ns],t)}(r)):t[Ea]=r}function bg(t){return Ca(t[Jo])}function is(t){return Ca(t[hr])}function Ca(t){for(;null!==t&&!Xe(t);)t=t[hr];return t}let Od;function Ib(t){Od=t}function Ci(){if(void 0!==Od)return Od;if(typeof document<"u")return document;throw new Q(210,!1)}const ac=new Ae("",{providedIn:"root",factory:()=>Dg}),Dg="ng",kd=new Ae(""),lc=new Ae("",{providedIn:"platform",factory:()=>"unknown"}),Cg=new Ae("",{providedIn:"root",factory:()=>Ci().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Ia(t){return t}function Fd(){const t=new Ys;return"browser"===re(lc)&&(t.store=function Sg(t,r){const s=t.getElementById(r+"-state");if(s?.textContent)try{return JSON.parse(s.textContent)}catch(l){console.warn("Exception while restoring TransferState for app "+r,l)}return{}}(Ci(),re(ac))),t}let Ys=(()=>{class t{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=tt({token:t,providedIn:"root",factory:Fd})}get(s,l){return void 0!==this.store[s]?this.store[s]:l}set(s,l){this.store[s]=l}remove(s){delete this.store[s]}hasKey(s){return this.store.hasOwnProperty(s)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(s,l){this.onSerializeCallbacks[s]=l}toJson(){for(const s in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(s))try{this.store[s]=this.onSerializeCallbacks[s]()}catch(l){console.warn("Exception in onSerialize callback: ",l)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return t})();const Ld="h",Qs="b";var Zs=function(t){return t.FirstChild="f",t.NextSibling="n",t}(Zs||{});const uc="e",jd="t",Js="c",Ai="x",eo="r",Ta="i",dc="n",to="d",Le="__nghData__",Dn="ngh",Bd="nghm";let Yr=()=>null;function Fn(t,r,s=!1){let l=t.getAttribute(Dn);if(null==l)return null;const[u,h]=l.split("|");if(l=s?h:u,!l)return null;const m=s?u:h?`|${h}`:"";let b={};if(""!==l){const C=r.get(Ys,null,{optional:!0});null!==C&&(b=C.get(Le,[])[Number(l)])}const E={data:b,firstChild:t.firstChild??null};return s&&(E.firstChild=t,pc(E,0,t.nextSibling)),m?t.setAttribute(Dn,m):t.removeAttribute(Dn),E}function Qr(t,r,s=!1){return Yr(t,r,s)}function no(t){let r=t._lView;return 2===r[$].type?null:(ra(r)&&(r=r[ie]),r)}function pc(t,r,s){t.segmentHeads??={},t.segmentHeads[r]=s}function $d(t,r){return t.segmentHeads?.[r]??null}function xa(t,r){return t.data[Js]?.[r]??null}function Mg(t,r){const s=xa(t,r)??[];let l=0;for(let u of s)l+=u[eo]*(u[Ai]??1);return l}function ro(t,r){if(typeof t.disconnectedNodes>"u"){const s=t.data[to];t.disconnectedNodes=s?new Set(s):null}return!!function Rg(t){if(typeof t.disconnectedNodes>"u"){const r=t.data[to];t.disconnectedNodes=r?new Set(r):null}return t.disconnectedNodes}(t)?.has(r)}const Gd=new Ae(""),xg=new Ae("",{providedIn:"root",factory:()=>!1});let io;function Xd(t){return function Pa(){if(void 0===io&&(io=null,Ce.trustedTypes))try{io=Ce.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return io}()?.createScriptURL(t)||t}class Kd{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Lf})`}}function Pr(t){return t instanceof Kd?t.changingThisBreaksApplicationSecurity:t}function oo(t,r){const s=function Yd(t){return t instanceof Kd&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Lf})`)}return s===r}const Ub=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var uo=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(uo||{});function Hg(t){const r=as();return r?r.sanitize(uo.URL,t)||"":oo(t,"URL")?Pr(t):function ka(t){return(t=String(t)).match(Ub)?t:"unsafe:"+t}(ce(t))}function $g(t){const r=as();if(r)return Xd(r.sanitize(uo.RESOURCE_URL,t)||"");if(oo(t,"ResourceURL"))return Xd(Pr(t));throw new Q(904,!1)}function zg(t,r,s){return function Yb(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?$g:Hg}(r,s)(t)}function as(){const t=F();return t&&t[fr].sanitizer}const bc=/^>|^->|<!--|-->|--!>|<!-$/g,ho=/(<|>)/g,nC="\u200b$1\u200b";function An(t){return t instanceof Function?t():t}function Ln(t){return"browser"===(t??re(ln)).get(lc)}var ls=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ls||{});let Dc;function ah(t,r){return Dc(t,r)}function cs(t,r,s,l,u){if(null!=l){let h,p=!1;Xe(l)?h=l:Rt(l)&&(p=!0,l=l[gt]);const m=Se(l);0===t&&null!==s?null==u?vr(r,s,m):us(r,s,m,u||null,!0):1===t&&null!==s?us(r,s,m,u||null,!0):2===t?go(r,m,p):3===t&&r.destroyNode(m),null!=h&&function lm(t,r,s,l,u){const h=s[Ir];h!==Se(s)&&cs(r,t,l,h,u);for(let m=Mt;m<s.length;m++){const b=s[m];vh(b[$],b,t,r,l,h)}}(r,t,h,s,u)}}function Ba(t,r){return t.createText(r)}function Cc(t,r){return t.createComment(function Gg(t){return t.replace(bc,r=>r.replace(ho,nC))}(r))}function Ua(t,r,s){return t.createElement(r,s)}function lh(t,r){r[fr].changeDetectionScheduler?.notify(9),vh(t,r,r[ye],2,null,null)}function em(t,r){const s=t[Ps],l=r[Tt];(Rt(l)||r[ht]!==l[Tt][ht])&&(t[ue]|=ta.HasTransplantedViews),null===s?t[Ps]=[r]:s.push(r)}function ch(t,r){const s=t[Ps],l=s.indexOf(r);s.splice(l,1)}function Va(t,r){if(t.length<=Mt)return;const s=Mt+r,l=t[s];if(l){const u=l[Wi];null!==u&&u!==t&&ch(u,l),r>0&&(t[s-1][hr]=l[hr]);const h=Il(t,Mt+r);!function ow(t,r){lh(t,r),r[gt]=null,r[Kt]=null}(l[$],l);const p=h[Hr];null!==p&&p.detachView(h[$]),l[Tt]=null,l[hr]=null,l[ue]&=-129}return l}function Ha(t,r){if(!(256&r[ue])){const s=r[ye];s.destroyNode&&vh(t,r,s,3,null,null),function Ac(t){let r=t[Jo];if(!r)return uh(t[$],t);for(;r;){let s=null;if(Rt(r))s=r[Jo];else{const l=r[Mt];l&&(s=l)}if(!s){for(;r&&!r[hr]&&r!==t;)Rt(r)&&uh(r[$],r),r=r[Tt];null===r&&(r=t),Rt(r)&&uh(r[$],r),s=r&&r[hr]}r=s}}(r)}}function uh(t,r){if(256&r[ue])return;const s=X(null);try{r[ue]&=-129,r[ue]|=256,r[Xn]&&Ui(r[Xn]),function tm(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let l=0;l<s.length;l+=2){const u=r[s[l]];if(!(u instanceof Hs)){const h=s[l+1];if(Array.isArray(h))for(let p=0;p<h.length;p+=2){const m=u[h[p]],b=h[p+1];ft(4,m,b);try{b.call(m)}finally{ft(5,m,b)}}else{ft(4,u,h);try{h.call(u)}finally{ft(5,u,h)}}}}}(t,r),function $a(t,r){const s=t.cleanup,l=r[fi];if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const p=s[h+3];p>=0?l[p]():l[-p].unsubscribe(),h+=2}else s[h].call(l[s[h+1]]);null!==l&&(r[fi]=null);const u=r[pi];if(null!==u){r[pi]=null;for(let h=0;h<u.length;h++)(0,u[h])()}}(t,r),1===r[$].type&&r[ye].destroy();const l=r[Wi];if(null!==l&&Xe(r[Tt])){l!==r[Tt]&&ch(l,r);const u=r[Hr];null!==u&&u.detachView(t)}Ei(r)}finally{X(s)}}function dh(t,r,s){return function nm(t,r,s){let l=r;for(;null!==l&&168&l.type;)l=(r=l).parent;if(null===l)return s[gt];{const{componentOffset:u}=l;if(u>-1){const{encapsulation:h}=t.data[l.directiveStart+u];if(h===di.None||h===di.Emulated)return null}return pn(l,s)}}(t,r.parent,s)}function us(t,r,s,l,u){t.insertBefore(r,s,l,u)}function vr(t,r,s){t.appendChild(r,s)}function rm(t,r,s,l,u){null!==l?us(t,r,s,l,u):vr(t,r,s)}function hh(t,r){return t.parentNode(r)}let am,om=function sm(t,r,s){return 40&t.type?pn(t,s):null};function Sc(t,r,s,l){const u=dh(t,l,r),h=r[ye],m=function im(t,r,s){return om(t,r,s)}(l.parent||r[Kt],l,r);if(null!=u)if(Array.isArray(s))for(let b=0;b<s.length;b++)rm(h,u,s[b],m,!1);else rm(h,u,s,m,!1);void 0!==am&&am(h,l,r,s,u)}function Zr(t,r){if(null!==r){const s=r.type;if(3&s)return pn(r,t);if(4&s)return gh(-1,t[r.index]);if(8&s){const l=r.child;if(null!==l)return Zr(t,l);{const u=t[r.index];return Xe(u)?gh(-1,u):Se(u)}}if(128&s)return Zr(t,r.next);if(32&s)return ah(r,t)()||Se(t[r.index]);{const l=ph(t,r);return null!==l?Array.isArray(l)?l[0]:Zr(gn(t[ht]),l):Zr(t,r.next)}}return null}function ph(t,r){return null!==r?t[ht][Kt].projection[r.projection]:null}function gh(t,r){const s=Mt+t+1;if(s<r.length){const l=r[s],u=l[$].firstChild;if(null!==u)return Zr(l,u)}return r[Ir]}function go(t,r,s){t.removeChild(null,r,s)}function yr(t){t.textContent=""}function mh(t,r,s,l,u,h,p){for(;null!=s;){if(128===s.type){s=s.next;continue}const m=l[s.index],b=s.type;if(p&&0===r&&(m&&cn(Se(m),l),s.flags|=2),32&~s.flags)if(8&b)mh(t,r,s.child,l,u,h,!1),cs(r,t,u,m,h);else if(32&b){const E=ah(s,l);let C;for(;C=E();)cs(r,t,u,C,h);cs(r,t,u,m,h)}else 16&b?uw(t,r,l,s,u,h):cs(r,t,u,m,h);s=p?s.projectionNext:s.next}}function vh(t,r,s,l,u,h){mh(s,l,t.firstChild,r,u,h,!1)}function uw(t,r,s,l,u,h){const p=s[ht],b=p[Kt].projection[l.projection];if(Array.isArray(b))for(let E=0;E<b.length;E++)cs(r,t,u,b[E],h);else{let E=b;const C=p[Tt];ba(l)&&(E.flags|=128),mh(t,r,E,C,u,h,!0)}}function um(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function dm(t,r,s){const{mergedAttrs:l,classes:u,styles:h}=s;null!==l&&np(t,r,l),null!==u&&um(t,r,u),null!==h&&function yh(t,r,s){t.setAttribute(r,"style",s)}(t,r,h)}const Ie={};function bh(t=1){dw(Pe(),F(),an()+t,!1)}function dw(t,r,s,l){if(!l)if(3&~r[ue]){const h=t.preOrderHooks;null!==h&&pa(r,h,0,s)}else{const h=t.preOrderCheckHooks;null!==h&&fa(r,h,s)}js(s)}function za(t,r=Fe.Default){const s=F();return null===s?dn(t,r):nb(Qe(),s,ve(t),r)}function hw(t,r,s,l,u,h){const p=X(null);try{let m=null;u&hi.SignalBased&&(m=r[l][Y]),null!==m&&void 0!==m.transformFn&&(h=m.transformFn(h)),u&hi.HasDecoratorInputTransform&&(h=t.inputTransforms[l].call(r,h)),null!==t.setInput?t.setInput(r,m,h,s,l):Jt(r,m,l,h)}finally{X(p)}}function wh(t,r,s,l,u,h,p,m,b,E,C){const I=r.blueprint.slice();return I[gt]=u,I[ue]=204|l,(null!==E||t&&2048&t[ue])&&(I[ue]|=2048),nd(I),I[Tt]=I[On]=t,I[lt]=s,I[fr]=p||t&&t[fr],I[ye]=m||t&&t[ye],I[_t]=b||t&&t[_t]||null,I[Kt]=h,I[Ns]=function xe(){return wb++}(),I[hn]=C,I[Ol]=E,I[ht]=2==r.type?t[ht]:I,I}function mo(t,r,s,l,u){let h=t.data[r];if(null===h)h=function hm(t,r,s,l,u){const h=xp(),p=Vl(),b=t.data[r]=function bC(t,r,s,l,u,h){let p=r?r.injectorIndex:-1,m=0;return zr()&&(m|=128),{type:s,index:l,insertBeforeIndex:null,injectorIndex:p,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:m,providerIndexes:0,value:u,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?h:h&&h.parent,s,r,l,u);return null===t.firstChild&&(t.firstChild=b),null!==h&&(p?null==h.child&&null!==b.parent&&(h.child=b):null===h.next&&(h.next=b,b.prev=h)),b}(t,r,s,l,u),function Gy(){return fe.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=s,h.value=l,h.attrs=u;const p=function ua(){const t=fe.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();h.injectorIndex=null===p?-1:p.injectorIndex}return Tr(h,!0),h}function Ic(t,r,s,l){if(0===s)return-1;const u=r.length;for(let h=0;h<s;h++)r.push(l),t.blueprint.push(l),t.data.push(null);return u}function fw(t,r,s,l,u){const h=an(),p=2&l;try{js(-1),p&&r.length>ie&&dw(t,r,ie,!1),ft(p?2:0,u),s(l,u)}finally{js(h),ft(p?3:1,u)}}function fm(t,r,s){if(Ll(r)){const l=X(null);try{const h=r.directiveEnd;for(let p=r.directiveStart;p<h;p++){const m=t.data[p];m.contentQueries&&m.contentQueries(1,s[p],p)}}finally{X(l)}}}function pm(t,r,s){od()&&(function Ew(t,r,s,l){const u=s.directiveStart,h=s.directiveEnd;gi(s)&&function _C(t,r,s){const l=pn(r,t),u=pw(s);let p=16;s.signals?p=4096:s.onPush&&(p=64);const m=xc(t,wh(t,u,null,p,l,r,null,t[fr].rendererFactory.createRenderer(l,s),null,null,null));t[r.index]=m}(r,s,t.data[u+s.componentOffset]),t.firstCreatePass||Xl(s,r),cn(l,r);const p=s.initialInputs;for(let m=u;m<h;m++){const b=t.data[m],E=wi(r,t,m,s);cn(E,r),null!==p&&Ii(0,m-u,E,b,0,p),Kn(b)&&(on(s.index,r)[lt]=wi(r,t,m,s))}}(t,r,s,pn(s,r)),!(64&~s.flags)&&wm(t,r,s))}function gm(t,r,s=pn){const l=r.localNames;if(null!==l){let u=r.index+1;for(let h=0;h<l.length;h+=2){const p=l[h+1],m=-1===p?s(r,t):t[p];t[u++]=m}}}function pw(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=mm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function mm(t,r,s,l,u,h,p,m,b,E,C){const I=ie+l,R=I+u,N=function vm(t,r){const s=[];for(let l=0;l<r;l++)s.push(l<t?null:Ie);return s}(I,R),P="function"==typeof E?E():E;return N[$]={type:t,blueprint:N,template:s,queries:null,viewQuery:m,declTNode:r,data:N.slice().fill(null,I),bindingStartIndex:I,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:b,consts:P,incompleteFirstPass:!1,ssrId:C}}let gw=()=>null;function mC(t){nc(t)?yr(t):function Ig(t){const r=Ci(),s=r.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(h){const p=function Vd(t){return t.textContent?.replace(/\s/gm,"")}(h);return"ngetn"===p||"ngtns"===p?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let l;const u=[];for(;l=s.nextNode();)u.push(l);for(const h of u)"ngetn"===h.textContent?h.replaceWith(r.createTextNode("")):h.remove()}(t)}function ym(t,r,s,l,u){for(let h in r){if(!r.hasOwnProperty(h))continue;const p=r[h];if(void 0===p)continue;l??={};let m,b=hi.None;Array.isArray(p)?(m=p[0],b=p[1]):m=p;let E=h;if(null!==u){if(!u.hasOwnProperty(h))continue;E=u[h]}0===t?Tc(l,s,E,m,b):Tc(l,s,E,m)}return l}function Tc(t,r,s,l,u){let h;t.hasOwnProperty(s)?(h=t[s]).push(r,l):h=t[s]=[r,l],void 0!==u&&h.push(u)}function Mc(t,r,s,l){if(od()){const u=null===l?null:{"":-1},h=function Ee(t,r){const s=t.directiveRegistry;let l=null,u=null;if(s)for(let h=0;h<s.length;h++){const p=s[h];if(my(r,p.selectors,!1))if(l||(l=[]),Kn(p))if(null!==p.findHostDirectiveDefs){const m=[];u=u||new Map,p.findHostDirectiveDefs(p,m,u),l.unshift(...m,p),en(t,r,m.length)}else l.unshift(p),en(t,r,0);else u=u||new Map,p.findHostDirectiveDefs?.(p,l,u),l.push(p)}return null===l?null:[l,u]}(t,s);let p,m;null===h?p=m=null:[p,m]=h,null!==p&&bm(t,r,s,p,u,m),u&&function _m(t,r,s){if(r){const l=t.localNames=[];for(let u=0;u<r.length;u+=2){const h=s[r[u+1]];if(null==h)throw new Q(-301,!1);l.push(r[u],h)}}}(s,l,u)}s.mergedAttrs=qo(s.mergedAttrs,s.attrs)}function bm(t,r,s,l,u,h){for(let E=0;E<l.length;E++)Yl(Xl(s,r),t,l[E].type);!function Dw(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,l.length);for(let E=0;E<l.length;E++){const C=l[E];C.providersResolver&&C.providersResolver(C)}let p=!1,m=!1,b=Ic(t,r,l.length,null);for(let E=0;E<l.length;E++){const C=l[E];s.mergedAttrs=qo(s.mergedAttrs,C.hostAttrs),Rc(t,s,r,b,C),_h(b,C,u),null!==C.contentQueries&&(s.flags|=4),(null!==C.hostBindings||null!==C.hostAttrs||0!==C.hostVars)&&(s.flags|=64);const I=C.type.prototype;!p&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),p=!0),!m&&(I.ngOnChanges||I.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),m=!0),b++}!function mw(t,r,s){const u=r.directiveEnd,h=t.data,p=r.attrs,m=[];let b=null,E=null;for(let C=r.directiveStart;C<u;C++){const I=h[C],R=s?s.get(I):null,P=R?R.outputs:null;b=ym(0,I.inputs,C,b,R?R.inputs:null),E=ym(1,I.outputs,C,E,P);const V=null===b||null===p||Uu(r)?null:Cw(b,C,p);m.push(V)}null!==b&&(b.hasOwnProperty("class")&&(r.flags|=8),b.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=m,r.inputs=b,r.outputs=E}(t,s,h)}function wm(t,r,s){const l=s.directiveStart,u=s.directiveEnd,h=s.index,p=function Wy(){return fe.lFrame.currentDirectiveIndex}();try{js(h);for(let m=l;m<u;m++){const b=t.data[m],E=r[m];Hl(m),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&Ga(b,E)}}finally{js(-1),Hl(p)}}function Ga(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function en(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function _h(t,r,s){if(s){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)s[r.exportAs[l]]=t;Kn(r)&&(s[""]=t)}}function Rc(t,r,s,l,u){t.data[l]=u;const h=u.factory||(u.factory=Ts(u.type)),p=new Hs(h,Kn(u),za);t.blueprint[l]=p,s[l]=p,function ww(t,r,s,l,u){const h=u.hostBindings;if(h){let p=t.hostBindingOpCodes;null===p&&(p=t.hostBindingOpCodes=[]);const m=~r.index;(function _w(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(p)!=m&&p.push(m),p.push(s,l,h)}}(t,r,l,Ic(t,s,u.hostVars,Ie),u)}function Jr(t,r,s,l,u,h){const p=pn(t,r);!function vn(t,r,s,l,u,h,p){if(null==h)t.removeAttribute(r,u,s);else{const m=null==p?ce(h):p(h,l||"",u);t.setAttribute(r,u,m,s)}}(r[ye],p,h,t.value,s,l,u)}function Ii(t,r,s,l,u,h){const p=h[r];if(null!==p)for(let m=0;m<p.length;)hw(l,s,p[m++],p[m++],p[m++],p[m++])}function Cw(t,r,s){let l=null,u=0;for(;u<s.length;){const h=s[u];if(0!==h)if(5!==h){if("number"==typeof h)break;if(t.hasOwnProperty(h)){null===l&&(l=[]);const p=t[h];for(let m=0;m<p.length;m+=3)if(p[m]===r){l.push(h,p[m+1],p[m+2],s[u+1]);break}}u+=2}else u+=2;else u+=4}return l}function Re(t,r,s,l){return[t,!0,0,r,null,l,null,s,null,null]}function Ue(t,r){const s=t.contentQueries;if(null!==s){const l=X(null);try{for(let u=0;u<s.length;u+=2){const p=s[u+1];if(-1!==p){const m=t.data[p];da(s[u]),m.contentQueries(2,r[p],p)}}}finally{X(l)}}}function xc(t,r){return t[Jo]?t[_p][hr]=r:t[Jo]=r,t[_p]=r,r}function Yt(t,r,s){da(0);const l=X(null);try{r(t,s)}finally{X(l)}}function xt(t){return t[fi]??=[]}function Aw(t){return t.cleanup??=[]}function Dh(t,r){const s=t[_t],l=s?s.get(Xr,null):null;l&&l.handleError(r)}function ds(t,r,s,l,u){for(let h=0;h<s.length;){const p=s[h++],m=s[h++],b=s[h++];hw(t.data[p],r[p],l,m,b,u)}}function EC(t,r){const s=on(r,t),l=s[$];!function DC(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(l,s);const u=s[gt];null!==u&&null===s[hn]&&(s[hn]=Qr(u,s[_t])),vo(l,s,s[lt])}function vo(t,r,s){Fp(r);try{const l=t.viewQuery;null!==l&&Yt(1,l,s);const u=t.template;null!==u&&fw(t,r,u,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),r[Hr]?.finishViewCreation(t),t.staticContentQueries&&Ue(t,r),t.staticViewQueries&&Yt(2,t.viewQuery,s);const h=t.components;null!==h&&function br(t,r){for(let s=0;s<r.length;s++)EC(t,r[s])}(r,h)}catch(l){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),l}finally{r[ue]&=-5,zl()}}function hs(t,r){return!r||null===r.firstChild||ba(t)}function Te(t,r,s,l,u=!1){for(;null!==s;){if(128===s.type){s=u?s.projectionNext:s.next;continue}const h=r[s.index];null!==h&&l.push(Se(h)),Xe(h)&&Je(h,l);const p=s.type;if(8&p)Te(t,r,s.child,l);else if(32&p){const m=ah(s,r);let b;for(;b=m();)l.push(b)}else if(16&p){const m=ph(r,s);if(Array.isArray(m))l.push(...m);else{const b=gn(r[ht]);Te(b[$],b,m,l,!0)}}s=u?s.projectionNext:s.next}return l}function Je(t,r){for(let s=Mt;s<t.length;s++){const l=t[s],u=l[$].firstChild;null!==u&&Te(l[$],l,u,r)}t[Ir]!==t[gt]&&r.push(t[Ir])}let At=[];const Mi={...J,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{gr(t.lView)},consumerOnSignalRead(){this.lView[Xn]=this}},Ah={...J,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let r=gn(t.lView);for(;r&&!Sh(r[$]);)r=gn(r);r&&rd(r)},consumerOnSignalRead(){this.lView[Xn]=this}};function Sh(t){return 2!==t.type}const qa=100;function fs(t,r=!0,s=0){const l=t[fr],u=l.rendererFactory;u.begin?.();try{!function Mw(t,r){const s=zy();try{Pp(!0),Ih(t,r);let l=0;for(;Ul(t);){if(l===qa)throw new Q(103,!1);l++,Ih(t,1)}}finally{Pp(s)}}(t,s)}catch(p){throw r&&Dh(t,p),p}finally{u.end?.(),l.inlineEffectRunner?.flush()}}function Em(t,r,s,l){const u=r[ue];if(!(256&~u))return;r[fr].inlineEffectRunner?.flush(),Fp(r);let m=!0,b=null,E=null;Sh(t)?(E=function Iw(t){return t[Xn]??function Tw(t){const r=At.pop()??Object.create(Mi);return r.lView=t,r}(t)}(r),b=Lt(E)):null===function me(){return K}()?(m=!1,E=function Ch(t){const r=t[Xn]??Object.create(Ah);return r.lView=t,r}(r),b=Lt(E)):r[Xn]&&(Ui(r[Xn]),r[Xn]=null);try{nd(r),function Op(t){return fe.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&fw(t,r,s,2,l);const C=!(3&~u);if(C){const N=t.preOrderCheckHooks;null!==N&&fa(r,N,null)}else{const N=t.preOrderHooks;null!==N&&pa(r,N,0,null),Us(r,0)}if(function Rw(t){for(let r=bg(t);null!==r;r=is(r)){if(!(r[ue]&ta.HasTransplantedViews))continue;const s=r[Ps];for(let l=0;l<s.length;l++)rd(s[l])}}(r),ps(r,0),null!==t.contentQueries&&Ue(t,r),C){const N=t.contentCheckHooks;null!==N&&fa(r,N)}else{const N=t.contentHooks;null!==N&&pa(r,N,1),Us(r,1)}!function fC(t,r){const s=t.hostBindingOpCodes;if(null!==s)try{for(let l=0;l<s.length;l++){const u=s[l];if(u<0)js(~u);else{const h=u,p=s[++l],m=s[++l];ud(p,h),m(2,r[h])}}}finally{js(-1)}}(t,r);const I=t.components;null!==I&&Dm(r,I,0);const R=t.viewQuery;if(null!==R&&Yt(2,R,l),C){const N=t.viewCheckHooks;null!==N&&fa(r,N)}else{const N=t.viewHooks;null!==N&&pa(r,N,2),Us(r,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[kl]){for(const N of r[kl])N();r[kl]=null}r[ue]&=-73}catch(C){throw gr(r),C}finally{null!==E&&(function Wt(t,r){if(X(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(ut(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)pe(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(E,b),m&&function je(t){t.lView[Xn]!==t&&(t.lView=null,At.push(t))}(E)),zl()}}function ps(t,r){for(let s=bg(t);null!==s;s=is(s))for(let l=Mt;l<s.length;l++)Nc(s[l],r)}function CC(t,r,s){Nc(on(r,t),s)}function Nc(t,r){Sp(t)&&Ih(t,r)}function Ih(t,r){const l=t[$],u=t[ue],h=t[Xn];let p=!!(0===r&&16&u);if(p||=!!(64&u&&0===r),p||=!!(1024&u),p||=!(!h?.dirty||!Hn(h)),p||=!1,h&&(h.dirty=!1),t[ue]&=-9217,p)Em(l,t,l.template,t[lt]);else if(8192&u){ps(t,1);const m=l.components;null!==m&&Dm(t,m,1)}}function Dm(t,r,s){for(let l=0;l<r.length;l++)CC(t,r[l],s)}function Vt(t,r){const s=zy()?64:1088;for(t[fr].changeDetectionScheduler?.notify(r);t;){t[ue]|=s;const l=gn(t);if(ra(t)&&!l)return t;t=l}return null}class xi{get rootNodes(){const r=this._lView,s=r[$];return Te(s,r,s.firstChild,[])}constructor(r,s,l=!0){this._lView=r,this._cdRefInjectingView=s,this.notifyErrorHandler=l,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[lt]}set context(r){this._lView[lt]=r}get destroyed(){return!(256&~this._lView[ue])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Tt];if(Xe(r)){const s=r[8],l=s?s.indexOf(this):-1;l>-1&&(Va(r,l),Il(s,l))}this._attachedToViewContainer=!1}Ha(this._lView[$],this._lView)}onDestroy(r){ks(this._lView,r)}markForCheck(){Vt(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ue]&=-129}reattach(){Xi(this._lView),this._lView[ue]|=128}detectChanges(){this._lView[ue]|=1024,fs(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const r=ra(this._lView),s=this._lView[Wi];null!==s&&!r&&ch(s,this._lView),lh(this._lView[$],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=r;const s=ra(this._lView),l=this._lView[Wi];null!==l&&!s&&em(l,this._lView),Xi(this._lView)}}let se=(()=>{class t{static{this.__NG_ELEMENT_ID__=Nw}}return t})();const xw=se,AC=class extends xw{constructor(r,s,l){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,l){const u=function yo(t,r,s,l){const u=X(null);try{const h=r.tView,b=wh(t,h,s,4096&t[ue]?4096:16,null,r,null,null,l?.injector??null,l?.embeddedViewInjector??null,l?.dehydratedView??null);b[Wi]=t[r.index];const C=t[Hr];return null!==C&&(b[Hr]=C.createEmbeddedView(h)),vo(h,b,s),b}finally{X(u)}}(this._declarationLView,this._declarationTContainer,r,{embeddedViewInjector:s,dehydratedView:l});return new xi(u)}};function Nw(){return Th(Qe(),F())}function Th(t,r){return 4&t.type?new AC(r,t,er(t,r)):null}const xh=new RegExp(`^(\\d+)*(${Qs}|${Ld})*(.*)`);function Nh(t){return t.index-ie}function ms(t,r,s,l){const u=Nh(l);let h=function wr(t,r){const s=t.i18nNodes;if(s)return s.get(r)}(t,u);if(void 0===h){const p=t.data[dc];if(p?.[u])h=function Nm(t,r){const[s,...l]=function Rm(t){const r=t.match(xh),[s,l,u,h]=r,p=l?parseInt(l,10):u,m=[];for(const[b,E,C]of h.matchAll(/(f|n)(\d*)/g)){const I=parseInt(C,10)||1;m.push(E,I)}return[p,...m]}(t);let u;u=s===Ld?r[ht][gt]:s===Qs?function Yg(t){return t.ownerDocument.body}(r[ht][gt]):Se(r[Number(s)+ie]);return function $w(t,r){let s=t;for(let l=0;l<r.length;l+=2){const u=r[l],h=r[l+1];for(let p=0;p<h;p++)switch(u){case Zs.FirstChild:s=s.firstChild;break;case Zs.NextSibling:s=s.nextSibling}}return s}(u,l)}(p[u],s);else if(r.firstChild===l)h=t.firstChild;else{const m=null===l.prev,b=l.prev??l.parent;if(function Oe(t){return!t.prev&&8===t.parent?.type}(l))h=$d(t,Nh(l.parent));else{let E=pn(b,s);if(m)h=E.firstChild;else{const C=Nh(b),I=$d(t,C);h=2===b.type&&I?Ao(Mg(t,C)+1,I):E.nextSibling}}}}return h}function Ao(t,r){let s=r;for(let l=0;l<t;l++)s=s.nextSibling;return s}let Oh=!1;function jm(t,r,s){for(const l of s.node.cases[s.case]){const u=r.get(l.index-ie);u&&go(t,u,!1)}}function Vh(t){const r=t[ea]??[],l=t[Tt][ye];for(const u of r)Zw(u,l);t[ea]=Ge}function Zw(t,r){let s=0,l=t.firstChild;if(l){const u=t.data[eo];for(;s<u;){const h=l.nextSibling;go(r,l,!1),l=h,s++}}}function Hh(t){Vh(t);const r=t[gt];Rt(r)&&Ja(r);for(let s=Mt;s<t.length;s++)Ja(t[s])}function Ja(t){!function MC(t){const r=t[hn];if(r){const{i18nNodes:s,dehydratedIcuData:l}=r;if(s&&l){const u=t[ye];for(const h of l.values())jm(u,s,h)}r.i18nNodes=void 0,r.dehydratedIcuData=void 0}}(t);const r=t[$];for(let s=ie;s<r.bindingStartIndex;s++)Xe(t[s])?Hh(t[s]):Rt(t[s])&&Ja(t[s])}let Bm=()=>null;function Bc(t,r){const s=t[ea];return r&&null!==s&&0!==s.length?s[0].data[Ta]===r?s.shift():(Vh(t),null):null}function Fi(t,r){return Bm(t,r)}class ys{}const bs=new Ae("",{providedIn:"root",factory:()=>!1}),el=new Ae(""),Vc=new Ae("");class t_{}class Um{}class nl{resolveComponentFactory(r){throw function n_(t){const r=Error(`No component factory found for ${Bt(t)}.`);return r.ngComponent=t,r}(r)}}class ws{static{this.NULL=new nl}}class Et{}let Vm=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function sr(){const t=F(),s=on(Qe().index,t);return(Rt(s)?s:t)[ye]}()}}return t})(),rl=(()=>{class t{static{this.\u0275prov=tt({token:t,providedIn:"root",factory:()=>null})}}return t})();function Bn(t){return!!Xt(t)}function _s(t,r,s){let l=s?t.styles:null,u=s?t.classes:null,h=0;if(null!==r)for(let p=0;p<r.length;p++){const m=r[p];"number"==typeof m?h=m:1==h?u=gl(u,m):2==h&&(l=gl(l,m+": "+r[++p]+";"))}s?t.styles=l:t.stylesWithoutHost=l,s?t.classes=u:t.classesWithoutHost=u}class qh extends ws{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Ne(r);return new Io(s,this.ngModule)}}function Xh(t,r){const s=[];for(const l in t){if(!t.hasOwnProperty(l))continue;const u=t[l];if(void 0===u)continue;const h=Array.isArray(u),p=h?u[0]:u;s.push(r?{propName:p,templateName:l,isSignal:!!((h?u[1]:hi.None)&hi.SignalBased)}:{propName:p,templateName:l})}return s}class Io extends Um{get inputs(){const r=this.componentDef,s=r.inputTransforms,l=Xh(r.inputs,!0);if(null!==s)for(const u of l)s.hasOwnProperty(u.propName)&&(u.transform=s[u.propName]);return l}get outputs(){return Xh(this.componentDef.outputs,!1)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function fD(t){return t.map(hD).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,l,u){const h=X(null);try{let p=(u=u||this.ngModule)instanceof dr?u:u?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const m=p?new Yi(r,p):r,b=m.get(Et,null);if(null===b)throw new Q(407,!1);const I={rendererFactory:b,sanitizer:m.get(rl,null),inlineEffectRunner:null,changeDetectionScheduler:m.get(ys,null)},R=b.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",P=l?function pC(t,r,s,l){const h=l.get(xg,!1)||s===di.ShadowDom,p=t.selectRootElement(r,h);return function gC(t){gw(t)}(p),p}(R,l,this.componentDef.encapsulation,m):Ua(R,N,function $m(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(N));let V=512;this.componentDef.signals?V|=4096:this.componentDef.onPush||(V|=16);let G=null;null!==P&&(G=Qr(P,m,!0));const q=mm(0,null,null,1,0,null,null,null,null,null,null),U=wh(null,q,null,V,null,null,I,R,m,null,G);Fp(U);let _e,Ve,ct=null;try{const Gt=this.componentDef;let lr,gu=null;Gt.findHostDirectiveDefs?(lr=[],gu=new Map,Gt.findHostDirectiveDefs(Gt,lr,gu),lr.push(Gt)):lr=[Gt];const II=function a_(t,r){const s=t[$],l=ie;return t[l]=r,mo(s,l,2,"#host",null)}(U,P);ct=function Kh(t,r,s,l,u,h,p){const m=u[$];!function Yh(t,r,s,l){for(const u of t)r.mergedAttrs=qo(r.mergedAttrs,u.hostAttrs);null!==r.mergedAttrs&&(_s(r,r.mergedAttrs,!0),null!==s&&dm(l,s,r))}(l,t,r,p);let b=null;null!==r&&(b=Qr(r,u[_t]));const E=h.rendererFactory.createRenderer(r,s);let C=16;s.signals?C=4096:s.onPush&&(C=64);const I=wh(u,pw(s),null,C,u[t.index],t,h,E,null,null,b);return m.firstCreatePass&&en(m,t,l.length-1),xc(u,I),u[t.index]=I}(II,P,Gt,lr,U,I,R),Ve=la(q,ie),P&&function c_(t,r,s,l){if(l)np(t,s,["ng-version","18.2.13"]);else{const{attrs:u,classes:h}=function op(t){const r=[],s=[];let l=1,u=2;for(;l<t.length;){let h=t[l];if("string"==typeof h)2===u?""!==h&&r.push(h,t[++l]):8===u&&s.push(h);else{if(!Sr(u))break;u=h}l++}return{attrs:r,classes:s}}(r.selectors[0]);u&&np(t,s,u),h&&h.length>0&&um(t,s,h.join(" "))}}(R,Gt,P,l),void 0!==s&&function u_(t,r,s){const l=t.projection=[];for(let u=0;u<r.length;u++){const h=s[u];l.push(null!=h?Array.from(h):null)}}(Ve,this.ngContentSelectors,s),_e=function l_(t,r,s,l,u,h){const p=Qe(),m=u[$],b=pn(p,u);bm(m,u,p,s,null,l);for(let C=0;C<s.length;C++)cn(wi(u,m,p.directiveStart+C,p),u);wm(m,u,p),b&&cn(b,u);const E=wi(u,m,p.directiveStart+p.componentOffset,p);if(t[lt]=u[lt]=E,null!==h)for(const C of h)C(E,r);return fm(m,p,u),E}(ct,Gt,lr,gu,U,[d_]),vo(q,U,null)}catch(Gt){throw null!==ct&&Ei(ct),Ei(U),Gt}finally{zl()}return new o_(this.componentType,_e,er(Ve,U),U,Ve)}finally{X(h)}}}class o_ extends t_{constructor(r,s,l,u,h){super(),this.location=l,this._rootLView=u,this._tNode=h,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new xi(u,void 0,!1),this.componentType=r}setInput(r,s){const l=this._tNode.inputs;let u;if(null!==l&&(u=l[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const h=this._rootLView;ds(h[$],h,u,r,s),this.previousInputValues.set(r,s),Vt(on(this._tNode.index,h),1)}}get injector(){return new Ut(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function d_(){const t=Qe();ha(F()[$],t)}let $c=(()=>{class t{static{this.__NG_ELEMENT_ID__=h_}}return t})();function h_(){return Wm(Qe(),F())}const f_=$c,zm=class extends f_{constructor(r,s,l){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=l}get element(){return er(this._hostTNode,this._hostLView)}get injector(){return new Ut(this._hostTNode,this._hostLView)}get parentInjector(){const r=Kl(this._hostTNode,this._hostLView);if(fd(r)){const s=Qi(r,this._hostLView),l=ga(r);return new Ut(s[$].data[l+8],s)}return new Ut(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Gm(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-Mt}createEmbeddedView(r,s,l){let u,h;"number"==typeof l?u=l:null!=l&&(u=l.index,h=l.injector);const p=Fi(this._lContainer,r.ssrId),m=r.createEmbeddedViewImpl(s||{},h,p);return this.insertImpl(m,u,hs(this._hostTNode,p)),m}createComponent(r,s,l,u,h){const p=r&&!function Zo(t){return"function"==typeof t}(r);let m;if(p)m=s;else{const P=s||{};m=P.index,l=P.injector,u=P.projectableNodes,h=P.environmentInjector||P.ngModuleRef}const b=p?r:new Io(Ne(r)),E=l||this.parentInjector;if(!h&&null==b.ngModule){const V=(p?E:this.parentInjector).get(dr,null);V&&(h=V)}const C=Ne(b.componentType??{}),I=Fi(this._lContainer,C?.id??null),N=b.create(E,u,I?.firstChild??null,h);return this.insertImpl(N.hostView,m,hs(this._hostTNode,I)),N}insert(r,s){return this.insertImpl(r,s,!0)}insertImpl(r,s,l){const u=r._lView;if(function Fy(t){return Xe(t[Tt])}(u)){const m=this.indexOf(r);if(-1!==m)this.detach(m);else{const b=u[Tt],E=new zm(b,b[Kt],b[Tt]);E.detach(E.indexOf(r))}}const h=this._adjustIndex(s),p=this._lContainer;return function bo(t,r,s,l=!0){const u=r[$];if(function lw(t,r,s,l){const u=Mt+l,h=s.length;l>0&&(s[u-1][hr]=r),l<h-Mt?(r[hr]=s[u],Qf(s,Mt+l,r)):(s.push(r),r[hr]=null),r[Tt]=s;const p=r[Wi];null!==p&&s!==p&&em(p,r);const m=r[Hr];null!==m&&m.insertView(t),Xi(r),r[ue]|=128}(u,r,t,s),l){const p=gh(s,t),m=r[ye],b=hh(m,t[Ir]);null!==b&&function aw(t,r,s,l,u,h){l[gt]=u,l[Kt]=r,vh(t,l,s,1,u,h)}(u,t[Kt],m,r,b,p)}const h=r[hn];null!==h&&null!==h.firstChild&&(h.firstChild=null)}(p,u,h,l),r.attachToViewContainerRef(),Qf(Qh(p),h,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Gm(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),l=Va(this._lContainer,s);l&&(Il(Qh(this._lContainer),s),Ha(l[$],l))}detach(r){const s=this._adjustIndex(r,-1),l=Va(this._lContainer,s);return l&&null!=Il(Qh(this._lContainer),s)?new xi(l):null}_adjustIndex(r,s=0){return r??this.length+s}};function Gm(t){return t[8]}function Qh(t){return t[8]||(t[8]=[])}function Wm(t,r){let s;const l=r[t.index];return Xe(l)?s=l:(s=Re(l,r,null,t),r[t.index]=s,xc(r,s)),qm(s,r,t,l),new zm(s,t,r)}let qm=Xm,tn=()=>!1;function Xm(t,r,s,l){if(t[Ir])return;let u;u=8&s.type?Se(l):function Tn(t,r){const s=t[ye],l=s.createComment(""),u=pn(r,t);return us(s,hh(s,u),l,function fh(t,r){return t.nextSibling(r)}(s,u),!1),l}(r,s),t[Ir]=u}function p_(t,r,s){if(t[Ir]&&t[ea])return!0;const l=s[hn],u=r.index-ie;if(!l||function wa(t){if(ba(t))return!0;let r=t.parent;for(;r;){if(ba(t)||ya(r))return!0;r=r.parent}return!1}(r)||ro(l,u))return!1;const p=$d(l,u),m=l.data[Js]?.[u],[b,E]=function Jw(t,r){const s=[];for(const l of r)for(let u=0;u<(l[Ai]??1);u++){const h={data:l,firstChild:null};l[eo]>0&&(h.firstChild=t,t=Ao(l[eo],t)),s.push(h)}return[t,s]}(p,m);return t[Ir]=b,t[ea]=E,!0}function g_(t,r,s,l){tn(t,s,r)||Xm(t,r,s,l)}class Zh{constructor(r){this.queryList=r,this.matches=null}clone(){return new Zh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jh{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const l=null!==r.contentQueries?r.contentQueries[0]:s.length,u=[];for(let h=0;h<l;h++){const p=s.getByIndex(h);u.push(this.queries[p.indexInDeclarationView].clone())}return new Jh(u)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}finishViewCreation(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==af(r,s).matches&&this.queries[s].setDirty()}}class Km{constructor(r,s,l=null){this.flags=s,this.read=l,this.predicate="string"==typeof r?function ev(t){return t.split(",").map(r=>r.trim())}(r):r}}class ef{constructor(r=[]){this.queries=r}elementStart(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let l=0;l<this.length;l++){const u=null!==s?s.length:0,h=this.getByIndex(l).embeddedTView(r,u);h&&(h.indexInDeclarationView=l,null!==s?s.push(h):s=[h])}return null!==s?new ef(s):null}template(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class tf{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new tf(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1&~this.metadata.flags){const s=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let u=0;u<l.length;u++){const h=l[u];this.matchTNodeWithReadOption(r,s,v_(s,h)),this.matchTNodeWithReadOption(r,s,zs(s,r,h,!1,!1))}else l===se?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,zs(s,r,l,!1,!1))}matchTNodeWithReadOption(r,s,l){if(null!==l){const u=this.metadata.read;if(null!==u)if(u===Kr||u===$c||u===se&&4&s.type)this.addMatch(s.index,-2);else{const h=zs(s,r,u,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,l)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function v_(t,r){const s=t.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===r)return s[l+1];return null}function nf(t,r,s,l){return-1===s?function Ym(t,r){return 11&t.type?er(t,r):4&t.type?Th(t,r):null}(r,t):-2===s?function Qm(t,r,s){return s===Kr?er(r,t):s===se?Th(r,t):s===$c?Wm(r,t):void 0}(t,r,l):wi(t,t[$],s,r)}function Zm(t,r,s,l){const u=r[Hr].queries[l];if(null===u.matches){const h=t.data,p=s.matches,m=[];for(let b=0;null!==p&&b<p.length;b+=2){const E=p[b];m.push(E<0?null:nf(r,h[E],p[b+1],s.metadata.read))}u.matches=m}return u.matches}function rf(t,r,s,l){const u=t.queries.getByIndex(s),h=u.matches;if(null!==h){const p=Zm(t,r,u,s);for(let m=0;m<h.length;m+=2){const b=h[m];if(b>0)l.push(p[m/2]);else{const E=h[m+1],C=r[-b];for(let I=Mt;I<C.length;I++){const R=C[I];R[Wi]===R[Tt]&&rf(R[$],R,E,l)}if(null!==C[Ps]){const I=C[Ps];for(let R=0;R<I.length;R++){const N=I[R];rf(N[$],N,E,l)}}}}}return l}function sl(t,r,s,l){const u=Pe();if(u.firstCreatePass){const h=Qe();(function tv(t,r,s){null===t.queries&&(t.queries=new ef),t.queries.track(new tf(r,s))})(u,new Km(r,s,l),h.index),function Mo(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(u,t),!(2&~s)&&(u.staticContentQueries=!0)}return function Ht(t,r,s){const l=new _i(!(4&~s));return function yC(t,r,s,l){const u=xt(r);u.push(s),t.firstCreatePass&&Aw(t).push(l,u.length-1)}(t,r,l,l.destroy),(r[Hr]??=new Jh).queries.push(new Zh(l))-1}(u,F(),s)}function af(t,r){return t.queries.getByIndex(r)}function nv(t,r){const s=t[$],l=af(s,r);return l.crossesNgTemplate?rf(s,t,r,[]):Zm(s,t,l,r)}const lf=new Set;function Nt(t){lf.has(t)||(lf.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function fv(t){const r=t.inputConfig,s={};for(const l in r)if(r.hasOwnProperty(l)){const u=r[l];Array.isArray(u)&&u[3]&&(s[l]=u[3])}t.inputTransforms=s}class Oo{}class R_{}function QC(t,r){return new pv(t,r??null,[])}class pv extends Oo{constructor(r,s,l,u=!0){super(),this.ngModuleType=r,this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qh(this);const h=Xt(r);this._bootstrapComponents=An(h.bootstrap),this._r3Injector=ub(r,s,[{provide:Oo,useValue:this},{provide:ws,useValue:this.componentFactoryResolver},...l],Bt(r),new Set(["environment"])),u&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class gv extends R_{constructor(r){super(),this.moduleType=r}create(r){return new pv(this.moduleType,r,[])}}class x_ extends Oo{constructor(r){super(),this.componentFactoryResolver=new qh(this),this.instance=null;const s=new Xo([...r.providers,{provide:Oo,useValue:this},{provide:ws,useValue:this.componentFactoryResolver}],r.parent||qu(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function mv(t,r,s=null){return new x_({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}function gf(t){return!!vv(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function vv(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ot(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function ll(t){return!(32&~t.flags)}function Yc(t,r,s,l,u,h,p,m,b,E){const C=s+ie,I=r.firstCreatePass?function r0(t,r,s,l,u,h,p,m,b){const E=r.consts,C=mo(r,t,4,p||null,m||null);Mc(r,s,C,Jn(E,b)),ha(r,C);const I=C.tView=mm(2,C,l,u,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,E,null);return null!==r.queries&&(r.queries.template(r,C),I.queries=r.queries.embeddedTView(C)),C}(C,r,t,l,u,h,p,m,b):r.data[C];Tr(I,!1);const R=N_(r,t,I,s);Bs()&&Sc(r,t,R,I),cn(R,t);const N=Re(R,t,R,I);return t[C]=N,xc(t,N),function To(t,r,s){return tn(t,r,s)}(N,I,t),na(I)&&pm(r,t,I),null!=b&&gm(t,I,E),I}function yv(t,r,s,l,u,h,p,m){const b=F(),E=Pe();return Yc(b,E,t,r,s,l,u,Jn(E.consts,h),p,m),yv}let N_=P_;function P_(t,r,s,l){return mr(!0),r[ye].createComment("")}function s0(t,r,s,l){const u=r[hn],h=!u||zr()||ll(s)||ro(u,l);if(mr(h),h)return P_(0,r);const p=u.data[jd]?.[l]??null;null!==p&&null!==s.tView&&null===s.tView.ssrId&&(s.tView.ssrId=p);const m=ms(u,t,r,s);return pc(u,l,m),Ao(Mg(u,l),m)}var v=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(v||{});let y=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=tt({token:t,providedIn:"root",factory:()=>new t})}}return t})();class w{constructor(){this.ngZone=re(mt),this.scheduler=re(ys),this.errorHandler=re(Xr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[v.EarlyRead,v.Write,v.MixedReadWrite,v.Read]}execute(){this.executing=!0;for(const r of w.PHASES)for(const s of this.sequences)if(!s.erroredOrDestroyed&&s.hooks[r])try{s.pipelinedValue=this.ngZone.runOutsideAngular(()=>s.hooks[r](s.pipelinedValue))}catch(l){s.erroredOrDestroyed=!0,this.errorHandler?.handleError(l)}this.executing=!1;for(const r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(const r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(r){this.executing?this.deferredRegistrations.add(r):(this.sequences.add(r),this.scheduler.notify(6))}unregister(r){this.executing&&this.sequences.has(r)?(r.erroredOrDestroyed=!0,r.pipelinedValue=void 0,r.once=!0):(this.sequences.delete(r),this.deferredRegistrations.delete(r))}static{this.\u0275prov=tt({token:w,providedIn:"root",factory:()=>new w})}}function V_(t,r,s,l){const u=F();return Ot(u,Rr(),r)&&(Pe(),Jr(pt(),u,t,r,s,l)),V_}function bv(t,r){return t<<17|r<<2}function jo(t){return t>>17&32767}function H_(t){return 2|t}function ul(t){return(131068&t)>>2}function $_(t,r){return-131069&t|r<<2}function z_(t){return 1|t}function C0(t,r,s,l){const u=t[s+1],h=null===r;let p=l?jo(u):ul(u),m=!1;for(;0!==p&&(!1===m||h);){const E=t[p+1];vT(t[p],r)&&(m=!0,t[p+1]=l?z_(E):H_(E)),p=l?jo(E):ul(E)}m&&(t[s+1]=l?H_(u):z_(u))}function vT(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&Ms(t,r)>=0}function G_(t,r,s){const l=F();return Ot(l,Rr(),r)&&function Sn(t,r,s,l,u,h,p,m){const b=pn(r,s);let C,E=r.inputs;!m&&null!=E&&(C=E[l])?(ds(t,s,C,l,u),gi(r)&&function yw(t,r){const s=on(r,t);16&s[ue]||(s[ue]|=64)}(s,r.index)):3&r.type&&(l=function vw(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(l),u=null!=p?p(u,r.value||"",l):u,h.setProperty(b,l,u))}(Pe(),pt(),l,t,r,l[ye],s,!1),G_}function W_(t,r,s,l,u){const p=u?"class":"style";ds(t,s,r.inputs[p],p,l)}function q_(t,r){return function oi(t,r,s,l){const u=F(),h=Pe(),p=function Gr(t){const r=fe.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}(2);h.firstUpdatePass&&function P0(t,r,s,l){const u=t.data;if(null===u[s+1]){const h=u[an()],p=function N0(t,r){return r>=t.expandoStartIndex}(t,s);(function L0(t,r){return!!(t.flags&(r?8:16))})(h,l)&&null===r&&!p&&(r=!1),r=function ST(t,r,s,l){const u=function dd(t){const r=fe.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let h=l?r.residualClasses:r.residualStyles;if(null===u)0===(l?r.classBindings:r.styleBindings)&&(s=yf(s=X_(null,t,r,s,l),r.attrs,l),h=null);else{const p=r.directiveStylingLast;if(-1===p||t[p]!==u)if(s=X_(u,t,r,s,l),null===h){let b=function IT(t,r,s){const l=s?r.classBindings:r.styleBindings;if(0!==ul(l))return t[jo(l)]}(t,r,l);void 0!==b&&Array.isArray(b)&&(b=X_(null,t,r,b[1],l),b=yf(b,r.attrs,l),function TT(t,r,s,l){t[jo(s?r.classBindings:r.styleBindings)]=l}(t,r,l,b))}else h=function MT(t,r,s){let l;const u=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<u;h++)l=yf(l,t[h].hostAttrs,s);return yf(l,r.attrs,s)}(t,r,l)}return void 0!==h&&(l?r.residualClasses=h:r.residualStyles=h),s}(u,h,r,l),function gT(t,r,s,l,u,h){let p=h?r.classBindings:r.styleBindings,m=jo(p),b=ul(p);t[l]=s;let C,E=!1;if(Array.isArray(s)?(C=s[1],(null===C||Ms(s,C)>0)&&(E=!0)):C=s,u)if(0!==b){const R=jo(t[m+1]);t[l+1]=bv(R,m),0!==R&&(t[R+1]=$_(t[R+1],l)),t[m+1]=function fT(t,r){return 131071&t|r<<17}(t[m+1],l)}else t[l+1]=bv(m,0),0!==m&&(t[m+1]=$_(t[m+1],l)),m=l;else t[l+1]=bv(b,0),0===m?m=l:t[b+1]=$_(t[b+1],l),b=l;E&&(t[l+1]=H_(t[l+1])),C0(t,C,l,!0),C0(t,C,l,!1),function mT(t,r,s,l,u){const h=u?t.residualClasses:t.residualStyles;null!=h&&"string"==typeof r&&Ms(h,r)>=0&&(s[l+1]=z_(s[l+1]))}(r,C,t,l,h),p=bv(m,b),h?r.classBindings=p:r.styleBindings=p}(u,h,r,s,p,l)}}(h,t,p,l),r!==Ie&&Ot(u,p,r)&&function k0(t,r,s,l,u,h,p,m){if(!(3&r.type))return;const b=t.data,E=b[m+1],C=function pT(t){return!(1&~t)}(E)?F0(b,r,s,u,ul(E),p):void 0;wv(C)||(wv(h)||function hT(t){return!(2&~t)}(E)&&(h=F0(b,null,s,u,m,p)),function cm(t,r,s,l,u){if(r)u?t.addClass(s,l):t.removeClass(s,l);else{let h=-1===l.indexOf("-")?void 0:ls.DashCase;null==u?t.removeStyle(s,l,h):("string"==typeof u&&u.endsWith("!important")&&(u=u.slice(0,-10),h|=ls.Important),t.setStyle(s,l,u,h))}}(l,p,aa(an(),s),u,h))}(h,h.data[an()],u,u[ye],t,u[p+1]=function PT(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Bt(Pr(t)))),t}(r,s),l,p)}(t,r,null,!0),q_}function X_(t,r,s,l,u){let h=null;const p=s.directiveEnd;let m=s.directiveStylingLast;for(-1===m?m=s.directiveStart:m++;m<p&&(h=r[m],l=yf(l,h.hostAttrs,u),h!==t);)m++;return null!==t&&(s.directiveStylingLast=m),l}function yf(t,r,s){const l=s?1:2;let u=-1;if(null!==r)for(let h=0;h<r.length;h++){const p=r[h];"number"==typeof p?u=p:u===l&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),qn(t,p,!!s||r[++h]))}return void 0===t?null:t}function F0(t,r,s,l,u,h){const p=null===r;let m;for(;u>0;){const b=t[u],E=Array.isArray(b),C=E?b[1]:b,I=null===C;let R=s[u+1];R===Ie&&(R=I?Ge:void 0);let N=I?Jf(R,l):C===l?R:void 0;if(E&&!wv(N)&&(N=Jf(b,l)),wv(N)&&(m=N,p))return m;const P=t[u+1];u=p?jo(P):ul(P)}if(null!==r){let b=h?r.residualClasses:r.residualStyles;null!=b&&(m=Jf(b,l))}return m}function wv(t){return void 0!==t}function Ev(t,r,s,l){const u=F(),h=Pe(),p=ie+t,m=u[ye],b=h.firstCreatePass?function nM(t,r,s,l,u,h){const p=r.consts,b=mo(r,t,2,l,Jn(p,u));return Mc(r,s,b,Jn(p,h)),null!==b.attrs&&_s(b,b.attrs,!1),null!==b.mergedAttrs&&_s(b,b.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,b),b}(p,h,u,r,s,l):h.data[p],E=V0(h,u,b,m,r,t);u[p]=E;const C=na(b);return Tr(b,!0),dm(m,E,b),!ll(b)&&Bs()&&Sc(h,u,E,b),0===function Mp(){return fe.lFrame.elementDepthCount}()&&cn(E,u),function Ly(){fe.lFrame.elementDepthCount++}(),C&&(pm(h,u,b),fm(h,b,u)),null!==l&&gm(u,b),Ev}function Dv(){let t=Qe();Vl()?function Np(){fe.lFrame.isParent=!1}():(t=t.parent,Tr(t,!1));const r=t;(function By(t){return fe.skipHydrationRootTNode===t})(r)&&function Vy(){fe.skipHydrationRootTNode=null}(),function jy(){fe.lFrame.elementDepthCount--}();const s=Pe();return s.firstCreatePass&&(ha(s,t),Ll(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Zy(t){return!!(8&t.flags)}(r)&&W_(s,r,F(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function FD(t){return!!(16&t.flags)}(r)&&W_(s,r,F(),r.stylesWithoutHost,!1),Dv}function Z_(t,r,s,l){return Ev(t,r,s,l),Dv(),Z_}let V0=(t,r,s,l,u,h)=>(mr(!0),Ua(l,u,Ky()));function rM(t,r,s,l,u,h){const p=r[hn],m=!p||zr()||ll(s)||ro(p,h);if(mr(m),m)return Ua(l,u,Ky());const b=ms(p,t,r,s);return xa(p,h)&&pc(p,h,b.nextSibling),p&&(ya(s)||nc(b))&&gi(s)&&(function Uy(t){fe.skipHydrationRootTNode=t}(s),yr(b)),b}let $0=(t,r,s,l)=>(mr(!0),Cc(r[ye],""));function oM(t,r,s,l){let u;const h=r[hn],p=!h||zr()||ro(h,l)||ll(s);if(mr(p),p)return Cc(r[ye],"");const m=ms(h,t,r,s),b=function Rb(t,r){const s=t.data;let l=s[uc]?.[r]??null;return null===l&&s[Js]?.[r]&&(l=Mg(t,r)),l}(h,l);return pc(h,l,m),u=Ao(b,m),u}function z0(){return F()}const dl=void 0;var cM=["en",[["a","p"],["AM","PM"],dl],[["AM","PM"],dl,dl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dl,"{1} 'at' {0}",dl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function lM(t){const s=Math.floor(Math.abs(t)),l=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===l?1:5}];let du={};function tE(t){const r=function uM(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=X0(r);if(s)return s;const l=r.split("-")[0];if(s=X0(l),s)return s;if("en"===l)return cM;throw new Q(701,!1)}function q0(t){return tE(t)[hu.PluralCase]}function X0(t){return t in du||(du[t]=Ce.ng&&Ce.ng.common&&Ce.ng.common.locales&&Ce.ng.common.locales[t]),du[t]}var hu=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(hu||{});const Cv="en-US";let K0=Cv,fA=(t,r,s)=>{};function iE(t,r,s,l){const u=F(),h=Pe(),p=Qe();return function sE(t,r,s,l,u,h,p){const m=na(l),E=t.firstCreatePass&&Aw(t),C=r[lt],I=xt(r);let R=!0;if(3&l.type||p){const V=pn(l,r),G=p?p(V):V,q=I.length,U=p?Ve=>p(Se(Ve[l.index])):l.index;let _e=null;if(!p&&m&&(_e=function ZM(t,r,s,l){const u=t.cleanup;if(null!=u)for(let h=0;h<u.length-1;h+=2){const p=u[h];if(p===s&&u[h+1]===l){const m=r[fi],b=u[h+2];return m.length>b?m[b]:null}"string"==typeof p&&(h+=2)}return null}(t,r,u,l.index)),null!==_e)(_e.__ngLastListenerFn__||_e).__ngNextListenerFn__=h,_e.__ngLastListenerFn__=h,R=!1;else{h=vA(l,r,C,h),fA(V,u,h);const Ve=s.listen(G,u,h);I.push(h,Ve),E&&E.push(u,U,q,q+1)}}else h=vA(l,r,C,h);const N=l.outputs;let P;if(R&&null!==N&&(P=N[u])){const V=P.length;if(V)for(let G=0;G<V;G+=2){const ct=r[P[G]][P[G+1]].subscribe(h),Gt=I.length;I.push(h,ct),E&&E.push(u,l.index,Gt,-(Gt+1))}}}(h,u,u[ye],p,t,r,l),iE}function mA(t,r,s,l){const u=X(null);try{return ft(6,r,s),!1!==s(l)}catch(h){return Dh(t,h),!1}finally{ft(7,r,s),X(u)}}function vA(t,r,s,l){return function u(h){if(h===Function)return l;Vt(t.componentOffset>-1?on(t.index,r):r,5);let m=mA(r,s,l,h),b=u.__ngNextListenerFn__;for(;b;)m=mA(r,s,b,h)&&m,b=b.__ngNextListenerFn__;return m}}function yA(t=1){return function RD(t){return(fe.lFrame.contextLView=function id(t,r){for(;t>0;)r=r[On],t--;return r}(t,fe.lFrame.contextLView))[lt]}(t)}function TA(t,r,s,l){sl(t,r,s,l)}function MA(t){const r=F(),s=Pe(),l=$l();da(l+1);const u=af(s,l);if(t.dirty&&function yi(t){return!(4&~t[ue])}(r)===!(2&~u.metadata.flags)){if(null===u.matches)t.reset([]);else{const h=nv(r,l);t.reset(h,hg),t.notifyOnChanges()}return!0}return!1}function RA(){return function sf(t,r){return t[Hr].queries[r].queryList}(F(),$l())}function xA(t){return function vi(t,r){return t[r]}(function Hy(){return fe.lFrame.contextLView}(),ie+t)}function VA(t,r=""){const s=F(),l=Pe(),u=t+ie,h=l.firstCreatePass?mo(l,u,1,r,null):l.data[u],p=HA(l,s,h,r,t);s[u]=p,Bs()&&Sc(l,s,p,h),Tr(h,!1)}let HA=(t,r,s,l,u)=>(mr(!0),Ba(r[ye],l));function mR(t,r,s,l,u){const h=r[hn],p=!h||zr()||ll(s)||ro(h,u);return mr(p),p?Ba(r[ye],l):ms(h,t,r,s)}function lE(t){return Tv("",t,""),lE}function Tv(t,r,s){const l=F(),u=function nu(t,r,s,l){return Ot(t,Rr(),s)?r+ce(s)+l:Ie}(l,t,r,s);return u!==Ie&&function Ti(t,r,s){const l=aa(r,t);!function Jg(t,r,s){t.setValue(r,s)}(t[ye],l,s)}(l,an(),u),Tv}let SR=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const l=cp(0,s.type),u=l.length>0?mv([l],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,u)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=tt({token:t,providedIn:"environment",factory:()=>new t(dn(dr))})}}return t})();function nS(t){Nt("NgStandalone"),t.getStandaloneInjector=r=>r.get(SR).getOrCreateStandaloneInjector(t)}function uS(t,r){return Th(t,r)}class SS{constructor(r){this.full=r;const s=r.split(".");this.major=s[0],this.minor=s[1],this.patch=s.slice(2).join(".")}}let IS=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();const NS=new Ae(""),PS=new Ae("");let yE,Bx=(()=>{class t{constructor(s,l,u){this._ngZone=s,this.registry=l,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,yE||(function Ux(t){yE=t}(u),u.addToWindow(l)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb()}});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,u){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==h),s()},l)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:u})}whenStable(s,l,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,u),this._runCallbacksIfReady()}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,l,u){return[]}static{this.\u0275fac=function(l){return new(l||t)(dn(mt),dn(OS),dn(PS))}}static{this.\u0275prov=tt({token:t,factory:t.\u0275fac})}}return t})(),OS=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){return yE?.findTestabilityInTree(this,s,l)??null}static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();function bE(t){return!!t&&"function"==typeof t.then}function kS(t){return!!t&&"function"==typeof t.subscribe}const Vx=new Ae("");let FS=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,l)=>{this.resolve=s,this.reject=l}),this.appInits=re(Vx,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const u of this.appInits){const h=u();if(bE(h))s.push(h);else if(kS(h)){const p=new Promise((m,b)=>{h.subscribe({complete:m,error:b})});s.push(p)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{l()}).catch(u=>{this.reject(u)}),0===s.length&&l(),this.initialized=!0}static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const Pv=new Ae("");let kv,Bi=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=re(Cd),this.afterRenderManager=re(y),this.zonelessEnabled=re(bs),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new bu.B,this.afterTick=new bu.B,this.componentTypes=[],this.components=[],this.isStable=re(qs).hasPendingTasks.pipe((0,Gn.T)(s=>!s)),this._injector=re(dr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let s;return new Promise(l=>{s=this.isStable.subscribe({next:u=>{u&&l()}})}).finally(()=>{s.unsubscribe()})}get injector(){return this._injector}bootstrap(s,l){const u=s instanceof Um;if(!this._injector.get(FS).done)throw!u&&Gi(s),new Q(405,!1);let p;p=u?s:this._injector.get(ws).resolveComponentFactory(s),this.componentTypes.push(p.componentType);const m=function Hx(t){return t.isBoundToModule}(p)?void 0:this._injector.get(Oo),E=p.create(ln.NULL,[],l||p.selector,m),C=E.location.nativeElement,I=E.injector.get(NS,null);return I?.registerApplication(C),E.onDestroy(()=>{this.detachView(E.hostView),Ov(this.components,E),I?.unregisterApplication(C)}),this._loadComponent(E),E}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Q(101,!1);const s=X(null);try{this._runningTick=!0,this.synchronize()}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1,X(s),this.afterTick.next()}}synchronize(){let s=null;this._injector.destroyed||(s=this._injector.get(Et,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let l=0;for(;0!==this.dirtyFlags&&l++<10;)this.synchronizeOnce(s)}synchronizeOnce(s){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,7&this.dirtyFlags){const l=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(l);for(let{_lView:u,notifyErrorHandler:h}of this._views)Gx(u,h,l,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),7&this.dirtyFlags)return}else s?.begin?.(),s?.end?.();8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:s})=>Ul(s))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;Ov(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const l=this._injector.get(Pv,[]);[...this._bootstrapListeners,...l].forEach(u=>u(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Ov(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Q(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Ov(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}function wE(t){kv??=new WeakMap;const r=kv.get(t);if(r)return r;const s=t.isStable.pipe((0,wu.$)(l=>l)).toPromise().then(()=>{});return kv.set(t,s),t.onDestroy(()=>kv?.delete(t)),s}function Gx(t,r,s,l){(s||Ul(t))&&fs(t,r,s&&!l?0:1)}class Wx{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let qx=(()=>{class t{compileModuleSync(s){return new gv(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const l=this.compileModuleSync(s),h=An(Xt(s).declarations).reduce((p,m)=>{const b=Ne(m);return b&&p.push(new Io(b)),p},[]);return new Wx(l,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Yx=(()=>{class t{constructor(){this.zone=re(mt),this.changeDetectionScheduler=re(ys),this.applicationRef=re(Bi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function _E({ngZoneFactory:t,ignoreChangesOutsideZone:r,scheduleInRootZone:s}){return t??=()=>new mt({...EE(),scheduleInRootZone:s}),[{provide:mt,useFactory:t},{provide:Ar,multi:!0,useFactory:()=>{const l=re(Yx,{optional:!0});return()=>l.initialize()}},{provide:Ar,multi:!0,useFactory:()=>{const l=re(Zx);return()=>{l.initialize()}}},!0===r?{provide:el,useValue:!0}:[],{provide:Vc,useValue:s??hb}]}function EE(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let Zx=(()=>{class t{constructor(){this.subscription=new Ff.yU,this.initialized=!1,this.zone=re(mt),this.pendingTasks=re(qs)}initialize(){if(this.initialized)return;this.initialized=!0;let s=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(s=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{mt.assertNotInAngularZone(),queueMicrotask(()=>{null!==s&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(s),s=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{mt.assertInAngularZone(),s??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Tf=(()=>{class t{constructor(){this.appRef=re(Bi),this.taskService=re(qs),this.ngZone=re(mt),this.zonelessEnabled=re(bs),this.disableScheduling=re(el,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ff.yU,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ma):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(re(Vc,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof _d||!this.zoneIsDefined)}notify(s){if(!this.zonelessEnabled&&5===s)return;switch(s){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 7:this.appRef.deferredDirtyFlags|=8;break;default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;const l=this.useMicrotaskScheduler?fb:sg;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>l(()=>this.tick())):this.ngZone.runOutsideAngular(()=>l(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ma+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const s=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(l){throw this.taskService.remove(s),l}finally{this.cleanup()}this.useMicrotaskScheduler=!0,fb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(s)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const s=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(s)}}static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275prov=tt({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();const CE=new Ae("",{providedIn:"root",factory:()=>re(CE,Fe.Optional|Fe.SkipSelf)||function Jx(){return typeof $localize<"u"&&$localize.locale||Cv}()}),eN=new Ae("",{providedIn:"root",factory:()=>"USD"}),Fv=new Ae("");function Lv(t){return!t.moduleRef}let Bo=null;let KS=(()=>{class t{static{this.__NG_ELEMENT_ID__=cN}}return t})();function cN(t){return function uN(t,r,s){if(gi(t)&&!s){const l=on(t.index,r);return new xi(l,l)}return 175&t.type?new xi(r[ht],r):null}(Qe(),F(),!(16&~t))}class JS{constructor(){}supports(r){return gf(r)}create(r){return new gN(r)}}const pN=(t,r)=>r;class gN{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||pN}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,l=this._removalsHead,u=0,h=null;for(;s||l;){const p=!l||s&&s.currentIndex<tI(l,u,h)?s:l,m=tI(p,u,h),b=p.currentIndex;if(p===l)u--,l=l._nextRemoved;else if(s=s._next,null==p.previousIndex)u++;else{h||(h=[]);const E=m-u,C=b-u;if(E!=C){for(let R=0;R<E;R++){const N=R<h.length?h[R]:h[R]=0,P=N+R;C<=P&&P<E&&(h[R]=N+1)}h[p.previousIndex]=C-E}}m!==b&&r(p,m,b)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!gf(r))throw new Q(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let u,h,p,s=this._itHead,l=!1;if(Array.isArray(r)){this.length=r.length;for(let m=0;m<this.length;m++)h=r[m],p=this._trackByFn(m,h),null!==s&&Object.is(s.trackById,p)?(l&&(s=this._verifyReinsertion(s,h,p,m)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,p,m),l=!0),s=s._next}else u=0,function t0(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let l;for(;!(l=s.next()).done;)r(l.value)}}(r,m=>{p=this._trackByFn(u,m),null!==s&&Object.is(s.trackById,p)?(l&&(s=this._verifyReinsertion(s,m,p,u)),Object.is(s.item,m)||this._addIdentityChange(s,m)):(s=this._mismatch(s,m,p,u),l=!0),s=s._next,u++}),this.length=u;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,l,u){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,u)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(l,u))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,u)):r=this._addAfter(new mN(s,l),h,u),r}_verifyReinsertion(r,s,l,u){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?r=this._reinsertAfter(h,r._prev,u):r.currentIndex!=u&&(r.currentIndex=u,this._addToMoves(r,u)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const u=r._prevRemoved,h=r._nextRemoved;return null===u?this._removalsHead=h:u._nextRemoved=h,null===h?this._removalsTail=u:h._prevRemoved=u,this._insertAfter(r,s,l),this._addToMoves(r,l),r}_moveAfter(r,s,l){return this._unlink(r),this._insertAfter(r,s,l),this._addToMoves(r,l),r}_addAfter(r,s,l){return this._insertAfter(r,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,l){const u=null===s?this._itHead:s._next;return r._next=u,r._prev=s,null===u?this._itTail=r:u._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new eI),this._linkedRecords.put(r),r.currentIndex=l,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,l=r._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new eI),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class mN{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class vN{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,r))return l;return null}remove(r){const s=r._prevDup,l=r._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class eI{constructor(){this.map=new Map}put(r){const s=r.trackById;let l=this.map.get(s);l||(l=new vN,this.map.set(s,l)),l.add(r)}get(r,s){const u=this.map.get(r);return u?u.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function tI(t,r,s){const l=t.previousIndex;if(null===l)return l;let u=0;return s&&l<s.length&&(u=s[l]),l+r+u}class nI{constructor(){}supports(r){return r instanceof Map||vv(r)}create(){return new yN}}class yN{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||vv(r)))throw new Q(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,u)=>{if(s&&s.key===u)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(u,l);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const l=r._prev;return s._next=r,s._prev=l,r._prev=s,l&&(l._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const u=this._records.get(r);this._maybeAddToChanges(u,s);const h=u._prev,p=u._next;return h&&(h._next=p),p&&(p._prev=h),u._next=null,u._prev=null,u}const l=new bN(r);return this._records.set(r,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(l=>s(r[l],l))}}class bN{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function rI(){return new RE([new JS])}let RE=(()=>{class t{static{this.\u0275prov=tt({token:t,providedIn:"root",factory:rI})}constructor(s){this.factories=s}static create(s,l){if(null!=l){const u=l.factories.slice();s=s.concat(u)}return new t(s)}static extend(s){return{provide:t,useFactory:l=>t.create(s,l||rI()),deps:[[t,new Cl,new Fu]]}}find(s){const l=this.factories.find(u=>u.supports(s));if(null!=l)return l;throw new Q(901,!1)}}return t})();function iI(){return new xE([new nI])}let xE=(()=>{class t{static{this.\u0275prov=tt({token:t,providedIn:"root",factory:iI})}constructor(s){this.factories=s}static create(s,l){if(l){const u=l.factories.slice();s=s.concat(u)}return new t(s)}static extend(s){return{provide:t,useFactory:l=>t.create(s,l||iI()),deps:[[t,new Cl,new Fu]]}}find(s){const l=this.factories.find(u=>u.supports(s));if(l)return l;throw new Q(901,!1)}}return t})();function PN(t){try{const{rootComponent:r,appProviders:s,platformProviders:l}=t,u=function lN(t=[]){if(Bo)return Bo;const r=function WS(t=[],r){return ln.create({name:r,providers:[{provide:fp,useValue:"platform"},{provide:Fv,useValue:new Set([()=>Bo=null])},...t]})}(t);return Bo=r,function LS(){!function Xv(t){Nf=t}(()=>{throw new Q(600,!1)})}(),function qS(t){t.get(kd,null)?.forEach(s=>s())}(r),r}(l),h=[_E({}),{provide:ys,useExisting:Tf},...s||[]];return function $S(t){const r=Lv(t)?t.r3Injector:t.moduleRef.injector,s=r.get(mt);return s.run(()=>{Lv(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const l=r.get(Xr,null);let u;if(s.runOutsideAngular(()=>{u=s.onError.subscribe({next:h=>{l.handleError(h)}})}),Lv(t)){const h=()=>r.destroy(),p=t.platformInjector.get(Fv);p.add(h),r.onDestroy(()=>{u.unsubscribe(),p.delete(h)})}else{const h=()=>t.moduleRef.destroy(),p=t.platformInjector.get(Fv);p.add(h),t.moduleRef.onDestroy(()=>{Ov(t.allPlatformModules,t.moduleRef),u.unsubscribe(),p.delete(h)})}return function zx(t,r,s){try{const l=s();return bE(l)?l.catch(u=>{throw r.runOutsideAngular(()=>t.handleError(u)),u}):l}catch(l){throw r.runOutsideAngular(()=>t.handleError(l)),l}}(l,s,()=>{const h=r.get(FS);return h.runInitializers(),h.donePromise.then(()=>{if(function pM(t){"string"==typeof t&&(K0=t.toLowerCase().replace(/_/g,"-"))}(r.get(CE,Cv)||Cv),Lv(t)){const m=r.get(Bi);return void 0!==t.rootComponent&&m.bootstrap(t.rootComponent),m}return function sN(t,r){const s=t.injector.get(Bi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(l=>s.bootstrap(l));else{if(!t.instance.ngDoBootstrap)throw new Q(-403,!1);t.instance.ngDoBootstrap(s)}r.push(t)}(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}({r3Injector:new x_({providers:h,parent:u,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:u,rootComponent:r})}catch(r){return Promise.reject(r)}}let AI=!1;function ZN(){return Rl([{provide:Gd,useFactory:()=>{let t=!0;return Ln()&&(t=!!re(Ys,{optional:!0})?.get(Le,null)),t&&Nt("NgHydration"),t}},{provide:Ar,useValue:()=>{(function kh(t){Oh=t})(!1),Ln()&&re(Gd)&&(function JN(){const t=Ci();let r;for(const s of t.body.childNodes)if(s.nodeType===Node.COMMENT_NODE&&s.textContent?.trim()===Bd){r=s;break}if(!r)throw new Q(-507,!1)}(),function KN(){AI||(AI=!0,function Ud(){Yr=Fn}(),function iM(){V0=rM}(),function vR(){HA=mR}(),function aM(){$0=oM}(),function o0(){N_=s0}(),function m_(){qm=g_,tn=p_}(),function e_(){Bm=Bc}(),function vC(){gw=mC}())}())},multi:!0},{provide:xg,useFactory:()=>Ln()&&re(Gd)},{provide:Pv,useFactory:()=>{if(Ln()&&re(Gd)){const t=re(Bi);return re(ln),()=>{(function QN(t){return wE(t)})(t).then(()=>{!function In(t){const r=t._views;for(const s of r){const l=no(s);null!==l&&null!==l[gt]&&(Rt(l)?Ja(l):Hh(l))}}(t)})}}return()=>{}},multi:!0}])}function eP(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function nP(t){const r=X(null);try{return t()}finally{X(r)}}}},et=>{et(et.s=449)}]);